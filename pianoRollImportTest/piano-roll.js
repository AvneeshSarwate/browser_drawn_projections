var PianoRollComponent=function(Wi){"use strict";/**
* @vue/shared v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function En(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const bt={},Ee=[],$t=()=>{},tl=()=>!1,zi=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),An=t=>t.startsWith("onUpdate:"),Tt=Object.assign,Mn=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},el=Object.prototype.hasOwnProperty,mt=(t,e)=>el.call(t,e),ct=Array.isArray,Ae=t=>Ge(t)==="[object Map]",Ki=t=>Ge(t)==="[object Set]",Ir=t=>Ge(t)==="[object Date]",ht=t=>typeof t=="function",Pt=t=>typeof t=="string",Jt=t=>typeof t=="symbol",Ct=t=>t!==null&&typeof t=="object",Dr=t=>(Ct(t)||ht(t))&&ht(t.then)&&ht(t.catch),Lr=Object.prototype.toString,Ge=t=>Lr.call(t),il=t=>Ge(t).slice(8,-1),ji=t=>Ge(t)==="[object Object]",Fn=t=>Pt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ue=En(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yi=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},nl=/-(\w)/g,jt=Yi(t=>t.replace(nl,(e,i)=>i?i.toUpperCase():"")),rl=/\B([A-Z])/g,Wt=Yi(t=>t.replace(rl,"-$1").toLowerCase()),Gr=Yi(t=>t.charAt(0).toUpperCase()+t.slice(1)),Nn=Yi(t=>t?`on${Gr(t)}`:""),fe=(t,e)=>!Object.is(t,e),Xi=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},Ur=(t,e,i,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:i})},Br=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Vr=t=>{const e=Pt(t)?Number(t):NaN;return isNaN(e)?t:e};let Hr;const qr=()=>Hr||(Hr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kn(t){if(ct(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=Pt(n)?ll(n):kn(n);if(s)for(const r in s)e[r]=s[r]}return e}else if(Pt(t)||Ct(t))return t}const sl=/;(?![^(]*\))/g,ol=/:([^]+)/,al=/\/\*[^]*?\*\//g;function ll(t){const e={};return t.replace(al,"").split(sl).forEach(i=>{if(i){const n=i.split(ol);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function $i(t){let e="";if(Pt(t))e=t;else if(ct(t))for(let i=0;i<t.length;i++){const n=$i(t[i]);n&&(e+=n+" ")}else if(Ct(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const cl=En("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Wr(t){return!!t||t===""}function hl(t,e){if(t.length!==e.length)return!1;let i=!0;for(let n=0;i&&n<t.length;n++)i=Ji(t[n],e[n]);return i}function Ji(t,e){if(t===e)return!0;let i=Ir(t),n=Ir(e);if(i||n)return i&&n?t.getTime()===e.getTime():!1;if(i=Jt(t),n=Jt(e),i||n)return t===e;if(i=ct(t),n=ct(e),i||n)return i&&n?hl(t,e):!1;if(i=Ct(t),n=Ct(e),i||n){if(!i||!n)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ji(t[o],e[o]))return!1}}return String(t)===String(e)}function dl(t,e){return t.findIndex(i=>Ji(i,e))}const zr=t=>!!(t&&t.__v_isRef===!0),On=t=>Pt(t)?t:t==null?"":ct(t)||Ct(t)&&(t.toString===Lr||!ht(t.toString))?zr(t)?On(t.value):JSON.stringify(t,Kr,2):String(t),Kr=(t,e)=>zr(e)?Kr(t,e.value):Ae(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,s],r)=>(i[In(n,r)+" =>"]=s,i),{})}:Ki(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>In(i))}:Jt(e)?In(e):Ct(e)&&!ct(e)&&!ji(e)?String(e):e,In=(t,e="")=>{var i;return Jt(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};/**
* @vue/reactivity v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vt;class ul{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vt,!e&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=Vt;try{return Vt=this,e()}finally{Vt=i}}}on(){Vt=this}off(){Vt=this.parent}stop(e){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function fl(){return Vt}let vt;const Dn=new WeakSet;class jr{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vt&&Vt.active&&Vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Dn.has(this)&&(Dn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Xr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ts(this),$r(this);const e=vt,i=Yt;vt=this,Yt=!0;try{return this.fn()}finally{Jr(this),vt=e,Yt=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Bn(e);this.deps=this.depsTail=void 0,ts(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Dn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Un(this)&&this.run()}get dirty(){return Un(this)}}let Yr=0,Be,Ve;function Xr(t,e=!1){if(t.flags|=8,e){t.next=Ve,Ve=t;return}t.next=Be,Be=t}function Ln(){Yr++}function Gn(){if(--Yr>0)return;if(Ve){let e=Ve;for(Ve=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;Be;){let e=Be;for(Be=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=i}}if(t)throw t}function $r(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Jr(t){let e,i=t.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),Bn(n),gl(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=i}function Un(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Qr(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Qr(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===He))return;t.globalVersion=He;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Un(t)){t.flags&=-3;return}const i=vt,n=Yt;vt=t,Yt=!0;try{$r(t);const s=t.fn(t._value);(e.version===0||fe(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{vt=i,Yt=n,Jr(t),t.flags&=-3}}function Bn(t,e=!1){const{dep:i,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),i.subs===t&&(i.subs=n),!i.subs&&i.computed){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Bn(r,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function gl(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let Yt=!0;const Zr=[];function ne(){Zr.push(Yt),Yt=!1}function re(){const t=Zr.pop();Yt=t===void 0?!0:t}function ts(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=vt;vt=void 0;try{e()}finally{vt=i}}}let He=0;class pl{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vn{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!vt||!Yt||vt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==vt)i=this.activeLink=new pl(vt,this),vt.deps?(i.prevDep=vt.depsTail,vt.depsTail.nextDep=i,vt.depsTail=i):vt.deps=vt.depsTail=i,es(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=vt.depsTail,i.nextDep=void 0,vt.depsTail.nextDep=i,vt.depsTail=i,vt.deps===i&&(vt.deps=n)}return i}trigger(e){this.version++,He++,this.notify(e)}notify(e){Ln();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Gn()}}}function es(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)es(n)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const Hn=new WeakMap,ve=Symbol(""),qn=Symbol(""),qe=Symbol("");function Mt(t,e,i){if(Yt&&vt){let n=Hn.get(t);n||Hn.set(t,n=new Map);let s=n.get(i);s||(n.set(i,s=new Vn),s.map=n,s.key=i),s.track()}}function se(t,e,i,n,s,r){const o=Hn.get(t);if(!o){He++;return}const a=l=>{l&&l.trigger()};if(Ln(),e==="clear")o.forEach(a);else{const l=ct(t),h=l&&Fn(i);if(l&&i==="length"){const d=Number(n);o.forEach((_,p)=>{(p==="length"||p===qe||!Jt(p)&&p>=d)&&a(_)})}else switch(i!==void 0&&a(o.get(i)),h&&a(o.get(qe)),e){case"add":l?h&&a(o.get("length")):(a(o.get(ve)),Ae(t)&&a(o.get(qn)));break;case"delete":l||(a(o.get(ve)),Ae(t)&&a(o.get(qn)));break;case"set":Ae(t)&&a(o.get(ve));break}}Gn()}function Me(t){const e=_t(t);return e===t?e:(Mt(e,"iterate",qe),Xt(t)?e:e.map(Ot))}function Wn(t){return Mt(t=_t(t),"iterate",qe),t}const _l={__proto__:null,[Symbol.iterator](){return zn(this,Symbol.iterator,Ot)},concat(...t){return Me(this).concat(...t.map(e=>ct(e)?Me(e):e))},entries(){return zn(this,"entries",t=>(t[1]=Ot(t[1]),t))},every(t,e){return oe(this,"every",t,e,void 0,arguments)},filter(t,e){return oe(this,"filter",t,e,i=>i.map(Ot),arguments)},find(t,e){return oe(this,"find",t,e,Ot,arguments)},findIndex(t,e){return oe(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return oe(this,"findLast",t,e,Ot,arguments)},findLastIndex(t,e){return oe(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return oe(this,"forEach",t,e,void 0,arguments)},includes(...t){return Kn(this,"includes",t)},indexOf(...t){return Kn(this,"indexOf",t)},join(t){return Me(this).join(t)},lastIndexOf(...t){return Kn(this,"lastIndexOf",t)},map(t,e){return oe(this,"map",t,e,void 0,arguments)},pop(){return We(this,"pop")},push(...t){return We(this,"push",t)},reduce(t,...e){return is(this,"reduce",t,e)},reduceRight(t,...e){return is(this,"reduceRight",t,e)},shift(){return We(this,"shift")},some(t,e){return oe(this,"some",t,e,void 0,arguments)},splice(...t){return We(this,"splice",t)},toReversed(){return Me(this).toReversed()},toSorted(t){return Me(this).toSorted(t)},toSpliced(...t){return Me(this).toSpliced(...t)},unshift(...t){return We(this,"unshift",t)},values(){return zn(this,"values",Ot)}};function zn(t,e,i){const n=Wn(t),s=n[e]();return n!==t&&!Xt(t)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=i(r.value)),r}),s}const ml=Array.prototype;function oe(t,e,i,n,s,r){const o=Wn(t),a=o!==t&&!Xt(t),l=o[e];if(l!==ml[e]){const _=l.apply(t,r);return a?Ot(_):_}let h=i;o!==t&&(a?h=function(_,p){return i.call(this,Ot(_),p,t)}:i.length>2&&(h=function(_,p){return i.call(this,_,p,t)}));const d=l.call(o,h,n);return a&&s?s(d):d}function is(t,e,i,n){const s=Wn(t);let r=i;return s!==t&&(Xt(t)?i.length>3&&(r=function(o,a,l){return i.call(this,o,a,l,t)}):r=function(o,a,l){return i.call(this,o,Ot(a),l,t)}),s[e](r,...n)}function Kn(t,e,i){const n=_t(t);Mt(n,"iterate",qe);const s=n[e](...i);return(s===-1||s===!1)&&Xn(i[0])?(i[0]=_t(i[0]),n[e](...i)):s}function We(t,e,i=[]){ne(),Ln();const n=_t(t)[e].apply(t,i);return Gn(),re(),n}const yl=En("__proto__,__v_isRef,__isVue"),ns=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Jt));function bl(t){Jt(t)||(t=String(t));const e=_t(this);return Mt(e,"has",t),e.hasOwnProperty(t)}class rs{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,n){const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return n===(s?r?gs:fs:r?us:ds).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=ct(e);if(!s){let l;if(o&&(l=_l[i]))return l;if(i==="hasOwnProperty")return bl}const a=Reflect.get(e,i,At(e)?e:n);return(Jt(i)?ns.has(i):yl(i))||(s||Mt(e,"get",i),r)?a:At(a)?o&&Fn(i)?a:a.value:Ct(a)?s?ps(a):Yn(a):a}}class ss extends rs{constructor(e=!1){super(!1,e)}set(e,i,n,s){let r=e[i];if(!this._isShallow){const l=Se(r);if(!Xt(n)&&!Se(n)&&(r=_t(r),n=_t(n)),!ct(e)&&At(r)&&!At(n))return l?!1:(r.value=n,!0)}const o=ct(e)&&Fn(i)?Number(i)<e.length:mt(e,i),a=Reflect.set(e,i,n,At(e)?e:s);return e===_t(s)&&(o?fe(n,r)&&se(e,"set",i,n):se(e,"add",i,n)),a}deleteProperty(e,i){const n=mt(e,i);e[i];const s=Reflect.deleteProperty(e,i);return s&&n&&se(e,"delete",i,void 0),s}has(e,i){const n=Reflect.has(e,i);return(!Jt(i)||!ns.has(i))&&Mt(e,"has",i),n}ownKeys(e){return Mt(e,"iterate",ct(e)?"length":ve),Reflect.ownKeys(e)}}class os extends rs{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const vl=new ss,Sl=new os,Cl=new ss(!0),wl=new os(!0),jn=t=>t,Qi=t=>Reflect.getPrototypeOf(t);function Zi(t,e,i=!1,n=!1){t=t.__v_raw;const s=_t(t),r=_t(e);i||(fe(e,r)&&Mt(s,"get",e),Mt(s,"get",r));const{has:o}=Qi(s),a=n?jn:i?$n:Ot;if(o.call(s,e))return a(t.get(e));if(o.call(s,r))return a(t.get(r));t!==s&&t.get(e)}function tn(t,e=!1){const i=this.__v_raw,n=_t(i),s=_t(t);return e||(fe(t,s)&&Mt(n,"has",t),Mt(n,"has",s)),t===s?i.has(t):i.has(t)||i.has(s)}function en(t,e=!1){return t=t.__v_raw,!e&&Mt(_t(t),"iterate",ve),Reflect.get(t,"size",t)}function as(t,e=!1){!e&&!Xt(t)&&!Se(t)&&(t=_t(t));const i=_t(this);return Qi(i).has.call(i,t)||(i.add(t),se(i,"add",t,t)),this}function ls(t,e,i=!1){!i&&!Xt(e)&&!Se(e)&&(e=_t(e));const n=_t(this),{has:s,get:r}=Qi(n);let o=s.call(n,t);o||(t=_t(t),o=s.call(n,t));const a=r.call(n,t);return n.set(t,e),o?fe(e,a)&&se(n,"set",t,e):se(n,"add",t,e),this}function cs(t){const e=_t(this),{has:i,get:n}=Qi(e);let s=i.call(e,t);s||(t=_t(t),s=i.call(e,t)),n&&n.call(e,t);const r=e.delete(t);return s&&se(e,"delete",t,void 0),r}function hs(){const t=_t(this),e=t.size!==0,i=t.clear();return e&&se(t,"clear",void 0,void 0),i}function nn(t,e){return function(n,s){const r=this,o=r.__v_raw,a=_t(o),l=e?jn:t?$n:Ot;return!t&&Mt(a,"iterate",ve),o.forEach((h,d)=>n.call(s,l(h),l(d),r))}}function rn(t,e,i){return function(...n){const s=this.__v_raw,r=_t(s),o=Ae(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,h=s[t](...n),d=i?jn:e?$n:Ot;return!e&&Mt(r,"iterate",l?qn:ve),{next(){const{value:_,done:p}=h.next();return p?{value:_,done:p}:{value:a?[d(_[0]),d(_[1])]:d(_),done:p}},[Symbol.iterator](){return this}}}}function ge(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function xl(){const t={get(r){return Zi(this,r)},get size(){return en(this)},has:tn,add:as,set:ls,delete:cs,clear:hs,forEach:nn(!1,!1)},e={get(r){return Zi(this,r,!1,!0)},get size(){return en(this)},has:tn,add(r){return as.call(this,r,!0)},set(r,o){return ls.call(this,r,o,!0)},delete:cs,clear:hs,forEach:nn(!1,!0)},i={get(r){return Zi(this,r,!0)},get size(){return en(this,!0)},has(r){return tn.call(this,r,!0)},add:ge("add"),set:ge("set"),delete:ge("delete"),clear:ge("clear"),forEach:nn(!0,!1)},n={get(r){return Zi(this,r,!0,!0)},get size(){return en(this,!0)},has(r){return tn.call(this,r,!0)},add:ge("add"),set:ge("set"),delete:ge("delete"),clear:ge("clear"),forEach:nn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=rn(r,!1,!1),i[r]=rn(r,!0,!1),e[r]=rn(r,!1,!0),n[r]=rn(r,!0,!0)}),[t,i,e,n]}const[Pl,Rl,Tl,El]=xl();function sn(t,e){const i=e?t?El:Tl:t?Rl:Pl;return(n,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(mt(i,s)&&s in n?i:n,s,r)}const Al={get:sn(!1,!1)},Ml={get:sn(!1,!0)},Fl={get:sn(!0,!1)},Nl={get:sn(!0,!0)},ds=new WeakMap,us=new WeakMap,fs=new WeakMap,gs=new WeakMap;function kl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ol(t){return t.__v_skip||!Object.isExtensible(t)?0:kl(il(t))}function Yn(t){return Se(t)?t:on(t,!1,vl,Al,ds)}function Il(t){return on(t,!1,Cl,Ml,us)}function ps(t){return on(t,!0,Sl,Fl,fs)}function Qd(t){return on(t,!0,wl,Nl,gs)}function on(t,e,i,n,s){if(!Ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const o=Ol(t);if(o===0)return t;const a=new Proxy(t,o===2?n:i);return s.set(t,a),a}function ze(t){return Se(t)?ze(t.__v_raw):!!(t&&t.__v_isReactive)}function Se(t){return!!(t&&t.__v_isReadonly)}function Xt(t){return!!(t&&t.__v_isShallow)}function Xn(t){return t?!!t.__v_raw:!1}function _t(t){const e=t&&t.__v_raw;return e?_t(e):t}function Dl(t){return!mt(t,"__v_skip")&&Object.isExtensible(t)&&Ur(t,"__v_skip",!0),t}const Ot=t=>Ct(t)?Yn(t):t,$n=t=>Ct(t)?ps(t):t;function At(t){return t?t.__v_isRef===!0:!1}function an(t){return Ll(t,!1)}function Ll(t,e){return At(t)?t:new Gl(t,e)}class Gl{constructor(e,i){this.dep=new Vn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:_t(e),this._value=i?e:Ot(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,n=this.__v_isShallow||Xt(e)||Se(e);e=n?e:_t(e),fe(e,i)&&(this._rawValue=e,this._value=n?e:Ot(e),this.dep.trigger())}}function _s(t){return At(t)?t.value:t}const Ul={get:(t,e,i)=>e==="__v_raw"?t:_s(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const s=t[e];return At(s)&&!At(i)?(s.value=i,!0):Reflect.set(t,e,i,n)}};function ms(t){return ze(t)?t:new Proxy(t,Ul)}class Bl{constructor(e,i,n){this.fn=e,this.setter=i,this._value=void 0,this.dep=new Vn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=He-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&vt!==this)return Xr(this,!0),!0}get value(){const e=this.dep.track();return Qr(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Vl(t,e,i=!1){let n,s;return ht(t)?n=t:(n=t.get,s=t.set),new Bl(n,s,i)}const ln={},cn=new WeakMap;let Ce;function Hl(t,e=!1,i=Ce){if(i){let n=cn.get(i);n||cn.set(i,n=[]),n.push(t)}}function ql(t,e,i=bt){const{immediate:n,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=i,h=m=>s?m:Xt(m)||s===!1||s===0?ae(m,1):ae(m);let d,_,p,u,g=!1,y=!1;if(At(t)?(_=()=>t.value,g=Xt(t)):ze(t)?(_=()=>h(t),g=!0):ct(t)?(y=!0,g=t.some(m=>ze(m)||Xt(m)),_=()=>t.map(m=>{if(At(m))return m.value;if(ze(m))return h(m);if(ht(m))return l?l(m,2):m()})):ht(t)?e?_=l?()=>l(t,2):t:_=()=>{if(p){ne();try{p()}finally{re()}}const m=Ce;Ce=d;try{return l?l(t,3,[u]):t(u)}finally{Ce=m}}:_=$t,e&&s){const m=_,v=s===!0?1/0:s;_=()=>ae(m(),v)}const S=fl(),x=()=>{d.stop(),S&&Mn(S.effects,d)};if(r&&e){const m=e;e=(...v)=>{m(...v),x()}}let f=y?new Array(t.length).fill(ln):ln;const c=m=>{if(!(!(d.flags&1)||!d.dirty&&!m))if(e){const v=d.run();if(s||g||(y?v.some((T,O)=>fe(T,f[O])):fe(v,f))){p&&p();const T=Ce;Ce=d;try{const O=[v,f===ln?void 0:y&&f[0]===ln?[]:f,u];l?l(e,3,O):e(...O),f=v}finally{Ce=T}}}else d.run()};return a&&a(c),d=new jr(_),d.scheduler=o?()=>o(c,!1):c,u=m=>Hl(m,!1,d),p=d.onStop=()=>{const m=cn.get(d);if(m){if(l)l(m,4);else for(const v of m)v();cn.delete(d)}},e?n?c(!0):f=d.run():o?o(c.bind(null,!0),!0):d.run(),x.pause=d.pause.bind(d),x.resume=d.resume.bind(d),x.stop=x,x}function ae(t,e=1/0,i){if(e<=0||!Ct(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,At(t))ae(t.value,e,i);else if(ct(t))for(let n=0;n<t.length;n++)ae(t[n],e,i);else if(Ki(t)||Ae(t))t.forEach(n=>{ae(n,e,i)});else if(ji(t)){for(const n in t)ae(t[n],e,i);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&ae(t[n],e,i)}return t}/**
* @vue/runtime-core v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ke=[];let Jn=!1;function Zd(t,...e){if(Jn)return;Jn=!0,ne();const i=Ke.length?Ke[Ke.length-1].component:null,n=i&&i.appContext.config.warnHandler,s=Wl();if(n)Fe(n,i,11,[t+e.map(r=>{var o,a;return(a=(o=r.toString)==null?void 0:o.call(r))!=null?a:JSON.stringify(r)}).join(""),i&&i.proxy,s.map(({vnode:r})=>`at <${fo(i,r.type)}>`).join(`
`),s]);else{const r=[`[Vue warn]: ${t}`,...e];s.length&&r.push(`
`,...zl(s)),console.warn(...r)}re(),Jn=!1}function Wl(){let t=Ke[Ke.length-1];if(!t)return[];const e=[];for(;t;){const i=e[0];i&&i.vnode===t?i.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function zl(t){const e=[];return t.forEach((i,n)=>{e.push(...n===0?[]:[`
`],...Kl(i))}),e}function Kl({vnode:t,recurseCount:e}){const i=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,s=` at <${fo(t.component,t.type,n)}`,r=">"+i;return t.props?[s,...jl(t.props),r]:[s+r]}function jl(t){const e=[],i=Object.keys(t);return i.slice(0,3).forEach(n=>{e.push(...ys(n,t[n]))}),i.length>3&&e.push(" ..."),e}function ys(t,e,i){return Pt(e)?(e=JSON.stringify(e),i?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?i?e:[`${t}=${e}`]:At(e)?(e=ys(t,_t(e.value),!0),i?e:[`${t}=Ref<`,e,">"]):ht(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=_t(e),i?e:[`${t}=`,e])}function Fe(t,e,i,n){try{return n?t(...n):t()}catch(s){hn(s,e,i)}}function Qt(t,e,i,n){if(ht(t)){const s=Fe(t,e,i,n);return s&&Dr(s)&&s.catch(r=>{hn(r,e,i)}),s}if(ct(t)){const s=[];for(let r=0;r<t.length;r++)s.push(Qt(t[r],e,i,n));return s}}function hn(t,e,i,n=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||bt;if(e){let a=e.parent;const l=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const d=a.ec;if(d){for(let _=0;_<d.length;_++)if(d[_](t,l,h)===!1)return}a=a.parent}if(r){ne(),Fe(r,null,10,[t,l,h]),re();return}}Yl(t,i,s,n,o)}function Yl(t,e,i,n=!0,s=!1){if(s)throw t;console.error(t)}const It=[];let Zt=-1;const Ne=[];let pe=null,ke=0;const bs=Promise.resolve();let dn=null;function Qn(t){const e=dn||bs;return t?e.then(this?t.bind(this):t):e}function Xl(t){let e=Zt+1,i=It.length;for(;e<i;){const n=e+i>>>1,s=It[n],r=je(s);r<t||r===t&&s.flags&2?e=n+1:i=n}return e}function Zn(t){if(!(t.flags&1)){const e=je(t),i=It[It.length-1];!i||!(t.flags&2)&&e>=je(i)?It.push(t):It.splice(Xl(e),0,t),t.flags|=1,vs()}}function vs(){dn||(dn=bs.then(ws))}function $l(t){ct(t)?Ne.push(...t):pe&&t.id===-1?pe.splice(ke+1,0,t):t.flags&1||(Ne.push(t),t.flags|=1),vs()}function Ss(t,e,i=Zt+1){for(;i<It.length;i++){const n=It[i];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;It.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Cs(t){if(Ne.length){const e=[...new Set(Ne)].sort((i,n)=>je(i)-je(n));if(Ne.length=0,pe){pe.push(...e);return}for(pe=e,ke=0;ke<pe.length;ke++){const i=pe[ke];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}pe=null,ke=0}}const je=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ws(t){try{for(Zt=0;Zt<It.length;Zt++){const e=It[Zt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Fe(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Zt<It.length;Zt++){const e=It[Zt];e&&(e.flags&=-2)}Zt=-1,It.length=0,Cs(),dn=null,(It.length||Ne.length)&&ws()}}let zt=null,xs=null;function un(t){const e=zt;return zt=t,xs=t&&t.type.__scopeId||null,e}function Jl(t,e=zt,i){if(!e||t._n)return t;const n=(...s)=>{n._d&&io(-1);const r=un(e);let o;try{o=t(...s)}finally{un(r),n._d&&io(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Ql(t,e){if(zt===null)return t;const i=Sn(zt),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,a,l=bt]=e[s];r&&(ht(r)&&(r={mounted:r,updated:r}),r.deep&&ae(o),n.push({dir:r,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function we(t,e,i,n){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(ne(),Qt(l,i,8,[t.el,a,t,e]),re())}}const Zl=Symbol("_vte"),tc=t=>t.__isTeleport;function tr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,tr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Ps(t,e){return ht(t)?Tt({name:t.name},e,{setup:t}):t}function Rs(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function er(t,e,i,n,s=!1){if(ct(t)){t.forEach((g,y)=>er(g,e&&(ct(e)?e[y]:e),i,n,s));return}if(Ye(n)&&!s)return;const r=n.shapeFlag&4?Sn(n.component):n.el,o=s?null:r,{i:a,r:l}=t,h=e&&e.r,d=a.refs===bt?a.refs={}:a.refs,_=a.setupState,p=_t(_),u=_===bt?()=>!1:g=>mt(p,g);if(h!=null&&h!==l&&(Pt(h)?(d[h]=null,u(h)&&(_[h]=null)):At(h)&&(h.value=null)),ht(l))Fe(l,a,12,[o,d]);else{const g=Pt(l),y=At(l);if(g||y){const S=()=>{if(t.f){const x=g?u(l)?_[l]:d[l]:l.value;s?ct(x)&&Mn(x,r):ct(x)?x.includes(r)||x.push(r):g?(d[l]=[r],u(l)&&(_[l]=d[l])):(l.value=[r],t.k&&(d[t.k]=l.value))}else g?(d[l]=o,u(l)&&(_[l]=o)):y&&(l.value=o,t.k&&(d[t.k]=o))};o?(S.id=-1,Ht(S,i)):S()}}}const Ye=t=>!!t.type.__asyncLoader,Ts=t=>t.type.__isKeepAlive;function ec(t,e){Es(t,"a",e)}function ic(t,e){Es(t,"da",e)}function Es(t,e,i=Lt){const n=t.__wdc||(t.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(fn(e,n,i),i){let s=i.parent;for(;s&&s.parent;)Ts(s.parent.vnode)&&nc(n,e,i,s),s=s.parent}}function nc(t,e,i,n){const s=fn(e,t,n,!0);ir(()=>{Mn(n[e],s)},i)}function fn(t,e,i=Lt,n=!1){if(i){const s=i[t]||(i[t]=[]),r=e.__weh||(e.__weh=(...o)=>{ne();const a=ti(i),l=Qt(e,i,t,o);return a(),re(),l});return n?s.unshift(r):s.push(r),r}}const le=t=>(e,i=Lt)=>{(!vn||t==="sp")&&fn(t,(...n)=>e(...n),i)},rc=le("bm"),As=le("m"),sc=le("bu"),oc=le("u"),ac=le("bum"),ir=le("um"),lc=le("sp"),cc=le("rtg"),hc=le("rtc");function dc(t,e=Lt){fn("ec",t,e)}const uc=Symbol.for("v-ndc"),nr=t=>t?co(t)?Sn(t):nr(t.parent):null,Xe=Tt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nr(t.parent),$root:t=>nr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ks(t),$forceUpdate:t=>t.f||(t.f=()=>{Zn(t.update)}),$nextTick:t=>t.n||(t.n=Qn.bind(t.proxy)),$watch:t=>Oc.bind(t)}),rr=(t,e)=>t!==bt&&!t.__isScriptSetup&&mt(t,e),fc={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:l}=t;let h;if(e[0]!=="$"){const u=o[e];if(u!==void 0)switch(u){case 1:return n[e];case 2:return s[e];case 4:return i[e];case 3:return r[e]}else{if(rr(n,e))return o[e]=1,n[e];if(s!==bt&&mt(s,e))return o[e]=2,s[e];if((h=t.propsOptions[0])&&mt(h,e))return o[e]=3,r[e];if(i!==bt&&mt(i,e))return o[e]=4,i[e];sr&&(o[e]=0)}}const d=Xe[e];let _,p;if(d)return e==="$attrs"&&Mt(t.attrs,"get",""),d(t);if((_=a.__cssModules)&&(_=_[e]))return _;if(i!==bt&&mt(i,e))return o[e]=4,i[e];if(p=l.config.globalProperties,mt(p,e))return p[e]},set({_:t},e,i){const{data:n,setupState:s,ctx:r}=t;return rr(s,e)?(s[e]=i,!0):n!==bt&&mt(n,e)?(n[e]=i,!0):mt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:r}},o){let a;return!!i[o]||t!==bt&&mt(t,o)||rr(e,o)||(a=r[0])&&mt(a,o)||mt(n,o)||mt(Xe,o)||mt(s.config.globalProperties,o)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:mt(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function Ms(t){return ct(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let sr=!0;function gc(t){const e=ks(t),i=t.proxy,n=t.ctx;sr=!1,e.beforeCreate&&Fs(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:h,created:d,beforeMount:_,mounted:p,beforeUpdate:u,updated:g,activated:y,deactivated:S,beforeDestroy:x,beforeUnmount:f,destroyed:c,unmounted:m,render:v,renderTracked:T,renderTriggered:O,errorCaptured:C,serverPrefetch:w,expose:R,inheritAttrs:N,components:G,directives:D,filters:U}=e;if(h&&pc(h,n,null),o)for(const b in o){const P=o[b];ht(P)&&(n[b]=P.bind(i))}if(s){const b=s.call(i,i);Ct(b)&&(t.data=Yn(b))}if(sr=!0,r)for(const b in r){const P=r[b],F=ht(P)?P.bind(i,i):ht(P.get)?P.get.bind(i,i):$t,A=!ht(P)&&ht(P.set)?P.set.bind(i):$t,I=ei({get:F,set:A});Object.defineProperty(n,b,{enumerable:!0,configurable:!0,get:()=>I.value,set:W=>I.value=W})}if(a)for(const b in a)Ns(a[b],n,i,b);if(l){const b=ht(l)?l.call(i):l;Reflect.ownKeys(b).forEach(P=>{Sc(P,b[P])})}d&&Fs(d,t,"c");function K(b,P){ct(P)?P.forEach(F=>b(F.bind(i))):P&&b(P.bind(i))}if(K(rc,_),K(As,p),K(sc,u),K(oc,g),K(ec,y),K(ic,S),K(dc,C),K(hc,T),K(cc,O),K(ac,f),K(ir,m),K(lc,w),ct(R))if(R.length){const b=t.exposed||(t.exposed={});R.forEach(P=>{Object.defineProperty(b,P,{get:()=>i[P],set:F=>i[P]=F})})}else t.exposed||(t.exposed={});v&&t.render===$t&&(t.render=v),N!=null&&(t.inheritAttrs=N),G&&(t.components=G),D&&(t.directives=D),w&&Rs(t)}function pc(t,e,i=$t){ct(t)&&(t=or(t));for(const n in t){const s=t[n];let r;Ct(s)?"default"in s?r=pn(s.from||n,s.default,!0):r=pn(s.from||n):r=pn(s),At(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function Fs(t,e,i){Qt(ct(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function Ns(t,e,i,n){let s=n.includes(".")?Js(i,n):()=>i[n];if(Pt(t)){const r=e[t];ht(r)&&_e(s,r)}else if(ht(t))_e(s,t.bind(i));else if(Ct(t))if(ct(t))t.forEach(r=>Ns(r,e,i,n));else{const r=ht(t.handler)?t.handler.bind(i):e[t.handler];ht(r)&&_e(s,r,t)}}function ks(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!i&&!n?l=e:(l={},s.length&&s.forEach(h=>gn(l,h,o,!0)),gn(l,e,o)),Ct(e)&&r.set(e,l),l}function gn(t,e,i,n=!1){const{mixins:s,extends:r}=e;r&&gn(t,r,i,!0),s&&s.forEach(o=>gn(t,o,i,!0));for(const o in e)if(!(n&&o==="expose")){const a=_c[o]||i&&i[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const _c={data:Os,props:Is,emits:Is,methods:$e,computed:$e,beforeCreate:Dt,created:Dt,beforeMount:Dt,mounted:Dt,beforeUpdate:Dt,updated:Dt,beforeDestroy:Dt,beforeUnmount:Dt,destroyed:Dt,unmounted:Dt,activated:Dt,deactivated:Dt,errorCaptured:Dt,serverPrefetch:Dt,components:$e,directives:$e,watch:yc,provide:Os,inject:mc};function Os(t,e){return e?t?function(){return Tt(ht(t)?t.call(this,this):t,ht(e)?e.call(this,this):e)}:e:t}function mc(t,e){return $e(or(t),or(e))}function or(t){if(ct(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Dt(t,e){return t?[...new Set([].concat(t,e))]:e}function $e(t,e){return t?Tt(Object.create(null),t,e):e}function Is(t,e){return t?ct(t)&&ct(e)?[...new Set([...t,...e])]:Tt(Object.create(null),Ms(t),Ms(e??{})):e}function yc(t,e){if(!t)return e;if(!e)return t;const i=Tt(Object.create(null),t);for(const n in e)i[n]=Dt(t[n],e[n]);return i}function Ds(){return{app:null,config:{isNativeTag:tl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bc=0;function vc(t,e){return function(n,s=null){ht(n)||(n=Tt({},n)),s!=null&&!Ct(s)&&(s=null);const r=Ds(),o=new WeakSet,a=[];let l=!1;const h=r.app={_uid:bc++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:sh,get config(){return r.config},set config(d){},use(d,..._){return o.has(d)||(d&&ht(d.install)?(o.add(d),d.install(h,..._)):ht(d)&&(o.add(d),d(h,..._))),h},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),h},component(d,_){return _?(r.components[d]=_,h):r.components[d]},directive(d,_){return _?(r.directives[d]=_,h):r.directives[d]},mount(d,_,p){if(!l){const u=h._ceVNode||te(n,s);return u.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),t(u,d,p),l=!0,h._container=d,d.__vue_app__=h,Sn(u.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Qt(a,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,_){return r.provides[d]=_,h},runWithContext(d){const _=Oe;Oe=h;try{return d()}finally{Oe=_}}};return h}}let Oe=null;function Sc(t,e){if(Lt){let i=Lt.provides;const n=Lt.parent&&Lt.parent.provides;n===i&&(i=Lt.provides=Object.create(n)),i[t]=e}}function pn(t,e,i=!1){const n=Lt||zt;if(n||Oe){const s=Oe?Oe._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return i&&ht(e)?e.call(n&&n.proxy):e}}const Ls={},Gs=()=>Object.create(Ls),Us=t=>Object.getPrototypeOf(t)===Ls;function Cc(t,e,i,n=!1){const s={},r=Gs();t.propsDefaults=Object.create(null),Bs(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);i?t.props=n?s:Il(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function wc(t,e,i,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=_t(s),[l]=t.propsOptions;let h=!1;if((n||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let _=0;_<d.length;_++){let p=d[_];if(_n(t.emitsOptions,p))continue;const u=e[p];if(l)if(mt(r,p))u!==r[p]&&(r[p]=u,h=!0);else{const g=jt(p);s[g]=ar(l,a,g,u,t,!1)}else u!==r[p]&&(r[p]=u,h=!0)}}}else{Bs(t,e,s,r)&&(h=!0);let d;for(const _ in a)(!e||!mt(e,_)&&((d=Wt(_))===_||!mt(e,d)))&&(l?i&&(i[_]!==void 0||i[d]!==void 0)&&(s[_]=ar(l,a,_,void 0,t,!0)):delete s[_]);if(r!==a)for(const _ in r)(!e||!mt(e,_))&&(delete r[_],h=!0)}h&&se(t.attrs,"set","")}function Bs(t,e,i,n){const[s,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ue(l))continue;const h=e[l];let d;s&&mt(s,d=jt(l))?!r||!r.includes(d)?i[d]=h:(a||(a={}))[d]=h:_n(t.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,o=!0)}if(r){const l=_t(i),h=a||bt;for(let d=0;d<r.length;d++){const _=r[d];i[_]=ar(s,l,_,h[_],t,!mt(h,_))}}return o}function ar(t,e,i,n,s,r){const o=t[i];if(o!=null){const a=mt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ht(l)){const{propsDefaults:h}=s;if(i in h)n=h[i];else{const d=ti(s);n=h[i]=l.call(null,e),d()}}else n=l;s.ce&&s.ce._setProp(i,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===Wt(i))&&(n=!0))}return n}const xc=new WeakMap;function Vs(t,e,i=!1){const n=i?xc:e.propsCache,s=n.get(t);if(s)return s;const r=t.props,o={},a=[];let l=!1;if(!ht(t)){const d=_=>{l=!0;const[p,u]=Vs(_,e,!0);Tt(o,p),u&&a.push(...u)};!i&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!r&&!l)return Ct(t)&&n.set(t,Ee),Ee;if(ct(r))for(let d=0;d<r.length;d++){const _=jt(r[d]);Hs(_)&&(o[_]=bt)}else if(r)for(const d in r){const _=jt(d);if(Hs(_)){const p=r[d],u=o[_]=ct(p)||ht(p)?{type:p}:Tt({},p),g=u.type;let y=!1,S=!0;if(ct(g))for(let x=0;x<g.length;++x){const f=g[x],c=ht(f)&&f.name;if(c==="Boolean"){y=!0;break}else c==="String"&&(S=!1)}else y=ht(g)&&g.name==="Boolean";u[0]=y,u[1]=S,(y||mt(u,"default"))&&a.push(_)}}const h=[o,a];return Ct(t)&&n.set(t,h),h}function Hs(t){return t[0]!=="$"&&!Ue(t)}const qs=t=>t[0]==="_"||t==="$stable",lr=t=>ct(t)?t.map(ee):[ee(t)],Pc=(t,e,i)=>{if(e._n)return e;const n=Jl((...s)=>lr(e(...s)),i);return n._c=!1,n},Ws=(t,e,i)=>{const n=t._ctx;for(const s in t){if(qs(s))continue;const r=t[s];if(ht(r))e[s]=Pc(s,r,n);else if(r!=null){const o=lr(r);e[s]=()=>o}}},zs=(t,e)=>{const i=lr(e);t.slots.default=()=>i},Ks=(t,e,i)=>{for(const n in e)(i||n!=="_")&&(t[n]=e[n])},Rc=(t,e,i)=>{const n=t.slots=Gs();if(t.vnode.shapeFlag&32){const s=e._;s?(Ks(n,e,i),i&&Ur(n,"_",s,!0)):Ws(e,n)}else e&&zs(t,e)},Tc=(t,e,i)=>{const{vnode:n,slots:s}=t;let r=!0,o=bt;if(n.shapeFlag&32){const a=e._;a?i&&a===1?r=!1:Ks(s,e,i):(r=!e.$stable,Ws(e,s)),o=e}else e&&(zs(t,e),o={default:1});if(r)for(const a in s)!qs(a)&&o[a]==null&&delete s[a]},Ht=Vc;function Ec(t){return Ac(t)}function Ac(t,e){const i=qr();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:h,setElementText:d,parentNode:_,nextSibling:p,setScopeId:u=$t,insertStaticContent:g}=t,y=(E,k,V,z=null,Y=null,j=null,J=void 0,tt=null,Q=!!k.dynamicChildren)=>{if(E===k)return;E&&!Ze(E,k)&&(z=M(E),W(E,Y,j,!0),E=null),k.patchFlag===-2&&(Q=!1,k.dynamicChildren=null);const{type:$,ref:rt,shapeFlag:et}=k;switch($){case mn:S(E,k,V,z);break;case Pe:x(E,k,V,z);break;case hr:E==null&&f(k,V,z,J);break;case ce:G(E,k,V,z,Y,j,J,tt,Q);break;default:et&1?v(E,k,V,z,Y,j,J,tt,Q):et&6?D(E,k,V,z,Y,j,J,tt,Q):(et&64||et&128)&&$.process(E,k,V,z,Y,j,J,tt,Q,nt)}rt!=null&&Y&&er(rt,E&&E.ref,j,k||E,!k)},S=(E,k,V,z)=>{if(E==null)n(k.el=a(k.children),V,z);else{const Y=k.el=E.el;k.children!==E.children&&h(Y,k.children)}},x=(E,k,V,z)=>{E==null?n(k.el=l(k.children||""),V,z):k.el=E.el},f=(E,k,V,z)=>{[E.el,E.anchor]=g(E.children,k,V,z,E.el,E.anchor)},c=({el:E,anchor:k},V,z)=>{let Y;for(;E&&E!==k;)Y=p(E),n(E,V,z),E=Y;n(k,V,z)},m=({el:E,anchor:k})=>{let V;for(;E&&E!==k;)V=p(E),s(E),E=V;s(k)},v=(E,k,V,z,Y,j,J,tt,Q)=>{k.type==="svg"?J="svg":k.type==="math"&&(J="mathml"),E==null?T(k,V,z,Y,j,J,tt,Q):w(E,k,Y,j,J,tt,Q)},T=(E,k,V,z,Y,j,J,tt)=>{let Q,$;const{props:rt,shapeFlag:et,transition:st,dirs:at}=E;if(Q=E.el=o(E.type,j,rt&&rt.is,rt),et&8?d(Q,E.children):et&16&&C(E.children,Q,null,z,Y,cr(E,j),J,tt),at&&we(E,null,z,"created"),O(Q,E,E.scopeId,J,z),rt){for(const pt in rt)pt!=="value"&&!Ue(pt)&&r(Q,pt,null,rt[pt],j,z);"value"in rt&&r(Q,"value",null,rt.value,j),($=rt.onVnodeBeforeMount)&&ie($,z,E)}at&&we(E,null,z,"beforeMount");const lt=Mc(Y,st);lt&&st.beforeEnter(Q),n(Q,k,V),(($=rt&&rt.onVnodeMounted)||lt||at)&&Ht(()=>{$&&ie($,z,E),lt&&st.enter(Q),at&&we(E,null,z,"mounted")},Y)},O=(E,k,V,z,Y)=>{if(V&&u(E,V),z)for(let j=0;j<z.length;j++)u(E,z[j]);if(Y){let j=Y.subTree;if(k===j||eo(j.type)&&(j.ssContent===k||j.ssFallback===k)){const J=Y.vnode;O(E,J,J.scopeId,J.slotScopeIds,Y.parent)}}},C=(E,k,V,z,Y,j,J,tt,Q=0)=>{for(let $=Q;$<E.length;$++){const rt=E[$]=tt?me(E[$]):ee(E[$]);y(null,rt,k,V,z,Y,j,J,tt)}},w=(E,k,V,z,Y,j,J)=>{const tt=k.el=E.el;let{patchFlag:Q,dynamicChildren:$,dirs:rt}=k;Q|=E.patchFlag&16;const et=E.props||bt,st=k.props||bt;let at;if(V&&xe(V,!1),(at=st.onVnodeBeforeUpdate)&&ie(at,V,k,E),rt&&we(k,E,V,"beforeUpdate"),V&&xe(V,!0),(et.innerHTML&&st.innerHTML==null||et.textContent&&st.textContent==null)&&d(tt,""),$?R(E.dynamicChildren,$,tt,V,z,cr(k,Y),j):J||P(E,k,tt,null,V,z,cr(k,Y),j,!1),Q>0){if(Q&16)N(tt,et,st,V,Y);else if(Q&2&&et.class!==st.class&&r(tt,"class",null,st.class,Y),Q&4&&r(tt,"style",et.style,st.style,Y),Q&8){const lt=k.dynamicProps;for(let pt=0;pt<lt.length;pt++){const dt=lt[pt],wt=et[dt],yt=st[dt];(yt!==wt||dt==="value")&&r(tt,dt,wt,yt,Y,V)}}Q&1&&E.children!==k.children&&d(tt,k.children)}else!J&&$==null&&N(tt,et,st,V,Y);((at=st.onVnodeUpdated)||rt)&&Ht(()=>{at&&ie(at,V,k,E),rt&&we(k,E,V,"updated")},z)},R=(E,k,V,z,Y,j,J)=>{for(let tt=0;tt<k.length;tt++){const Q=E[tt],$=k[tt],rt=Q.el&&(Q.type===ce||!Ze(Q,$)||Q.shapeFlag&70)?_(Q.el):V;y(Q,$,rt,null,z,Y,j,J,!0)}},N=(E,k,V,z,Y)=>{if(k!==V){if(k!==bt)for(const j in k)!Ue(j)&&!(j in V)&&r(E,j,k[j],null,Y,z);for(const j in V){if(Ue(j))continue;const J=V[j],tt=k[j];J!==tt&&j!=="value"&&r(E,j,tt,J,Y,z)}"value"in V&&r(E,"value",k.value,V.value,Y)}},G=(E,k,V,z,Y,j,J,tt,Q)=>{const $=k.el=E?E.el:a(""),rt=k.anchor=E?E.anchor:a("");let{patchFlag:et,dynamicChildren:st,slotScopeIds:at}=k;at&&(tt=tt?tt.concat(at):at),E==null?(n($,V,z),n(rt,V,z),C(k.children||[],V,rt,Y,j,J,tt,Q)):et>0&&et&64&&st&&E.dynamicChildren?(R(E.dynamicChildren,st,V,Y,j,J,tt),(k.key!=null||Y&&k===Y.subTree)&&js(E,k,!0)):P(E,k,V,rt,Y,j,J,tt,Q)},D=(E,k,V,z,Y,j,J,tt,Q)=>{k.slotScopeIds=tt,E==null?k.shapeFlag&512?Y.ctx.activate(k,V,z,J,Q):U(k,V,z,Y,j,J,Q):L(E,k,Q)},U=(E,k,V,z,Y,j,J)=>{const tt=E.component=$c(E,z,Y);if(Ts(E)&&(tt.ctx.renderer=nt),Jc(tt,!1,J),tt.asyncDep){if(Y&&Y.registerDep(tt,K,J),!E.el){const Q=tt.subTree=te(Pe);x(null,Q,k,V)}}else K(tt,E,k,V,Y,j,J)},L=(E,k,V)=>{const z=k.component=E.component;if(Uc(E,k,V))if(z.asyncDep&&!z.asyncResolved){b(z,k,V);return}else z.next=k,z.update();else k.el=E.el,z.vnode=k},K=(E,k,V,z,Y,j,J)=>{const tt=()=>{if(E.isMounted){let{next:et,bu:st,u:at,parent:lt,vnode:pt}=E;{const kt=Ys(E);if(kt){et&&(et.el=pt.el,b(E,et,J)),kt.asyncDep.then(()=>{E.isUnmounted||tt()});return}}let dt=et,wt;xe(E,!1),et?(et.el=pt.el,b(E,et,J)):et=pt,st&&Xi(st),(wt=et.props&&et.props.onVnodeBeforeUpdate)&&ie(wt,lt,et,pt),xe(E,!0);const yt=Zs(E),St=E.subTree;E.subTree=yt,y(St,yt,_(St.el),M(St),E,Y,j),et.el=yt.el,dt===null&&Bc(E,yt.el),at&&Ht(at,Y),(wt=et.props&&et.props.onVnodeUpdated)&&Ht(()=>ie(wt,lt,et,pt),Y)}else{let et;const{el:st,props:at}=k,{bm:lt,m:pt,parent:dt,root:wt,type:yt}=E,St=Ye(k);xe(E,!1),lt&&Xi(lt),!St&&(et=at&&at.onVnodeBeforeMount)&&ie(et,dt,k),xe(E,!0);{wt.ce&&wt.ce._injectChildStyle(yt);const kt=E.subTree=Zs(E);y(null,kt,V,z,E,Y,j),k.el=kt.el}if(pt&&Ht(pt,Y),!St&&(et=at&&at.onVnodeMounted)){const kt=k;Ht(()=>ie(et,dt,kt),Y)}(k.shapeFlag&256||dt&&Ye(dt.vnode)&&dt.vnode.shapeFlag&256)&&E.a&&Ht(E.a,Y),E.isMounted=!0,k=V=z=null}};E.scope.on();const Q=E.effect=new jr(tt);E.scope.off();const $=E.update=Q.run.bind(Q),rt=E.job=Q.runIfDirty.bind(Q);rt.i=E,rt.id=E.uid,Q.scheduler=()=>Zn(rt),xe(E,!0),$()},b=(E,k,V)=>{k.component=E;const z=E.vnode.props;E.vnode=k,E.next=null,wc(E,k.props,z,V),Tc(E,k.children,V),ne(),Ss(E),re()},P=(E,k,V,z,Y,j,J,tt,Q=!1)=>{const $=E&&E.children,rt=E?E.shapeFlag:0,et=k.children,{patchFlag:st,shapeFlag:at}=k;if(st>0){if(st&128){A($,et,V,z,Y,j,J,tt,Q);return}else if(st&256){F($,et,V,z,Y,j,J,tt,Q);return}}at&8?(rt&16&&q($,Y,j),et!==$&&d(V,et)):rt&16?at&16?A($,et,V,z,Y,j,J,tt,Q):q($,Y,j,!0):(rt&8&&d(V,""),at&16&&C(et,V,z,Y,j,J,tt,Q))},F=(E,k,V,z,Y,j,J,tt,Q)=>{E=E||Ee,k=k||Ee;const $=E.length,rt=k.length,et=Math.min($,rt);let st;for(st=0;st<et;st++){const at=k[st]=Q?me(k[st]):ee(k[st]);y(E[st],at,V,null,Y,j,J,tt,Q)}$>rt?q(E,Y,j,!0,!1,et):C(k,V,z,Y,j,J,tt,Q,et)},A=(E,k,V,z,Y,j,J,tt,Q)=>{let $=0;const rt=k.length;let et=E.length-1,st=rt-1;for(;$<=et&&$<=st;){const at=E[$],lt=k[$]=Q?me(k[$]):ee(k[$]);if(Ze(at,lt))y(at,lt,V,null,Y,j,J,tt,Q);else break;$++}for(;$<=et&&$<=st;){const at=E[et],lt=k[st]=Q?me(k[st]):ee(k[st]);if(Ze(at,lt))y(at,lt,V,null,Y,j,J,tt,Q);else break;et--,st--}if($>et){if($<=st){const at=st+1,lt=at<rt?k[at].el:z;for(;$<=st;)y(null,k[$]=Q?me(k[$]):ee(k[$]),V,lt,Y,j,J,tt,Q),$++}}else if($>st)for(;$<=et;)W(E[$],Y,j,!0),$++;else{const at=$,lt=$,pt=new Map;for($=lt;$<=st;$++){const Gt=k[$]=Q?me(k[$]):ee(k[$]);Gt.key!=null&&pt.set(Gt.key,$)}let dt,wt=0;const yt=st-lt+1;let St=!1,kt=0;const be=new Array(yt);for($=0;$<yt;$++)be[$]=0;for($=at;$<=et;$++){const Gt=E[$];if(wt>=yt){W(Gt,Y,j,!0);continue}let Kt;if(Gt.key!=null)Kt=pt.get(Gt.key);else for(dt=lt;dt<=st;dt++)if(be[dt-lt]===0&&Ze(Gt,k[dt])){Kt=dt;break}Kt===void 0?W(Gt,Y,j,!0):(be[Kt-lt]=$+1,Kt>=kt?kt=Kt:St=!0,y(Gt,k[Kt],V,null,Y,j,J,tt,Q),wt++)}const Te=St?Fc(be):Ee;for(dt=Te.length-1,$=yt-1;$>=0;$--){const Gt=lt+$,Kt=k[Gt],Qa=Gt+1<rt?k[Gt+1].el:z;be[$]===0?y(null,Kt,V,Qa,Y,j,J,tt,Q):St&&(dt<0||$!==Te[dt]?I(Kt,V,Qa,2):dt--)}}},I=(E,k,V,z,Y=null)=>{const{el:j,type:J,transition:tt,children:Q,shapeFlag:$}=E;if($&6){I(E.component.subTree,k,V,z);return}if($&128){E.suspense.move(k,V,z);return}if($&64){J.move(E,k,V,nt);return}if(J===ce){n(j,k,V);for(let et=0;et<Q.length;et++)I(Q[et],k,V,z);n(E.anchor,k,V);return}if(J===hr){c(E,k,V);return}if(z!==2&&$&1&&tt)if(z===0)tt.beforeEnter(j),n(j,k,V),Ht(()=>tt.enter(j),Y);else{const{leave:et,delayLeave:st,afterLeave:at}=tt,lt=()=>n(j,k,V),pt=()=>{et(j,()=>{lt(),at&&at()})};st?st(j,lt,pt):pt()}else n(j,k,V)},W=(E,k,V,z=!1,Y=!1)=>{const{type:j,props:J,ref:tt,children:Q,dynamicChildren:$,shapeFlag:rt,patchFlag:et,dirs:st,cacheIndex:at}=E;if(et===-2&&(Y=!1),tt!=null&&er(tt,null,V,E,!0),at!=null&&(k.renderCache[at]=void 0),rt&256){k.ctx.deactivate(E);return}const lt=rt&1&&st,pt=!Ye(E);let dt;if(pt&&(dt=J&&J.onVnodeBeforeUnmount)&&ie(dt,k,E),rt&6)it(E.component,V,z);else{if(rt&128){E.suspense.unmount(V,z);return}lt&&we(E,null,k,"beforeUnmount"),rt&64?E.type.remove(E,k,V,nt,z):$&&!$.hasOnce&&(j!==ce||et>0&&et&64)?q($,k,V,!1,!0):(j===ce&&et&384||!Y&&rt&16)&&q(Q,k,V),z&&B(E)}(pt&&(dt=J&&J.onVnodeUnmounted)||lt)&&Ht(()=>{dt&&ie(dt,k,E),lt&&we(E,null,k,"unmounted")},V)},B=E=>{const{type:k,el:V,anchor:z,transition:Y}=E;if(k===ce){X(V,z);return}if(k===hr){m(E);return}const j=()=>{s(V),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(E.shapeFlag&1&&Y&&!Y.persisted){const{leave:J,delayLeave:tt}=Y,Q=()=>J(V,j);tt?tt(E.el,j,Q):Q()}else j()},X=(E,k)=>{let V;for(;E!==k;)V=p(E),s(E),E=V;s(k)},it=(E,k,V)=>{const{bum:z,scope:Y,job:j,subTree:J,um:tt,m:Q,a:$}=E;Xs(Q),Xs($),z&&Xi(z),Y.stop(),j&&(j.flags|=8,W(J,E,k,V)),tt&&Ht(tt,k),Ht(()=>{E.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},q=(E,k,V,z=!1,Y=!1,j=0)=>{for(let J=j;J<E.length;J++)W(E[J],k,V,z,Y)},M=E=>{if(E.shapeFlag&6)return M(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const k=p(E.anchor||E.el),V=k&&k[Zl];return V?p(V):k};let H=!1;const Z=(E,k,V)=>{E==null?k._vnode&&W(k._vnode,null,null,!0):y(k._vnode||null,E,k,null,null,null,V),k._vnode=E,H||(H=!0,Ss(),Cs(),H=!1)},nt={p:y,um:W,m:I,r:B,mt:U,mc:C,pc:P,pbc:R,n:M,o:t};return{render:Z,hydrate:void 0,createApp:vc(Z)}}function cr({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function xe({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Mc(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function js(t,e,i=!1){const n=t.children,s=e.children;if(ct(n)&&ct(s))for(let r=0;r<n.length;r++){const o=n[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=me(s[r]),a.el=o.el),!i&&a.patchFlag!==-2&&js(o,a)),a.type===mn&&(a.el=o.el)}}function Fc(t){const e=t.slice(),i=[0];let n,s,r,o,a;const l=t.length;for(n=0;n<l;n++){const h=t[n];if(h!==0){if(s=i[i.length-1],t[s]<h){e[n]=s,i.push(n);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,t[i[a]]<h?r=a+1:o=a;h<t[i[r]]&&(r>0&&(e[n]=i[r-1]),i[r]=n)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=e[o];return i}function Ys(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ys(e)}function Xs(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Nc=Symbol.for("v-scx"),kc=()=>pn(Nc);function _e(t,e,i){return $s(t,e,i)}function $s(t,e,i=bt){const{immediate:n,deep:s,flush:r,once:o}=i,a=Tt({},i);let l;if(vn)if(r==="sync"){const p=kc();l=p.__watcherHandles||(p.__watcherHandles=[])}else if(!e||n)a.once=!0;else{const p=()=>{};return p.stop=$t,p.resume=$t,p.pause=$t,p}const h=Lt;a.call=(p,u,g)=>Qt(p,h,u,g);let d=!1;r==="post"?a.scheduler=p=>{Ht(p,h&&h.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(p,u)=>{u?p():Zn(p)}),a.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,h&&(p.id=h.uid,p.i=h))};const _=ql(t,e,a);return l&&l.push(_),_}function Oc(t,e,i){const n=this.proxy,s=Pt(t)?t.includes(".")?Js(n,t):()=>n[t]:t.bind(n,n);let r;ht(e)?r=e:(r=e.handler,i=e);const o=ti(this),a=$s(s,r.bind(n),i);return o(),a}function Js(t,e){const i=e.split(".");return()=>{let n=t;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}const Ic=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${jt(e)}Modifiers`]||t[`${Wt(e)}Modifiers`];function Dc(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||bt;let s=i;const r=e.startsWith("update:"),o=r&&Ic(n,e.slice(7));o&&(o.trim&&(s=i.map(d=>Pt(d)?d.trim():d)),o.number&&(s=i.map(Br)));let a,l=n[a=Nn(e)]||n[a=Nn(jt(e))];!l&&r&&(l=n[a=Nn(Wt(e))]),l&&Qt(l,t,6,s);const h=n[a+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Qt(h,t,6,s)}}function Qs(t,e,i=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!ht(t)){const l=h=>{const d=Qs(h,e,!0);d&&(a=!0,Tt(o,d))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(Ct(t)&&n.set(t,null),null):(ct(r)?r.forEach(l=>o[l]=null):Tt(o,r),Ct(t)&&n.set(t,o),o)}function _n(t,e){return!t||!zi(e)?!1:(e=e.slice(2).replace(/Once$/,""),mt(t,e[0].toLowerCase()+e.slice(1))||mt(t,Wt(e))||mt(t,e))}function tu(){}function Zs(t){const{type:e,vnode:i,proxy:n,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:h,renderCache:d,props:_,data:p,setupState:u,ctx:g,inheritAttrs:y}=t,S=un(t);let x,f;try{if(i.shapeFlag&4){const m=s||n,v=m;x=ee(h.call(v,m,d,_,u,p,g)),f=a}else{const m=e;x=ee(m.length>1?m(_,{attrs:a,slots:o,emit:l}):m(_,null)),f=e.props?a:Lc(a)}}catch(m){Je.length=0,hn(m,t,1),x=te(Pe)}let c=x;if(f&&y!==!1){const m=Object.keys(f),{shapeFlag:v}=c;m.length&&v&7&&(r&&m.some(An)&&(f=Gc(f,r)),c=Ie(c,f,!1,!0))}return i.dirs&&(c=Ie(c,null,!1,!0),c.dirs=c.dirs?c.dirs.concat(i.dirs):i.dirs),i.transition&&tr(c,i.transition),x=c,un(S),x}const Lc=t=>{let e;for(const i in t)(i==="class"||i==="style"||zi(i))&&((e||(e={}))[i]=t[i]);return e},Gc=(t,e)=>{const i={};for(const n in t)(!An(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function Uc(t,e,i){const{props:n,children:s,component:r}=t,{props:o,children:a,patchFlag:l}=e,h=r.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?to(n,o,h):!!o;if(l&8){const d=e.dynamicProps;for(let _=0;_<d.length;_++){const p=d[_];if(o[p]!==n[p]&&!_n(h,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?to(n,o,h):!0:!!o;return!1}function to(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(e[r]!==t[r]&&!_n(i,r))return!0}return!1}function Bc({vnode:t,parent:e},i){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=i,e=e.parent;else break}}const eo=t=>t.__isSuspense;function Vc(t,e){e&&e.pendingBranch?ct(t)?e.effects.push(...t):e.effects.push(t):$l(t)}const ce=Symbol.for("v-fgt"),mn=Symbol.for("v-txt"),Pe=Symbol.for("v-cmt"),hr=Symbol.for("v-stc"),Je=[];let qt=null;function dr(t=!1){Je.push(qt=t?null:[])}function Hc(){Je.pop(),qt=Je[Je.length-1]||null}let Qe=1;function io(t){Qe+=t,t<0&&qt&&(qt.hasOnce=!0)}function no(t){return t.dynamicChildren=Qe>0?qt||Ee:null,Hc(),Qe>0&&qt&&qt.push(t),t}function ro(t,e,i,n,s,r){return no(Ft(t,e,i,n,s,r,!0))}function qc(t,e,i,n,s){return no(te(t,e,i,n,s,!0))}function so(t){return t?t.__v_isVNode===!0:!1}function Ze(t,e){return t.type===e.type&&t.key===e.key}const oo=({key:t})=>t??null,yn=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Pt(t)||At(t)||ht(t)?{i:zt,r:t,k:e,f:!!i}:t:null);function Ft(t,e=null,i=null,n=0,s=null,r=t===ce?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&oo(e),ref:e&&yn(e),scopeId:xs,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:zt};return a?(ur(l,i),r&128&&t.normalize(l)):i&&(l.shapeFlag|=Pt(i)?8:16),Qe>0&&!o&&qt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&qt.push(l),l}const te=Wc;function Wc(t,e=null,i=null,n=0,s=null,r=!1){if((!t||t===uc)&&(t=Pe),so(t)){const a=Ie(t,e,!0);return i&&ur(a,i),Qe>0&&!r&&qt&&(a.shapeFlag&6?qt[qt.indexOf(t)]=a:qt.push(a)),a.patchFlag=-2,a}if(rh(t)&&(t=t.__vccOpts),e){e=zc(e);let{class:a,style:l}=e;a&&!Pt(a)&&(e.class=$i(a)),Ct(l)&&(Xn(l)&&!ct(l)&&(l=Tt({},l)),e.style=kn(l))}const o=Pt(t)?1:eo(t)?128:tc(t)?64:Ct(t)?4:ht(t)?2:0;return Ft(t,e,i,n,s,o,r,!0)}function zc(t){return t?Xn(t)||Us(t)?Tt({},t):t:null}function Ie(t,e,i=!1,n=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=t,h=e?jc(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&oo(h),ref:e&&e.ref?i&&r?ct(r)?r.concat(yn(e)):[r,yn(e)]:yn(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ce?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ie(t.ssContent),ssFallback:t.ssFallback&&Ie(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&tr(d,l.clone(d)),d}function ao(t=" ",e=0){return te(mn,null,t,e)}function Kc(t="",e=!1){return e?(dr(),qc(Pe,null,t)):te(Pe,null,t)}function ee(t){return t==null||typeof t=="boolean"?te(Pe):ct(t)?te(ce,null,t.slice()):so(t)?me(t):te(mn,null,String(t))}function me(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ie(t)}function ur(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ct(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),ur(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!Us(e)?e._ctx=zt:s===3&&zt&&(zt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ht(e)?(e={default:e,_ctx:zt},i=32):(e=String(e),n&64?(i=16,e=[ao(e)]):i=8);t.children=e,t.shapeFlag|=i}function jc(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=$i([e.class,n.class]));else if(s==="style")e.style=kn([e.style,n.style]);else if(zi(s)){const r=e[s],o=n[s];o&&r!==o&&!(ct(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=n[s])}return e}function ie(t,e,i,n=null){Qt(t,e,7,[i,n])}const Yc=Ds();let Xc=0;function $c(t,e,i){const n=t.type,s=(e?e.appContext:t.appContext)||Yc,r={uid:Xc++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ul(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vs(n,s),emitsOptions:Qs(n,s),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:n.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Dc.bind(null,r),t.ce&&t.ce(r),r}let Lt=null,bn,fr;{const t=qr(),e=(i,n)=>{let s;return(s=t[i])||(s=t[i]=[]),s.push(n),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};bn=e("__VUE_INSTANCE_SETTERS__",i=>Lt=i),fr=e("__VUE_SSR_SETTERS__",i=>vn=i)}const ti=t=>{const e=Lt;return bn(t),t.scope.on(),()=>{t.scope.off(),bn(e)}},lo=()=>{Lt&&Lt.scope.off(),bn(null)};function co(t){return t.vnode.shapeFlag&4}let vn=!1;function Jc(t,e=!1,i=!1){e&&fr(e);const{props:n,children:s}=t.vnode,r=co(t);Cc(t,n,r,e),Rc(t,s,i);const o=r?Qc(t,e):void 0;return e&&fr(!1),o}function Qc(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,fc);const{setup:n}=i;if(n){const s=t.setupContext=n.length>1?th(t):null,r=ti(t);ne();const o=Fe(n,t,0,[t.props,s]);if(re(),r(),Dr(o)){if(Ye(t)||Rs(t),o.then(lo,lo),e)return o.then(a=>{ho(t,a)}).catch(a=>{hn(a,t,0)});t.asyncDep=o}else ho(t,o)}else uo(t)}function ho(t,e,i){ht(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ct(e)&&(t.setupState=ms(e)),uo(t)}function uo(t,e,i){const n=t.type;t.render||(t.render=n.render||$t);{const s=ti(t);ne();try{gc(t)}finally{re(),s()}}}const Zc={get(t,e){return Mt(t,"get",""),t[e]}};function th(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,Zc),slots:t.slots,emit:t.emit,expose:e}}function Sn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ms(Dl(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Xe)return Xe[i](t)},has(e,i){return i in e||i in Xe}})):t.proxy}const eh=/(?:^|[-_])(\w)/g,ih=t=>t.replace(eh,e=>e.toUpperCase()).replace(/[-_]/g,"");function nh(t,e=!0){return ht(t)?t.displayName||t.name:t.name||e&&t.__name}function fo(t,e,i=!1){let n=nh(e);if(!n&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(n=s[1])}if(!n&&t&&t.parent){const s=r=>{for(const o in r)if(r[o]===e)return o};n=s(t.components||t.parent.type.components)||s(t.appContext.components)}return n?ih(n):i?"App":"Anonymous"}function rh(t){return ht(t)&&"__vccOpts"in t}const ei=(t,e)=>Vl(t,e,vn),sh="3.5.11";/**
* @vue/runtime-dom v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let gr;const go=typeof window<"u"&&window.trustedTypes;if(go)try{gr=go.createPolicy("vue",{createHTML:t=>t})}catch{}const po=gr?t=>gr.createHTML(t):t=>t,oh="http://www.w3.org/2000/svg",ah="http://www.w3.org/1998/Math/MathML",he=typeof document<"u"?document:null,_o=he&&he.createElement("template"),lh={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const s=e==="svg"?he.createElementNS(oh,t):e==="mathml"?he.createElementNS(ah,t):i?he.createElement(t,{is:i}):he.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>he.createTextNode(t),createComment:t=>he.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>he.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,s,r){const o=i?i.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{_o.innerHTML=po(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=_o.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},ch=Symbol("_vtc");function hh(t,e,i){const n=t[ch];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const mo=Symbol("_vod"),dh=Symbol("_vsh"),uh=Symbol(""),fh=/(^|;)\s*display\s*:/;function gh(t,e,i){const n=t.style,s=Pt(i);let r=!1;if(i&&!s){if(e)if(Pt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&Cn(n,a,"")}else for(const o in e)i[o]==null&&Cn(n,o,"");for(const o in i)o==="display"&&(r=!0),Cn(n,o,i[o])}else if(s){if(e!==i){const o=n[uh];o&&(i+=";"+o),n.cssText=i,r=fh.test(i)}}else e&&t.removeAttribute("style");mo in t&&(t[mo]=r?n.display:"",t[dh]&&(n.display="none"))}const yo=/\s*!important$/;function Cn(t,e,i){if(ct(i))i.forEach(n=>Cn(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=ph(t,e);yo.test(i)?t.setProperty(Wt(n),i.replace(yo,""),"important"):t[n]=i}}const bo=["Webkit","Moz","ms"],pr={};function ph(t,e){const i=pr[e];if(i)return i;let n=jt(e);if(n!=="filter"&&n in t)return pr[e]=n;n=Gr(n);for(let s=0;s<bo.length;s++){const r=bo[s]+n;if(r in t)return pr[e]=r}return e}const vo="http://www.w3.org/1999/xlink";function So(t,e,i,n,s,r=cl(e)){n&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(vo,e.slice(6,e.length)):t.setAttributeNS(vo,e,i):i==null||r&&!Wr(i)?t.removeAttribute(e):t.setAttribute(e,r?"":Jt(i)?String(i):i)}function Co(t,e,i,n){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?po(i):i);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,a=i==null?t.type==="checkbox"?"on":"":String(i);(o!==a||!("_value"in t))&&(t.value=a),i==null&&t.removeAttribute(e),t._value=i;return}let r=!1;if(i===""||i==null){const o=typeof t[e];o==="boolean"?i=Wr(i):i==null&&o==="string"?(i="",r=!0):o==="number"&&(i=0,r=!0)}try{t[e]=i}catch{}r&&t.removeAttribute(e)}function wo(t,e,i,n){t.addEventListener(e,i,n)}function _h(t,e,i,n){t.removeEventListener(e,i,n)}const xo=Symbol("_vei");function mh(t,e,i,n,s=null){const r=t[xo]||(t[xo]={}),o=r[e];if(n&&o)o.value=n;else{const[a,l]=yh(e);if(n){const h=r[e]=Sh(n,s);wo(t,a,h,l)}else o&&(_h(t,a,o,l),r[e]=void 0)}}const Po=/(?:Once|Passive|Capture)$/;function yh(t){let e;if(Po.test(t)){e={};let n;for(;n=t.match(Po);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Wt(t.slice(2)),e]}let _r=0;const bh=Promise.resolve(),vh=()=>_r||(bh.then(()=>_r=0),_r=Date.now());function Sh(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;Qt(Ch(n,i.value),e,5,[n])};return i.value=t,i.attached=vh(),i}function Ch(t,e){if(ct(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Ro=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,wh=(t,e,i,n,s,r)=>{const o=s==="svg";e==="class"?hh(t,n,o):e==="style"?gh(t,i,n):zi(e)?An(e)||mh(t,e,i,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):xh(t,e,n,o))?(Co(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&So(t,e,n,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Pt(n))?Co(t,jt(e),n):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),So(t,e,n,o))};function xh(t,e,i,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ro(e)&&ht(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ro(e)&&Pt(i)?!1:e in t}const To={};/*! #__NO_SIDE_EFFECTS__ */function Ph(t,e,i){const n=Ps(t,e);ji(n)&&Tt(n,e);class s extends mr{constructor(o){super(n,o,i)}}return s.def=n,s}const Rh=typeof HTMLElement<"u"?HTMLElement:class{};class mr extends Rh{constructor(e,i={},n=No){super(),this._def=e,this._props=i,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==No?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof mr){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,Qn(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:r,styles:o}=n;let a;if(r&&!ct(r))for(const l in r){const h=r[l];(h===Number||h&&h.type===Number)&&(l in this._props&&(this._props[l]=Vr(this._props[l])),(a||(a=Object.create(null)))[jt(l)]=!0)}this._numberProps=a,s&&this._resolveProps(n),this.shadowRoot&&this._applyStyles(o),this._mount(n)},i=this._def.__asyncLoader;i?this._pendingResolve=i().then(n=>e(this._def=n,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const i=this._instance&&this._instance.exposed;if(i)for(const n in i)mt(this,n)||Object.defineProperty(this,n,{get:()=>_s(i[n])})}_resolveProps(e){const{props:i}=e,n=ct(i)?i:Object.keys(i||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(jt))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(r){this._setProp(s,r,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const i=this.hasAttribute(e);let n=i?this.getAttribute(e):To;const s=jt(e);i&&this._numberProps&&this._numberProps[s]&&(n=Vr(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,i,n=!0,s=!1){i!==this._props[e]&&(i===To?delete this._props[e]:(this._props[e]=i,e==="key"&&this._app&&(this._app._ceVNode.key=i)),s&&this._instance&&this._update(),n&&(i===!0?this.setAttribute(Wt(e),""):typeof i=="string"||typeof i=="number"?this.setAttribute(Wt(e),i+""):i||this.removeAttribute(Wt(e))))}_update(){Ah(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const i=te(this._def,Tt(e,this._props));return this._instance||(i.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(r,o)=>{this.dispatchEvent(new CustomEvent(r,ji(o[0])?Tt({detail:o},o[0]):{detail:o}))};n.emit=(r,...o)=>{s(r,o),Wt(r)!==r&&s(Wt(r),o)},this._setParent()}),i}_applyStyles(e,i){if(!e)return;if(i){if(i===this._def||this._styleChildren.has(i))return;this._styleChildren.add(i)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const r=document.createElement("style");n&&r.setAttribute("nonce",n),r.textContent=e[s],this.shadowRoot.prepend(r)}}_parseSlots(){const e=this._slots={};let i;for(;i=this.firstChild;){const n=i.nodeType===1&&i.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(i),this.removeChild(i)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),i=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],r=s.getAttribute("name")||"default",o=this._slots[r],a=s.parentNode;if(o)for(const l of o){if(i&&l.nodeType===1){const h=i+"-s",d=document.createTreeWalker(l,1);l.setAttribute(h,"");let _;for(;_=d.nextNode();)_.setAttribute(h,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}const Eo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ct(e)?i=>Xi(e,i):e},yr=Symbol("_assign"),Th={deep:!0,created(t,{value:e,modifiers:{number:i}},n){const s=Ki(e);wo(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?Br(wn(o)):wn(o));t[yr](t.multiple?s?new Set(r):r:r[0]),t._assigning=!0,Qn(()=>{t._assigning=!1})}),t[yr]=Eo(n)},mounted(t,{value:e}){Ao(t,e)},beforeUpdate(t,e,i){t[yr]=Eo(i)},updated(t,{value:e}){t._assigning||Ao(t,e)}};function Ao(t,e){const i=t.multiple,n=ct(e);if(!(i&&!n&&!Ki(e))){for(let s=0,r=t.options.length;s<r;s++){const o=t.options[s],a=wn(o);if(i)if(n){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(h=>String(h)===String(a)):o.selected=dl(e,a)>-1}else o.selected=e.has(a);else if(Ji(wn(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function wn(t){return"_value"in t?t._value:t.value}const Eh=Tt({patchProp:wh},lh);let Mo;function Fo(){return Mo||(Mo=Ec(Eh))}const Ah=(...t)=>{Fo().render(...t)},No=(...t)=>{const e=Fo().createApp(...t),{mount:i}=e;return e.mount=n=>{const s=Fh(n);if(!s)return;const r=e._component;!ht(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=i(s,!1,Mh(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Mh(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Fh(t){return Pt(t)?document.querySelector(t):t}var ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xn={exports:{}},ii={},br={},vr={},Oo;function ut(){return Oo||(Oo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof ko<"u"?ko:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.21",isBrowser:i(),isUnminified:/param/.test(function(s){}.toString()),dblClickWindow:400,getAngle(s){return t.Konva.angleDeg?s*e:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var s;return(s=t.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(s){t.glob.Konva=s}};const n=s=>{t.Konva[s.prototype.getClassName()]=s};t._registerNode=n,t.Konva._injectGlobal(t.Konva)}(vr)),vr}var Sr={},Io;function xt(){return Io||(Io=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=ut();class i{constructor(m=[1,0,0,1,0,0]){this.dirty=!1,this.m=m&&m.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(m){m.m[0]=this.m[0],m.m[1]=this.m[1],m.m[2]=this.m[2],m.m[3]=this.m[3],m.m[4]=this.m[4],m.m[5]=this.m[5]}point(m){const v=this.m;return{x:v[0]*m.x+v[2]*m.y+v[4],y:v[1]*m.x+v[3]*m.y+v[5]}}translate(m,v){return this.m[4]+=this.m[0]*m+this.m[2]*v,this.m[5]+=this.m[1]*m+this.m[3]*v,this}scale(m,v){return this.m[0]*=m,this.m[1]*=m,this.m[2]*=v,this.m[3]*=v,this}rotate(m){const v=Math.cos(m),T=Math.sin(m),O=this.m[0]*v+this.m[2]*T,C=this.m[1]*v+this.m[3]*T,w=this.m[0]*-T+this.m[2]*v,R=this.m[1]*-T+this.m[3]*v;return this.m[0]=O,this.m[1]=C,this.m[2]=w,this.m[3]=R,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(m,v){const T=this.m[0]+this.m[2]*v,O=this.m[1]+this.m[3]*v,C=this.m[2]+this.m[0]*m,w=this.m[3]+this.m[1]*m;return this.m[0]=T,this.m[1]=O,this.m[2]=C,this.m[3]=w,this}multiply(m){const v=this.m[0]*m.m[0]+this.m[2]*m.m[1],T=this.m[1]*m.m[0]+this.m[3]*m.m[1],O=this.m[0]*m.m[2]+this.m[2]*m.m[3],C=this.m[1]*m.m[2]+this.m[3]*m.m[3],w=this.m[0]*m.m[4]+this.m[2]*m.m[5]+this.m[4],R=this.m[1]*m.m[4]+this.m[3]*m.m[5]+this.m[5];return this.m[0]=v,this.m[1]=T,this.m[2]=O,this.m[3]=C,this.m[4]=w,this.m[5]=R,this}invert(){const m=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),v=this.m[3]*m,T=-this.m[1]*m,O=-this.m[2]*m,C=this.m[0]*m,w=m*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),R=m*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=v,this.m[1]=T,this.m[2]=O,this.m[3]=C,this.m[4]=w,this.m[5]=R,this}getMatrix(){return this.m}decompose(){const m=this.m[0],v=this.m[1],T=this.m[2],O=this.m[3],C=this.m[4],w=this.m[5],R=m*O-v*T,N={x:C,y:w,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(m!=0||v!=0){const G=Math.sqrt(m*m+v*v);N.rotation=v>0?Math.acos(m/G):-Math.acos(m/G),N.scaleX=G,N.scaleY=R/G,N.skewX=(m*T+v*O)/R,N.skewY=0}else if(T!=0||O!=0){const G=Math.sqrt(T*T+O*O);N.rotation=Math.PI/2-(O>0?Math.acos(-T/G):-Math.acos(T/G)),N.scaleX=R/G,N.scaleY=G,N.skewX=0,N.skewY=(m*T+v*O)/R}return N.rotation=t.Util._getRotation(N.rotation),N}}t.Transform=i;const n="[object Array]",s="[object Number]",r="[object String]",o="[object Boolean]",a=Math.PI/180,l=180/Math.PI,h="#",d="",_="0",p="Konva warning: ",u="Konva error: ",g="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let x=[];const f=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(c){setTimeout(c,60)};t.Util={_isElement(c){return!!(c&&c.nodeType==1)},_isFunction(c){return!!(c&&c.constructor&&c.call&&c.apply)},_isPlainObject(c){return!!c&&c.constructor===Object},_isArray(c){return Object.prototype.toString.call(c)===n},_isNumber(c){return Object.prototype.toString.call(c)===s&&!isNaN(c)&&isFinite(c)},_isString(c){return Object.prototype.toString.call(c)===r},_isBoolean(c){return Object.prototype.toString.call(c)===o},isObject(c){return c instanceof Object},isValidSelector(c){if(typeof c!="string")return!1;const m=c[0];return m==="#"||m==="."||m===m.toUpperCase()},_sign(c){return c===0||c>0?1:-1},requestAnimFrame(c){x.push(c),x.length===1&&f(function(){const m=x;x=[],m.forEach(function(v){v()})})},createCanvasElement(){const c=document.createElement("canvas");try{c.style=c.style||{}}catch{}return c},createImageElement(){return document.createElement("img")},_isInDocument(c){for(;c=c.parentNode;)if(c==document)return!0;return!1},_urlToImage(c,m){const v=t.Util.createImageElement();v.onload=function(){m(v)},v.src=c},_rgbToHex(c,m,v){return(16777216+(c<<16)+(m<<8)+v).toString(16).slice(1)},_hexToRgb(c){c=c.replace(h,d);const m=parseInt(c,16);return{r:m>>16&255,g:m>>8&255,b:m&255}},getRandomColor(){let c=(Math.random()*16777215<<0).toString(16);for(;c.length<6;)c=_+c;return h+c},getRGB(c){let m;return c in y?(m=y[c],{r:m[0],g:m[1],b:m[2]}):c[0]===h?this._hexToRgb(c.substring(1)):c.substr(0,4)===g?(m=S.exec(c.replace(/ /g,"")),{r:parseInt(m[1],10),g:parseInt(m[2],10),b:parseInt(m[3],10)}):{r:0,g:0,b:0}},colorToRGBA(c){return c=c||"black",t.Util._namedColorToRBA(c)||t.Util._hex3ColorToRGBA(c)||t.Util._hex4ColorToRGBA(c)||t.Util._hex6ColorToRGBA(c)||t.Util._hex8ColorToRGBA(c)||t.Util._rgbColorToRGBA(c)||t.Util._rgbaColorToRGBA(c)||t.Util._hslColorToRGBA(c)},_namedColorToRBA(c){const m=y[c.toLowerCase()];return m?{r:m[0],g:m[1],b:m[2],a:1}:null},_rgbColorToRGBA(c){if(c.indexOf("rgb(")===0){c=c.match(/rgb\(([^)]+)\)/)[1];const m=c.split(/ *, */).map(Number);return{r:m[0],g:m[1],b:m[2],a:1}}},_rgbaColorToRGBA(c){if(c.indexOf("rgba(")===0){c=c.match(/rgba\(([^)]+)\)/)[1];const m=c.split(/ *, */).map((v,T)=>v.slice(-1)==="%"?T===3?parseInt(v)/100:parseInt(v)/100*255:Number(v));return{r:m[0],g:m[1],b:m[2],a:m[3]}}},_hex8ColorToRGBA(c){if(c[0]==="#"&&c.length===9)return{r:parseInt(c.slice(1,3),16),g:parseInt(c.slice(3,5),16),b:parseInt(c.slice(5,7),16),a:parseInt(c.slice(7,9),16)/255}},_hex6ColorToRGBA(c){if(c[0]==="#"&&c.length===7)return{r:parseInt(c.slice(1,3),16),g:parseInt(c.slice(3,5),16),b:parseInt(c.slice(5,7),16),a:1}},_hex4ColorToRGBA(c){if(c[0]==="#"&&c.length===5)return{r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:parseInt(c[4]+c[4],16)/255}},_hex3ColorToRGBA(c){if(c[0]==="#"&&c.length===4)return{r:parseInt(c[1]+c[1],16),g:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:1}},_hslColorToRGBA(c){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(c)){const[m,...v]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(c),T=Number(v[0])/360,O=Number(v[1])/100,C=Number(v[2])/100;let w,R,N;if(O===0)return N=C*255,{r:Math.round(N),g:Math.round(N),b:Math.round(N),a:1};C<.5?w=C*(1+O):w=C+O-C*O;const G=2*C-w,D=[0,0,0];for(let U=0;U<3;U++)R=T+.3333333333333333*-(U-1),R<0&&R++,R>1&&R--,6*R<1?N=G+(w-G)*6*R:2*R<1?N=w:3*R<2?N=G+(w-G)*(.6666666666666666-R)*6:N=G,D[U]=N*255;return{r:Math.round(D[0]),g:Math.round(D[1]),b:Math.round(D[2]),a:1}}},haveIntersection(c,m){return!(m.x>c.x+c.width||m.x+m.width<c.x||m.y>c.y+c.height||m.y+m.height<c.y)},cloneObject(c){const m={};for(const v in c)this._isPlainObject(c[v])?m[v]=this.cloneObject(c[v]):this._isArray(c[v])?m[v]=this.cloneArray(c[v]):m[v]=c[v];return m},cloneArray(c){return c.slice(0)},degToRad(c){return c*a},radToDeg(c){return c*l},_degToRad(c){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(c)},_radToDeg(c){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(c)},_getRotation(c){return e.Konva.angleDeg?t.Util.radToDeg(c):c},_capitalize(c){return c.charAt(0).toUpperCase()+c.slice(1)},throw(c){throw new Error(u+c)},error(c){console.error(u+c)},warn(c){e.Konva.showWarnings&&console.warn(p+c)},each(c,m){for(const v in c)m(v,c[v])},_inRange(c,m,v){return m<=c&&c<v},_getProjectionToSegment(c,m,v,T,O,C){let w,R,N;const G=(c-v)*(c-v)+(m-T)*(m-T);if(G==0)w=c,R=m,N=(O-v)*(O-v)+(C-T)*(C-T);else{const D=((O-c)*(v-c)+(C-m)*(T-m))/G;D<0?(w=c,R=m,N=(c-O)*(c-O)+(m-C)*(m-C)):D>1?(w=v,R=T,N=(v-O)*(v-O)+(T-C)*(T-C)):(w=c+D*(v-c),R=m+D*(T-m),N=(w-O)*(w-O)+(R-C)*(R-C))}return[w,R,N]},_getProjectionToLine(c,m,v){const T=t.Util.cloneObject(c);let O=Number.MAX_VALUE;return m.forEach(function(C,w){if(!v&&w===m.length-1)return;const R=m[(w+1)%m.length],N=t.Util._getProjectionToSegment(C.x,C.y,R.x,R.y,c.x,c.y),G=N[0],D=N[1],U=N[2];U<O&&(T.x=G,T.y=D,O=U)}),T},_prepareArrayForTween(c,m,v){const T=[],O=[];if(c.length>m.length){const w=m;m=c,c=w}for(let w=0;w<c.length;w+=2)T.push({x:c[w],y:c[w+1]});for(let w=0;w<m.length;w+=2)O.push({x:m[w],y:m[w+1]});const C=[];return O.forEach(function(w){const R=t.Util._getProjectionToLine(w,T,v);C.push(R.x),C.push(R.y)}),C},_prepareToStringify(c){let m;c.visitedByCircularReferenceRemoval=!0;for(const v in c)if(c.hasOwnProperty(v)&&c[v]&&typeof c[v]=="object"){if(m=Object.getOwnPropertyDescriptor(c,v),c[v].visitedByCircularReferenceRemoval||t.Util._isElement(c[v]))if(m.configurable)delete c[v];else return null;else if(t.Util._prepareToStringify(c[v])===null)if(m.configurable)delete c[v];else return null}return delete c.visitedByCircularReferenceRemoval,c},_assign(c,m){for(const v in m)c[v]=m[v];return c},_getFirstPointerId(c){return c.touches?c.changedTouches[0].identifier:c.pointerId||999},releaseCanvas(...c){e.Konva.releaseCanvasOnDestroy&&c.forEach(m=>{m.width=0,m.height=0})},drawRoundedRectPath(c,m,v,T){let O=0,C=0,w=0,R=0;typeof T=="number"?O=C=w=R=Math.min(T,m/2,v/2):(O=Math.min(T[0]||0,m/2,v/2),C=Math.min(T[1]||0,m/2,v/2),R=Math.min(T[2]||0,m/2,v/2),w=Math.min(T[3]||0,m/2,v/2)),c.moveTo(O,0),c.lineTo(m-C,0),c.arc(m-C,C,C,Math.PI*3/2,0,!1),c.lineTo(m,v-R),c.arc(m-R,v-R,R,0,Math.PI/2,!1),c.lineTo(w,v),c.arc(w,v-w,w,Math.PI/2,Math.PI,!1),c.lineTo(0,O),c.arc(O,O,O,Math.PI,Math.PI*3/2,!1)}}}(Sr)),Sr}var ni={},de={},ue={},Do;function Lo(){if(Do)return ue;Do=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.HitContext=ue.SceneContext=ue.Context=void 0;const t=xt(),e=ut();function i(x){const f=[],c=x.length,m=t.Util;for(let v=0;v<c;v++){let T=x[v];m._isNumber(T)?T=Math.round(T*1e3)/1e3:m._isString(T)||(T=T+""),f.push(T)}return f}const n=",",s="(",r=")",o="([",a="])",l=";",h="()",d="=",_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],p=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],u=100;let g=class{constructor(f){this.canvas=f,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(f){f.fillEnabled()&&this._fill(f)}_fill(f){}strokeShape(f){f.hasStroke()&&this._stroke(f)}_stroke(f){}fillStrokeShape(f){f.attrs.fillAfterStrokeEnabled?(this.strokeShape(f),this.fillShape(f)):(this.fillShape(f),this.strokeShape(f))}getTrace(f,c){let m=this.traceArr,v=m.length,T="",O,C,w,R;for(O=0;O<v;O++)C=m[O],w=C.method,w?(R=C.args,T+=w,f?T+=h:t.Util._isArray(R[0])?T+=o+R.join(n)+a:(c&&(R=R.map(N=>typeof N=="number"?Math.floor(N):N)),T+=s+R.join(n)+r)):(T+=C.property,f||(T+=d+C.val)),T+=l;return T}clearTrace(){this.traceArr=[]}_trace(f){let c=this.traceArr,m;c.push(f),m=c.length,m>=u&&c.shift()}reset(){const f=this.getCanvas().getPixelRatio();this.setTransform(1*f,0,0,1*f,0,0)}getCanvas(){return this.canvas}clear(f){const c=this.getCanvas();f?this.clearRect(f.x||0,f.y||0,f.width||0,f.height||0):this.clearRect(0,0,c.getWidth()/c.pixelRatio,c.getHeight()/c.pixelRatio)}_applyLineCap(f){const c=f.attrs.lineCap;c&&this.setAttr("lineCap",c)}_applyOpacity(f){const c=f.getAbsoluteOpacity();c!==1&&this.setAttr("globalAlpha",c)}_applyLineJoin(f){const c=f.attrs.lineJoin;c&&this.setAttr("lineJoin",c)}setAttr(f,c){this._context[f]=c}arc(f,c,m,v,T,O){this._context.arc(f,c,m,v,T,O)}arcTo(f,c,m,v,T){this._context.arcTo(f,c,m,v,T)}beginPath(){this._context.beginPath()}bezierCurveTo(f,c,m,v,T,O){this._context.bezierCurveTo(f,c,m,v,T,O)}clearRect(f,c,m,v){this._context.clearRect(f,c,m,v)}clip(...f){this._context.clip.apply(this._context,f)}closePath(){this._context.closePath()}createImageData(f,c){const m=arguments;if(m.length===2)return this._context.createImageData(f,c);if(m.length===1)return this._context.createImageData(f)}createLinearGradient(f,c,m,v){return this._context.createLinearGradient(f,c,m,v)}createPattern(f,c){return this._context.createPattern(f,c)}createRadialGradient(f,c,m,v,T,O){return this._context.createRadialGradient(f,c,m,v,T,O)}drawImage(f,c,m,v,T,O,C,w,R){const N=arguments,G=this._context;N.length===3?G.drawImage(f,c,m):N.length===5?G.drawImage(f,c,m,v,T):N.length===9&&G.drawImage(f,c,m,v,T,O,C,w,R)}ellipse(f,c,m,v,T,O,C,w){this._context.ellipse(f,c,m,v,T,O,C,w)}isPointInPath(f,c,m,v){return m?this._context.isPointInPath(m,f,c,v):this._context.isPointInPath(f,c,v)}fill(...f){this._context.fill.apply(this._context,f)}fillRect(f,c,m,v){this._context.fillRect(f,c,m,v)}strokeRect(f,c,m,v){this._context.strokeRect(f,c,m,v)}fillText(f,c,m,v){v?this._context.fillText(f,c,m,v):this._context.fillText(f,c,m)}measureText(f){return this._context.measureText(f)}getImageData(f,c,m,v){return this._context.getImageData(f,c,m,v)}lineTo(f,c){this._context.lineTo(f,c)}moveTo(f,c){this._context.moveTo(f,c)}rect(f,c,m,v){this._context.rect(f,c,m,v)}roundRect(f,c,m,v,T){this._context.roundRect(f,c,m,v,T)}putImageData(f,c,m){this._context.putImageData(f,c,m)}quadraticCurveTo(f,c,m,v){this._context.quadraticCurveTo(f,c,m,v)}restore(){this._context.restore()}rotate(f){this._context.rotate(f)}save(){this._context.save()}scale(f,c){this._context.scale(f,c)}setLineDash(f){this._context.setLineDash?this._context.setLineDash(f):"mozDash"in this._context?this._context.mozDash=f:"webkitLineDash"in this._context&&(this._context.webkitLineDash=f)}getLineDash(){return this._context.getLineDash()}setTransform(f,c,m,v,T,O){this._context.setTransform(f,c,m,v,T,O)}stroke(f){f?this._context.stroke(f):this._context.stroke()}strokeText(f,c,m,v){this._context.strokeText(f,c,m,v)}transform(f,c,m,v,T,O){this._context.transform(f,c,m,v,T,O)}translate(f,c){this._context.translate(f,c)}_enableTrace(){let f=this,c=_.length,m=this.setAttr,v,T;const O=function(C){let w=f[C],R;f[C]=function(){return T=i(Array.prototype.slice.call(arguments,0)),R=w.apply(f,arguments),f._trace({method:C,args:T}),R}};for(v=0;v<c;v++)O(_[v]);f.setAttr=function(){m.apply(f,arguments);const C=arguments[0];let w=arguments[1];(C==="shadowOffsetX"||C==="shadowOffsetY"||C==="shadowBlur")&&(w=w/this.canvas.getPixelRatio()),f._trace({property:C,val:w})}}_applyGlobalCompositeOperation(f){const c=f.attrs.globalCompositeOperation;!c||c==="source-over"||this.setAttr("globalCompositeOperation",c)}};ue.Context=g,p.forEach(function(x){Object.defineProperty(g.prototype,x,{get(){return this._context[x]},set(f){this._context[x]=f}})});class y extends g{constructor(f,{willReadFrequently:c=!1}={}){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:c})}_fillColor(f){const c=f.fill();this.setAttr("fillStyle",c),f._fillFunc(this)}_fillPattern(f){this.setAttr("fillStyle",f._getFillPattern()),f._fillFunc(this)}_fillLinearGradient(f){const c=f._getLinearGradient();c&&(this.setAttr("fillStyle",c),f._fillFunc(this))}_fillRadialGradient(f){const c=f._getRadialGradient();c&&(this.setAttr("fillStyle",c),f._fillFunc(this))}_fill(f){const c=f.fill(),m=f.getFillPriority();if(c&&m==="color"){this._fillColor(f);return}const v=f.getFillPatternImage();if(v&&m==="pattern"){this._fillPattern(f);return}const T=f.getFillLinearGradientColorStops();if(T&&m==="linear-gradient"){this._fillLinearGradient(f);return}const O=f.getFillRadialGradientColorStops();if(O&&m==="radial-gradient"){this._fillRadialGradient(f);return}c?this._fillColor(f):v?this._fillPattern(f):T?this._fillLinearGradient(f):O&&this._fillRadialGradient(f)}_strokeLinearGradient(f){const c=f.getStrokeLinearGradientStartPoint(),m=f.getStrokeLinearGradientEndPoint(),v=f.getStrokeLinearGradientColorStops(),T=this.createLinearGradient(c.x,c.y,m.x,m.y);if(v){for(let O=0;O<v.length;O+=2)T.addColorStop(v[O],v[O+1]);this.setAttr("strokeStyle",T)}}_stroke(f){const c=f.dash(),m=f.getStrokeScaleEnabled();if(f.hasStroke()){if(!m){this.save();const T=this.getCanvas().getPixelRatio();this.setTransform(T,0,0,T,0,0)}this._applyLineCap(f),c&&f.dashEnabled()&&(this.setLineDash(c),this.setAttr("lineDashOffset",f.dashOffset())),this.setAttr("lineWidth",f.strokeWidth()),f.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),f.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(f):this.setAttr("strokeStyle",f.stroke()),f._strokeFunc(this),m||this.restore()}}_applyShadow(f){var c,m,v;const T=(c=f.getShadowRGBA())!==null&&c!==void 0?c:"black",O=(m=f.getShadowBlur())!==null&&m!==void 0?m:5,C=(v=f.getShadowOffset())!==null&&v!==void 0?v:{x:0,y:0},w=f.getAbsoluteScale(),R=this.canvas.getPixelRatio(),N=w.x*R,G=w.y*R;this.setAttr("shadowColor",T),this.setAttr("shadowBlur",O*Math.min(Math.abs(N),Math.abs(G))),this.setAttr("shadowOffsetX",C.x*N),this.setAttr("shadowOffsetY",C.y*G)}}ue.SceneContext=y;class S extends g{constructor(f){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:!0})}_fill(f){this.save(),this.setAttr("fillStyle",f.colorKey),f._fillFuncHit(this),this.restore()}strokeShape(f){f.hasHitStroke()&&this._stroke(f)}_stroke(f){if(f.hasHitStroke()){const c=f.getStrokeScaleEnabled();if(!c){this.save();const T=this.getCanvas().getPixelRatio();this.setTransform(T,0,0,T,0,0)}this._applyLineCap(f);const m=f.hitStrokeWidth(),v=m==="auto"?f.strokeWidth():m;this.setAttr("lineWidth",v),this.setAttr("strokeStyle",f.colorKey),f._strokeFuncHit(this),c||this.restore()}}}return ue.HitContext=S,ue}var Go;function Pn(){if(Go)return de;Go=1,Object.defineProperty(de,"__esModule",{value:!0}),de.HitCanvas=de.SceneCanvas=de.Canvas=void 0;const t=xt(),e=Lo(),i=ut();let n;function s(){if(n)return n;const l=t.Util.createCanvasElement(),h=l.getContext("2d");return n=function(){const d=i.Konva._global.devicePixelRatio||1,_=h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1;return d/_}(),t.Util.releaseCanvas(l),n}let r=class{constructor(h){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const _=(h||{}).pixelRatio||i.Konva.pixelRatio||s();this.pixelRatio=_,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(h){const d=this.pixelRatio;this.pixelRatio=h,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(h){this.width=this._canvas.width=h*this.pixelRatio,this._canvas.style.width=h+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(h){this.height=this._canvas.height=h*this.pixelRatio,this._canvas.style.height=h+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(h,d){this.setWidth(h||0),this.setHeight(d||0)}toDataURL(h,d){try{return this._canvas.toDataURL(h,d)}catch{try{return this._canvas.toDataURL()}catch(p){return t.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};de.Canvas=r;class o extends r{constructor(h={width:0,height:0,willReadFrequently:!1}){super(h),this.context=new e.SceneContext(this,{willReadFrequently:h.willReadFrequently}),this.setSize(h.width,h.height)}}de.SceneCanvas=o;class a extends r{constructor(h={width:0,height:0}){super(h),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(h.width,h.height)}}return de.HitCanvas=a,de}var Cr={},Uo;function wr(){return Uo||(Uo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=ut(),i=xt();t.DD={get isDragging(){let n=!1;return t.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return t.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];t.DD._dragElements.forEach((r,o)=>{const{node:a}=r,l=a.getStage();l.setPointersPositions(n),r.pointerId===void 0&&(r.pointerId=i.Util._getFirstPointerId(n));const h=l._changedPointerPositions.find(d=>d.id===r.pointerId);if(h){if(r.dragStatus!=="dragging"){const d=a.dragDistance();if(Math.max(Math.abs(h.x-r.startPointerPos.x),Math.abs(h.y-r.startPointerPos.y))<d||(a.startDrag({evt:n}),!a.isDragging()))return}a._setDragPosition(n,r),s.push(a)}}),s.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:n},!0)})},_endDragBefore(n){const s=[];t.DD._dragElements.forEach(r=>{const{node:o}=r,a=o.getStage();if(n&&a.setPointersPositions(n),!a._changedPointerPositions.find(d=>d.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,r.dragStatus="stopped");const h=r.node.getLayer()||r.node instanceof e.Konva.Stage&&r.node;h&&s.indexOf(h)===-1&&s.push(h)}),s.forEach(r=>{r.draw()})},_endDragAfter(n){t.DD._dragElements.forEach((s,r)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&t.DD._dragElements.delete(r)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(Cr)),Cr}var xr={},Ut={},Bo;function gt(){if(Bo)return Ut;Bo=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.RGBComponent=n,Ut.alphaComponent=s,Ut.getNumberValidator=r,Ut.getNumberOrArrayOfNumbersValidator=o,Ut.getNumberOrAutoValidator=a,Ut.getStringValidator=l,Ut.getStringOrGradientValidator=h,Ut.getFunctionValidator=d,Ut.getNumberArrayValidator=_,Ut.getBooleanValidator=p,Ut.getComponentValidator=u;const t=ut(),e=xt();function i(g){return e.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||e.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function n(g){return g>255?255:g<0?0:Math.round(g)}function s(g){return g>1?1:g<1e-4?1e-4:g}function r(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isNumber(g)||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),g}}function o(g){if(t.Konva.isUnminified)return function(y,S){let x=e.Util._isNumber(y),f=e.Util._isArray(y)&&y.length==g;return!x&&!f&&e.Util.warn(i(y)+' is a not valid value for "'+S+'" attribute. The value should be a number or Array<number>('+g+")"),y}}function a(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isNumber(g)||g==="auto"||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),g}}function l(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isString(g)||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),g}}function h(){if(t.Konva.isUnminified)return function(g,y){const S=e.Util._isString(g),x=Object.prototype.toString.call(g)==="[object CanvasGradient]"||g&&g.addColorStop;return S||x||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),g}}function d(){if(t.Konva.isUnminified)return function(g,y){return e.Util._isFunction(g)||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),g}}function _(){if(t.Konva.isUnminified)return function(g,y){const S=Int8Array?Object.getPrototypeOf(Int8Array):null;return S&&g instanceof S||(e.Util._isArray(g)?g.forEach(function(x){e.Util._isNumber(x)||e.Util.warn('"'+y+'" attribute has non numeric element '+x+". Make sure that all elements are numbers.")}):e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),g}}function p(){if(t.Konva.isUnminified)return function(g,y){return g===!0||g===!1||e.Util.warn(i(g)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),g}}function u(g){if(t.Konva.isUnminified)return function(y,S){return y==null||e.Util.isObject(y)||e.Util.warn(i(y)+' is a not valid value for "'+S+'" attribute. The value should be an object with properties '+g),y}}return Ut}var Vo;function ft(){return Vo||(Vo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=xt(),i=gt(),n="get",s="set";t.Factory={addGetterSetter(r,o,a,l,h){t.Factory.addGetter(r,o,a),t.Factory.addSetter(r,o,l,h),t.Factory.addOverloadedGetterSetter(r,o)},addGetter(r,o,a){const l=n+e.Util._capitalize(o);r.prototype[l]=r.prototype[l]||function(){const h=this.attrs[o];return h===void 0?a:h}},addSetter(r,o,a,l){const h=s+e.Util._capitalize(o);r.prototype[h]||t.Factory.overWriteSetter(r,o,a,l)},overWriteSetter(r,o,a,l){const h=s+e.Util._capitalize(o);r.prototype[h]=function(d){return a&&d!==void 0&&d!==null&&(d=a.call(this,d,o)),this._setAttr(o,d),l&&l.call(this),this}},addComponentsGetterSetter(r,o,a,l,h){const d=a.length,_=e.Util._capitalize,p=n+_(o),u=s+_(o);r.prototype[p]=function(){const y={};for(let S=0;S<d;S++){const x=a[S];y[x]=this.getAttr(o+_(x))}return y};const g=(0,i.getComponentValidator)(a);r.prototype[u]=function(y){const S=this.attrs[o];l&&(y=l.call(this,y,o)),g&&g.call(this,y,o);for(const x in y)y.hasOwnProperty(x)&&this._setAttr(o+_(x),y[x]);return y||a.forEach(x=>{this._setAttr(o+_(x),void 0)}),this._fireChangeEvent(o,S,y),h&&h.call(this),this},t.Factory.addOverloadedGetterSetter(r,o)},addOverloadedGetterSetter(r,o){const a=e.Util._capitalize(o),l=s+a,h=n+a;r.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(r,o,a,l){e.Util.error("Adding deprecated "+o);const h=n+e.Util._capitalize(o),d=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[h]=function(){e.Util.error(d);const _=this.attrs[o];return _===void 0?a:_},t.Factory.addSetter(r,o,l,function(){e.Util.error(d)}),t.Factory.addOverloadedGetterSetter(r,o)},backCompat(r,o){e.Util.each(o,function(a,l){const h=r.prototype[l],d=n+e.Util._capitalize(a),_=s+e.Util._capitalize(a);function p(){h.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}r.prototype[a]=p,r.prototype[d]=p,r.prototype[_]=p})},afterSetFilter(){this._filterUpToDate=!1}}}(xr)),xr}var Ho;function Rt(){if(Ho)return ni;Ho=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.Node=void 0;const t=Pn(),e=wr(),i=ft(),n=ut(),s=xt(),r=gt(),o="absoluteOpacity",a="allEventListeners",l="absoluteTransform",h="absoluteScale",d="canvas",_="Change",p="children",u="konva",g="listening",y="mouseenter",S="mouseleave",x="pointerenter",f="pointerleave",c="touchenter",m="touchleave",v="set",T="Shape",O=" ",C="stage",w="transform",R="Stage",N="visible",G=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(O);let D=1,U=class Or{constructor(b){this._id=D++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(b),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(b){(b===w||b===l)&&this._cache.get(b)?this._cache.get(b).dirty=!0:b?this._cache.delete(b):this._cache.clear()}_getCache(b,P){let F=this._cache.get(b);return(F===void 0||(b===w||b===l)&&F.dirty===!0)&&(F=P.call(this),this._cache.set(b,F)),F}_calculate(b,P,F){if(!this._attachedDepsListeners.get(b)){const A=P.map(I=>I+"Change.konva").join(O);this.on(A,()=>{this._clearCache(b)}),this._attachedDepsListeners.set(b,!0)}return this._getCache(b,F)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(b){this._clearCache(b),b===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:b,filter:P,hit:F,buffer:A}=this._cache.get(d);s.Util.releaseCanvas(b,P,F,A),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(b){const P=b||{};let F={};(P.x===void 0||P.y===void 0||P.width===void 0||P.height===void 0)&&(F=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let A=Math.ceil(P.width||F.width),I=Math.ceil(P.height||F.height),W=P.pixelRatio,B=P.x===void 0?Math.floor(F.x):P.x,X=P.y===void 0?Math.floor(F.y):P.y,it=P.offset||0,q=P.drawBorder||!1,M=P.hitCanvasPixelRatio||1;if(!A||!I){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const H=Math.abs(Math.round(F.x)-B)>.5?1:0,Z=Math.abs(Math.round(F.y)-X)>.5?1:0;A+=it*2+H,I+=it*2+Z,B-=it,X-=it;const nt=new t.SceneCanvas({pixelRatio:W,width:A,height:I}),ot=new t.SceneCanvas({pixelRatio:W,width:0,height:0,willReadFrequently:!0}),E=new t.HitCanvas({pixelRatio:M,width:A,height:I}),k=nt.getContext(),V=E.getContext(),z=new t.SceneCanvas({width:nt.width/nt.pixelRatio+Math.abs(B),height:nt.height/nt.pixelRatio+Math.abs(X),pixelRatio:nt.pixelRatio}),Y=z.getContext();return E.isCache=!0,nt.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,P.imageSmoothingEnabled===!1&&(nt.getContext()._context.imageSmoothingEnabled=!1,ot.getContext()._context.imageSmoothingEnabled=!1),k.save(),V.save(),Y.save(),k.translate(-B,-X),V.translate(-B,-X),Y.translate(-B,-X),z.x=B,z.y=X,this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(h),this.drawScene(nt,this,z),this.drawHit(E,this),this._isUnderCache=!1,k.restore(),V.restore(),q&&(k.save(),k.beginPath(),k.rect(0,0,A,I),k.closePath(),k.setAttr("strokeStyle","red"),k.setAttr("lineWidth",5),k.stroke(),k.restore()),this._cache.set(d,{scene:nt,filter:ot,hit:E,buffer:z,x:B,y:X}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(b){throw new Error('abstract "getClientRect" method call')}_transformedRect(b,P){const F=[{x:b.x,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width,y:b.y+b.height},{x:b.x,y:b.y+b.height}];let A=1/0,I=1/0,W=-1/0,B=-1/0;const X=this.getAbsoluteTransform(P);return F.forEach(function(it){const q=X.point(it);A===void 0&&(A=W=q.x,I=B=q.y),A=Math.min(A,q.x),I=Math.min(I,q.y),W=Math.max(W,q.x),B=Math.max(B,q.y)}),{x:A,y:I,width:W-A,height:B-I}}_drawCachedSceneCanvas(b){b.save(),b._applyOpacity(this),b._applyGlobalCompositeOperation(this);const P=this._getCanvasCache();b.translate(P.x,P.y);const F=this._getCachedSceneCanvas(),A=F.pixelRatio;b.drawImage(F._canvas,0,0,F.width/A,F.height/A),b.restore()}_drawCachedHitCanvas(b){const P=this._getCanvasCache(),F=P.hit;b.save(),b.translate(P.x,P.y),b.drawImage(F._canvas,0,0,F.width/F.pixelRatio,F.height/F.pixelRatio),b.restore()}_getCachedSceneCanvas(){let b=this.filters(),P=this._getCanvasCache(),F=P.scene,A=P.filter,I=A.getContext(),W,B,X,it;if(b){if(!this._filterUpToDate){const q=F.pixelRatio;A.setSize(F.width/F.pixelRatio,F.height/F.pixelRatio);try{for(W=b.length,I.clear(),I.drawImage(F._canvas,0,0,F.getWidth()/q,F.getHeight()/q),B=I.getImageData(0,0,A.getWidth(),A.getHeight()),X=0;X<W;X++){if(it=b[X],typeof it!="function"){s.Util.error("Filter should be type of function, but got "+typeof it+" instead. Please check correct filters");continue}it.call(this,B),I.putImageData(B,0,0)}}catch(M){s.Util.error("Unable to apply filter. "+M.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return A}return F}on(b,P){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);const F=b.split(O);for(let A=0;A<F.length;A++){const W=F[A].split("."),B=W[0],X=W[1]||"";this.eventListeners[B]||(this.eventListeners[B]=[]),this.eventListeners[B].push({name:X,handler:P})}return this}off(b,P){let F=(b||"").split(O),A=F.length,I,W,B,X,it,q;if(this._cache&&this._cache.delete(a),!b)for(W in this.eventListeners)this._off(W);for(I=0;I<A;I++)if(B=F[I],X=B.split("."),it=X[0],q=X[1],it)this.eventListeners[it]&&this._off(it,q,P);else for(W in this.eventListeners)this._off(W,q,P);return this}dispatchEvent(b){const P={target:this,type:b.type,evt:b};return this.fire(b.type,P),this}addEventListener(b,P){return this.on(b,function(F){P.call(this,F.evt)}),this}removeEventListener(b){return this.off(b),this}_delegate(b,P,F){const A=this;this.on(b,function(I){const W=I.target.findAncestors(P,!0,A);for(let B=0;B<W.length;B++)I=s.Util.cloneObject(I),I.currentTarget=W[B],F.call(W[B],I)})}remove(){return this.isDragging()&&this.stopDrag(),e.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(C),this._clearSelfAndDescendantCache(N),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();const b=this.getParent();b&&b.children&&(b.children.splice(this.index,1),b._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(b){const P="get"+s.Util._capitalize(b);return s.Util._isFunction(this[P])?this[P]():this.attrs[b]}getAncestors(){let b=this.getParent(),P=[];for(;b;)P.push(b),b=b.getParent();return P}getAttrs(){return this.attrs||{}}setAttrs(b){return this._batchTransformChanges(()=>{let P,F;if(!b)return this;for(P in b)P!==p&&(F=v+s.Util._capitalize(P),s.Util._isFunction(this[F])?this[F](b[P]):this._setAttr(P,b[P]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(b){if(!this.listening())return!1;const F=this.getParent();return F&&F!==b&&this!==b?F._isListening(b):!0}isVisible(){return this._getCache(N,this._isVisible)}_isVisible(b){if(!this.visible())return!1;const F=this.getParent();return F&&F!==b&&this!==b?F._isVisible(b):!0}shouldDrawHit(b,P=!1){if(b)return this._isVisible(b)&&this._isListening(b);const F=this.getLayer();let A=!1;e.DD._dragElements.forEach(W=>{W.dragStatus==="dragging"&&(W.node.nodeType==="Stage"||W.node.getLayer()===F)&&(A=!0)});const I=!P&&!n.Konva.hitOnDragEnabled&&(A||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!I}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let b=this.getDepth(),P=this,F=0,A,I,W,B;function X(q){for(A=[],I=q.length,W=0;W<I;W++)B=q[W],F++,B.nodeType!==T&&(A=A.concat(B.getChildren().slice())),B._id===P._id&&(W=I);A.length>0&&A[0].getDepth()<=b&&X(A)}const it=this.getStage();return P.nodeType!==R&&it&&X(it.getChildren()),F}getDepth(){let b=0,P=this.parent;for(;P;)b++,P=P.parent;return b}_batchTransformChanges(b){this._batchingTransformChange=!0,b(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(w),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(b){return this._batchTransformChanges(()=>{this.x(b.x),this.y(b.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const b=this.getStage();if(!b)return null;const P=b.getPointerPosition();if(!P)return null;const F=this.getAbsoluteTransform().copy();return F.invert(),F.point(P)}getAbsolutePosition(b){let P=!1,F=this.parent;for(;F;){if(F.isCached()){P=!0;break}F=F.parent}P&&!b&&(b=!0);const A=this.getAbsoluteTransform(b).getMatrix(),I=new s.Transform,W=this.offset();return I.m=A.slice(),I.translate(W.x,W.y),I.getTranslation()}setAbsolutePosition(b){const{x:P,y:F,...A}=this._clearTransform();this.attrs.x=P,this.attrs.y=F,this._clearCache(w);const I=this._getAbsoluteTransform().copy();return I.invert(),I.translate(b.x,b.y),b={x:this.attrs.x+I.getTranslation().x,y:this.attrs.y+I.getTranslation().y},this._setTransform(A),this.setPosition({x:b.x,y:b.y}),this._clearCache(w),this._clearSelfAndDescendantCache(l),this}_setTransform(b){let P;for(P in b)this.attrs[P]=b[P]}_clearTransform(){const b={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,b}move(b){let P=b.x,F=b.y,A=this.x(),I=this.y();return P!==void 0&&(A+=P),F!==void 0&&(I+=F),this.setPosition({x:A,y:I}),this}_eachAncestorReverse(b,P){let F=[],A=this.getParent(),I,W;if(!(P&&P._id===this._id)){for(F.unshift(this);A&&(!P||A._id!==P._id);)F.unshift(A),A=A.parent;for(I=F.length,W=0;W<I;W++)b(F[W])}}rotate(b){return this.rotation(this.rotation()+b),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const b=this.index,P=this.parent.getChildren().length;return b<P-1?(this.parent.children.splice(b,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const b=this.index,P=this.parent.getChildren().length;return b<P-1?(this.parent.children.splice(b,1),this.parent.children.splice(b+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.splice(b-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(b){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(b<0||b>=this.parent.children.length)&&s.Util.warn("Unexpected value "+b+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const P=this.index;return this.parent.children.splice(P,1),this.parent.children.splice(b,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let b=this.opacity();const P=this.getParent();return P&&!P._isUnderCache&&(b*=P.getAbsoluteOpacity()),b}moveTo(b){return this.getParent()!==b&&(this._remove(),b.add(this)),this}toObject(){let b=this.getAttrs(),P,F,A,I,W;const B={attrs:{},className:this.getClassName()};for(P in b)F=b[P],W=s.Util.isObject(F)&&!s.Util._isPlainObject(F)&&!s.Util._isArray(F),!W&&(A=typeof this[P]=="function"&&this[P],delete b[P],I=A?A.call(this):null,b[P]=F,I!==F&&(B.attrs[P]=F));return s.Util._prepareToStringify(B)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(b,P,F){const A=[];P&&this._isMatch(b)&&A.push(this);let I=this.parent;for(;I;){if(I===F)return A;I._isMatch(b)&&A.push(I),I=I.parent}return A}isAncestorOf(b){return!1}findAncestor(b,P,F){return this.findAncestors(b,P,F)[0]}_isMatch(b){if(!b)return!1;if(typeof b=="function")return b(this);let P=b.replace(/ /g,"").split(","),F=P.length,A,I;for(A=0;A<F;A++)if(I=P[A],s.Util.isValidSelector(I)||(s.Util.warn('Selector "'+I+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),I.charAt(0)==="#"){if(this.id()===I.slice(1))return!0}else if(I.charAt(0)==="."){if(this.hasName(I.slice(1)))return!0}else if(this.className===I||this.nodeType===I)return!0;return!1}getLayer(){const b=this.getParent();return b?b.getLayer():null}getStage(){return this._getCache(C,this._getStage)}_getStage(){const b=this.getParent();return b?b.getStage():null}fire(b,P={},F){return P.target=P.target||this,F?this._fireAndBubble(b,P):this._fire(b,P),this}getAbsoluteTransform(b){return b?this._getAbsoluteTransform(b):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(b){let P;if(b)return P=new s.Transform,this._eachAncestorReverse(function(F){const A=F.transformsEnabled();A==="all"?P.multiply(F.getTransform()):A==="position"&&P.translate(F.x()-F.offsetX(),F.y()-F.offsetY())},b),P;{P=this._cache.get(l)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(P):P.reset();const F=this.transformsEnabled();if(F==="all")P.multiply(this.getTransform());else if(F==="position"){const A=this.attrs.x||0,I=this.attrs.y||0,W=this.attrs.offsetX||0,B=this.attrs.offsetY||0;P.translate(A-W,I-B)}return P.dirty=!1,P}}getAbsoluteScale(b){let P=this;for(;P;)P._isUnderCache&&(b=P),P=P.getParent();const A=this.getAbsoluteTransform(b).decompose();return{x:A.scaleX,y:A.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(w,this._getTransform)}_getTransform(){var b,P;const F=this._cache.get(w)||new s.Transform;F.reset();const A=this.x(),I=this.y(),W=n.Konva.getAngle(this.rotation()),B=(b=this.attrs.scaleX)!==null&&b!==void 0?b:1,X=(P=this.attrs.scaleY)!==null&&P!==void 0?P:1,it=this.attrs.skewX||0,q=this.attrs.skewY||0,M=this.attrs.offsetX||0,H=this.attrs.offsetY||0;return(A!==0||I!==0)&&F.translate(A,I),W!==0&&F.rotate(W),(it!==0||q!==0)&&F.skew(it,q),(B!==1||X!==1)&&F.scale(B,X),(M!==0||H!==0)&&F.translate(-1*M,-1*H),F.dirty=!1,F}clone(b){let P=s.Util.cloneObject(this.attrs),F,A,I,W,B;for(F in b)P[F]=b[F];const X=new this.constructor(P);for(F in this.eventListeners)for(A=this.eventListeners[F],I=A.length,W=0;W<I;W++)B=A[W],B.name.indexOf(u)<0&&(X.eventListeners[F]||(X.eventListeners[F]=[]),X.eventListeners[F].push(B));return X}_toKonvaCanvas(b){b=b||{};const P=this.getClientRect(),F=this.getStage(),A=b.x!==void 0?b.x:Math.floor(P.x),I=b.y!==void 0?b.y:Math.floor(P.y),W=b.pixelRatio||1,B=new t.SceneCanvas({width:b.width||Math.ceil(P.width)||(F?F.width():0),height:b.height||Math.ceil(P.height)||(F?F.height():0),pixelRatio:W}),X=B.getContext(),it=new t.SceneCanvas({width:B.width/B.pixelRatio+Math.abs(A),height:B.height/B.pixelRatio+Math.abs(I),pixelRatio:B.pixelRatio});return b.imageSmoothingEnabled===!1&&(X._context.imageSmoothingEnabled=!1),X.save(),(A||I)&&X.translate(-1*A,-1*I),this.drawScene(B,void 0,it),X.restore(),B}toCanvas(b){return this._toKonvaCanvas(b)._canvas}toDataURL(b){b=b||{};const P=b.mimeType||null,F=b.quality||null,A=this._toKonvaCanvas(b).toDataURL(P,F);return b.callback&&b.callback(A),A}toImage(b){return new Promise((P,F)=>{try{const A=b?.callback;A&&delete b.callback,s.Util._urlToImage(this.toDataURL(b),function(I){P(I),A?.(I)})}catch(A){F(A)}})}toBlob(b){return new Promise((P,F)=>{try{const A=b?.callback;A&&delete b.callback,this.toCanvas(b).toBlob(I=>{P(I),A?.(I)},b?.mimeType,b?.quality)}catch(A){F(A)}})}setSize(b){return this.width(b.width),this.height(b.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(b,P,F){let A=this.eventListeners[b],I,W,B;for(I=0;I<A.length;I++)if(W=A[I].name,B=A[I].handler,(W!=="konva"||P==="konva")&&(!P||W===P)&&(!F||F===B)){if(A.splice(I,1),A.length===0){delete this.eventListeners[b];break}I--}}_fireChangeEvent(b,P,F){this._fire(b+_,{oldVal:P,newVal:F})}addName(b){if(!this.hasName(b)){const P=this.name(),F=P?P+" "+b:b;this.name(F)}return this}hasName(b){if(!b)return!1;const P=this.name();return P?(P||"").split(/\s/g).indexOf(b)!==-1:!1}removeName(b){const P=(this.name()||"").split(/\s/g),F=P.indexOf(b);return F!==-1&&(P.splice(F,1),this.name(P.join(" "))),this}setAttr(b,P){const F=this[v+s.Util._capitalize(b)];return s.Util._isFunction(F)?F.call(this,P):this._setAttr(b,P),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const b=this.getLayer()||this.getStage();b?.batchDraw()}}_setAttr(b,P){const F=this.attrs[b];F===P&&!s.Util.isObject(P)||(P==null?delete this.attrs[b]:this.attrs[b]=P,this._shouldFireChangeEvents&&this._fireChangeEvent(b,F,P),this._requestDraw())}_setComponentAttr(b,P,F){let A;F!==void 0&&(A=this.attrs[b],A||(this.attrs[b]=this.getAttr(b)),this.attrs[b][P]=F,this._fireChangeEvent(b,A,F))}_fireAndBubble(b,P,F){P&&this.nodeType===T&&(P.target=this);const A=[y,S,x,f,c,m];if(!(A.indexOf(b)!==-1&&(F&&(this===F||this.isAncestorOf&&this.isAncestorOf(F))||this.nodeType==="Stage"&&!F))){this._fire(b,P);const W=A.indexOf(b)!==-1&&F&&F.isAncestorOf&&F.isAncestorOf(this)&&!F.isAncestorOf(this.parent);(P&&!P.cancelBubble||!P)&&this.parent&&this.parent.isListening()&&!W&&(F&&F.parent?this._fireAndBubble.call(this.parent,b,P,F):this._fireAndBubble.call(this.parent,b,P))}}_getProtoListeners(b){var P,F,A;const I=(P=this._cache.get(a))!==null&&P!==void 0?P:{};let W=I?.[b];if(W===void 0){W=[];let B=Object.getPrototypeOf(this);for(;B;){const X=(A=(F=B.eventListeners)===null||F===void 0?void 0:F[b])!==null&&A!==void 0?A:[];W.push(...X),B=Object.getPrototypeOf(B)}I[b]=W,this._cache.set(a,I)}return W}_fire(b,P){P=P||{},P.currentTarget=this,P.type=b;const F=this._getProtoListeners(b);if(F)for(let I=0;I<F.length;I++)F[I].handler.call(this,P);const A=this.eventListeners[b];if(A)for(let I=0;I<A.length;I++)A[I].handler.call(this,P)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(b){const P=b?b.pointerId:void 0,F=this.getStage(),A=this.getAbsolutePosition();if(!F)return;const I=F._getPointerById(P)||F._changedPointerPositions[0]||A;e.DD._dragElements.set(this._id,{node:this,startPointerPos:I,offset:{x:I.x-A.x,y:I.y-A.y},dragStatus:"ready",pointerId:P})}startDrag(b,P=!0){e.DD._dragElements.has(this._id)||this._createDragElement(b);const F=e.DD._dragElements.get(this._id);F.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:b&&b.evt},P)}_setDragPosition(b,P){const F=this.getStage()._getPointerById(P.pointerId);if(!F)return;let A={x:F.x-P.offset.x,y:F.y-P.offset.y};const I=this.dragBoundFunc();if(I!==void 0){const W=I.call(this,A,b);W?A=W:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==A.x||this._lastPos.y!==A.y)&&(this.setAbsolutePosition(A),this._requestDraw()),this._lastPos=A}stopDrag(b){const P=e.DD._dragElements.get(this._id);P&&(P.dragStatus="stopped"),e.DD._endDragBefore(b),e.DD._endDragAfter(b)}setDraggable(b){this._setAttr("draggable",b),this._dragChange()}isDragging(){const b=e.DD._dragElements.get(this._id);return b?b.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(b){if(!(!(b.evt.button!==void 0)||n.Konva.dragButtons.indexOf(b.evt.button)>=0)||this.isDragging())return;let A=!1;e.DD._dragElements.forEach(I=>{this.isAncestorOf(I.node)&&(A=!0)}),A||this._createDragElement(b)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const P=e.DD._dragElements.get(this._id),F=P&&P.dragStatus==="dragging",A=P&&P.dragStatus==="ready";F?this.stopDrag():A&&e.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(b={x:0,y:0}){const P=this.getStage();if(!P)return!1;const F={x:-b.x,y:-b.y,width:P.width()+2*b.x,height:P.height()+2*b.y};return s.Util.haveIntersection(F,this.getClientRect())}static create(b,P){return s.Util._isString(b)&&(b=JSON.parse(b)),this._createNode(b,P)}static _createNode(b,P){let F=Or.prototype.getClassName.call(b),A=b.children,I,W,B;P&&(b.attrs.container=P),n.Konva[F]||(s.Util.warn('Can not find a node with class name "'+F+'". Fallback to "Shape".'),F="Shape");const X=n.Konva[F];if(I=new X(b.attrs),A)for(W=A.length,B=0;B<W;B++)I.add(Or._createNode(A[B]));return I}};ni.Node=U,U.prototype.nodeType="Node",U.prototype._attrsAffectingSize=[],U.prototype.eventListeners={},U.prototype.on.call(U.prototype,G,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(w),this._clearSelfAndDescendantCache(l)}),U.prototype.on.call(U.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(N)}),U.prototype.on.call(U.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),U.prototype.on.call(U.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const L=i.Factory.addGetterSetter;return L(U,"zIndex"),L(U,"absolutePosition"),L(U,"position"),L(U,"x",0,(0,r.getNumberValidator)()),L(U,"y",0,(0,r.getNumberValidator)()),L(U,"globalCompositeOperation","source-over",(0,r.getStringValidator)()),L(U,"opacity",1,(0,r.getNumberValidator)()),L(U,"name","",(0,r.getStringValidator)()),L(U,"id","",(0,r.getStringValidator)()),L(U,"rotation",0,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(U,"scale",["x","y"]),L(U,"scaleX",1,(0,r.getNumberValidator)()),L(U,"scaleY",1,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(U,"skew",["x","y"]),L(U,"skewX",0,(0,r.getNumberValidator)()),L(U,"skewY",0,(0,r.getNumberValidator)()),i.Factory.addComponentsGetterSetter(U,"offset",["x","y"]),L(U,"offsetX",0,(0,r.getNumberValidator)()),L(U,"offsetY",0,(0,r.getNumberValidator)()),L(U,"dragDistance",void 0,(0,r.getNumberValidator)()),L(U,"width",0,(0,r.getNumberValidator)()),L(U,"height",0,(0,r.getNumberValidator)()),L(U,"listening",!0,(0,r.getBooleanValidator)()),L(U,"preventDefault",!0,(0,r.getBooleanValidator)()),L(U,"filters",void 0,function(K){return this._filterUpToDate=!1,K}),L(U,"visible",!0,(0,r.getBooleanValidator)()),L(U,"transformsEnabled","all",(0,r.getStringValidator)()),L(U,"size"),L(U,"dragBoundFunc"),L(U,"draggable",!1,(0,r.getBooleanValidator)()),i.Factory.backCompat(U,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),ni}var ri={},qo;function Rn(){if(qo)return ri;qo=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Container=void 0;const t=ft(),e=Rt(),i=gt();let n=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(r){const o=this.children||[];return r?o.filter(r):o}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(r=>{r.parent=null,r.index=0,r.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(r=>{r.parent=null,r.index=0,r.destroy()}),this.children=[],this._requestDraw(),this}add(...r){if(r.length===0)return this;if(r.length>1){for(let a=0;a<r.length;a++)this.add(r[a]);return this}const o=r[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(r){return this._generalFind(r,!1)}findOne(r){const o=this._generalFind(r,!0);return o.length>0?o[0]:void 0}_generalFind(r,o){const a=[];return this._descendants(l=>{const h=l._isMatch(r);return h&&a.push(l),!!(h&&o)}),a}_descendants(r){let o=!1;const a=this.getChildren();for(const l of a){if(o=r(l),o)return!0;if(l.hasChildren()&&(o=l._descendants(r),o))return!0}return!1}toObject(){const r=e.Node.prototype.toObject.call(this);return r.children=[],this.getChildren().forEach(o=>{r.children.push(o.toObject())}),r}isAncestorOf(r){let o=r.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(r){const o=e.Node.prototype.clone.call(this,r);return this.getChildren().forEach(function(a){o.add(a.clone())}),o}getAllIntersections(r){const o=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(r)&&o.push(a)}),o}_clearSelfAndDescendantCache(r){var o;super._clearSelfAndDescendantCache(r),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(a){a._clearSelfAndDescendantCache(r)}))}_setChildrenIndices(){var r;(r=this.children)===null||r===void 0||r.forEach(function(o,a){o.index=a}),this._requestDraw()}drawScene(r,o,a){const l=this.getLayer(),h=r||l&&l.getCanvas(),d=h&&h.getContext(),_=this._getCanvasCache(),p=_&&_.scene,u=h&&h.isCache;if(!this.isVisible()&&!u)return this;if(p){d.save();const g=this.getAbsoluteTransform(o).getMatrix();d.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",h,o,a);return this}drawHit(r,o){if(!this.shouldDrawHit(o))return this;const a=this.getLayer(),l=r||a&&a.hitCanvas,h=l&&l.getContext(),d=this._getCanvasCache();if(d&&d.hit){h.save();const p=this.getAbsoluteTransform(o).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(h),h.restore()}else this._drawChildren("drawHit",l,o);return this}_drawChildren(r,o,a,l){var h;const d=o&&o.getContext(),_=this.clipWidth(),p=this.clipHeight(),u=this.clipFunc(),g=typeof _=="number"&&typeof p=="number"||u,y=a===this;if(g){d.save();const x=this.getAbsoluteTransform(a);let f=x.getMatrix();d.transform(f[0],f[1],f[2],f[3],f[4],f[5]),d.beginPath();let c;if(u)c=u.call(this,d,this);else{const m=this.clipX(),v=this.clipY();d.rect(m||0,v||0,_,p)}d.clip.apply(d,c),f=x.copy().invert().getMatrix(),d.transform(f[0],f[1],f[2],f[3],f[4],f[5])}const S=!y&&this.globalCompositeOperation()!=="source-over"&&r==="drawScene";S&&(d.save(),d._applyGlobalCompositeOperation(this)),(h=this.children)===null||h===void 0||h.forEach(function(x){x[r](o,a,l)}),S&&d.restore(),g&&d.restore()}getClientRect(r={}){var o;const a=r.skipTransform,l=r.relativeTo;let h,d,_,p,u={x:1/0,y:1/0,width:0,height:0};const g=this;(o=this.children)===null||o===void 0||o.forEach(function(x){if(!x.visible())return;const f=x.getClientRect({relativeTo:g,skipShadow:r.skipShadow,skipStroke:r.skipStroke});f.width===0&&f.height===0||(h===void 0?(h=f.x,d=f.y,_=f.x+f.width,p=f.y+f.height):(h=Math.min(h,f.x),d=Math.min(d,f.y),_=Math.max(_,f.x+f.width),p=Math.max(p,f.y+f.height)))});const y=this.find("Shape");let S=!1;for(let x=0;x<y.length;x++)if(y[x]._isVisible(this)){S=!0;break}return S&&h!==void 0?u={x:h,y:d,width:_-h,height:p-d}:u={x:0,y:0,width:0,height:0},a?u:this._transformedRect(u,l)}};return ri.Container=n,t.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(n,"clipX",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipY",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipWidth",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipHeight",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"clipFunc"),ri}var Pr={},ye={},Wo;function zo(){if(Wo)return ye;Wo=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.getCapturedShape=n,ye.createEvent=s,ye.hasPointerCapture=r,ye.setPointerCapture=o,ye.releaseCapture=a;const t=ut(),e=new Map,i=t.Konva._global.PointerEvent!==void 0;function n(l){return e.get(l)}function s(l){return{evt:l,pointerId:l.pointerId}}function r(l,h){return e.get(l)===h}function o(l,h){a(l),h.getStage()&&(e.set(l,h),i&&h._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function a(l,h){const d=e.get(l);if(!d)return;const _=d.getStage();_&&_.content,e.delete(l),i&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return ye}var Ko;function kh(){return Ko||(Ko=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=xt(),i=ft(),n=Rn(),s=ut(),r=Pn(),o=wr(),a=ut(),l=zo(),h="Stage",d="string",_="px",p="mouseout",u="mouseleave",g="mouseover",y="mouseenter",S="mousemove",x="mousedown",f="mouseup",c="pointermove",m="pointerdown",v="pointerup",T="pointercancel",O="lostpointercapture",C="pointerout",w="pointerleave",R="pointerover",N="pointerenter",G="contextmenu",D="touchstart",U="touchend",L="touchmove",K="touchcancel",b="wheel",P=5,F=[[y,"_pointerenter"],[x,"_pointerdown"],[S,"_pointermove"],[f,"_pointerup"],[u,"_pointerleave"],[D,"_pointerdown"],[L,"_pointermove"],[U,"_pointerup"],[K,"_pointercancel"],[g,"_pointerover"],[b,"_wheel"],[G,"_contextmenu"],[m,"_pointerdown"],[c,"_pointermove"],[v,"_pointerup"],[T,"_pointercancel"],[w,"_pointerleave"],[O,"_lostpointercapture"]],A={mouse:{[C]:p,[w]:u,[R]:g,[N]:y,[c]:S,[m]:x,[v]:f,[T]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[C]:"touchout",[w]:"touchleave",[R]:"touchover",[N]:"touchenter",[c]:L,[m]:D,[v]:U,[T]:K,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[C]:C,[w]:w,[R]:R,[N]:N,[c]:c,[m]:m,[v]:v,[T]:T,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},I=q=>q.indexOf("pointer")>=0?"pointer":q.indexOf("touch")>=0?"touch":"mouse",W=q=>{const M=I(q);if(M==="pointer")return s.Konva.pointerEventsEnabled&&A.pointer;if(M==="touch")return A.touch;if(M==="mouse")return A.mouse};function B(q={}){return(q.clipFunc||q.clipWidth||q.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),q}const X="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class it extends n.Container{constructor(M){super(B(M)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{B(this.attrs)}),this._checkVisibility()}_validateAdd(M){const H=M.getType()==="Layer",Z=M.getType()==="FastLayer";H||Z||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const M=this.visible()?"":"none";this.content.style.display=M}setContainer(M){if(typeof M===d){let H;if(M.charAt(0)==="."){const Z=M.slice(1);M=document.getElementsByClassName(Z)[0]}else M.charAt(0)!=="#"?H=M:H=M.slice(1),M=document.getElementById(H);if(!M)throw"Can not find container in document with id "+H}return this._setAttr("container",M),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),M.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const M=this.children,H=M.length;for(let Z=0;Z<H;Z++)M[Z].clear();return this}clone(M){return M||(M={}),M.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,M)}destroy(){super.destroy();const M=this.content;M&&e.Util._isInDocument(M)&&this.container().removeChild(M);const H=t.stages.indexOf(this);return H>-1&&t.stages.splice(H,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const M=this._pointerPositions[0]||this._changedPointerPositions[0];return M?{x:M.x,y:M.y}:(e.Util.warn(X),null)}_getPointerById(M){return this._pointerPositions.find(H=>H.id===M)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(M){M=M||{},M.x=M.x||0,M.y=M.y||0,M.width=M.width||this.width(),M.height=M.height||this.height();const H=new r.SceneCanvas({width:M.width,height:M.height,pixelRatio:M.pixelRatio||1}),Z=H.getContext()._context,nt=this.children;return(M.x||M.y)&&Z.translate(-1*M.x,-1*M.y),nt.forEach(function(ot){if(!ot.isVisible())return;const E=ot._toKonvaCanvas(M);Z.drawImage(E._canvas,M.x,M.y,E.getWidth()/E.getPixelRatio(),E.getHeight()/E.getPixelRatio())}),H}getIntersection(M){if(!M)return null;const H=this.children,Z=H.length,nt=Z-1;for(let ot=nt;ot>=0;ot--){const E=H[ot].getIntersection(M);if(E)return E}return null}_resizeDOM(){const M=this.width(),H=this.height();this.content&&(this.content.style.width=M+_,this.content.style.height=H+_),this.bufferCanvas.setSize(M,H),this.bufferHitCanvas.setSize(M,H),this.children.forEach(Z=>{Z.setSize({width:M,height:H}),Z.draw()})}add(M,...H){if(arguments.length>1){for(let nt=0;nt<arguments.length;nt++)this.add(arguments[nt]);return this}super.add(M);const Z=this.children.length;return Z>P&&e.Util.warn("The stage has "+Z+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),M.setSize({width:this.width(),height:this.height()}),M.draw(),s.Konva.isBrowser&&this.content.appendChild(M.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(M){return l.hasPointerCapture(M,this)}setPointerCapture(M){l.setPointerCapture(M,this)}releaseCapture(M){l.releaseCapture(M,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&F.forEach(([M,H])=>{this.content.addEventListener(M,Z=>{this[H](Z)},{passive:!1})})}_pointerenter(M){this.setPointersPositions(M);const H=W(M.type);H&&this._fire(H.pointerenter,{evt:M,target:this,currentTarget:this})}_pointerover(M){this.setPointersPositions(M);const H=W(M.type);H&&this._fire(H.pointerover,{evt:M,target:this,currentTarget:this})}_getTargetShape(M){let H=this[M+"targetShape"];return H&&!H.getStage()&&(H=null),H}_pointerleave(M){const H=W(M.type),Z=I(M.type);if(!H)return;this.setPointersPositions(M);const nt=this._getTargetShape(Z),ot=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;nt&&ot?(nt._fireAndBubble(H.pointerout,{evt:M}),nt._fireAndBubble(H.pointerleave,{evt:M}),this._fire(H.pointerleave,{evt:M,target:this,currentTarget:this}),this[Z+"targetShape"]=null):ot&&(this._fire(H.pointerleave,{evt:M,target:this,currentTarget:this}),this._fire(H.pointerout,{evt:M,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(M){const H=W(M.type),Z=I(M.type);if(!H)return;this.setPointersPositions(M);let nt=!1;this._changedPointerPositions.forEach(ot=>{const E=this.getIntersection(ot);if(o.DD.justDragged=!1,s.Konva["_"+Z+"ListenClick"]=!0,!E||!E.isListening()){this[Z+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&E.setPointerCapture(ot.id),this[Z+"ClickStartShape"]=E,E._fireAndBubble(H.pointerdown,{evt:M,pointerId:ot.id}),nt=!0;const k=M.type.indexOf("touch")>=0;E.preventDefault()&&M.cancelable&&k&&M.preventDefault()}),nt||this._fire(H.pointerdown,{evt:M,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(M){const H=W(M.type),Z=I(M.type);if(!H||(s.Konva.isDragging()&&o.DD.node.preventDefault()&&M.cancelable&&M.preventDefault(),this.setPointersPositions(M),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const ot={};let E=!1;const k=this._getTargetShape(Z);this._changedPointerPositions.forEach(V=>{const z=l.getCapturedShape(V.id)||this.getIntersection(V),Y=V.id,j={evt:M,pointerId:Y},J=k!==z;if(J&&k&&(k._fireAndBubble(H.pointerout,{...j},z),k._fireAndBubble(H.pointerleave,{...j},z)),z){if(ot[z._id])return;ot[z._id]=!0}z&&z.isListening()?(E=!0,J&&(z._fireAndBubble(H.pointerover,{...j},k),z._fireAndBubble(H.pointerenter,{...j},k),this[Z+"targetShape"]=z),z._fireAndBubble(H.pointermove,{...j})):k&&(this._fire(H.pointerover,{evt:M,target:this,currentTarget:this,pointerId:Y}),this[Z+"targetShape"]=null)}),E||this._fire(H.pointermove,{evt:M,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(M){const H=W(M.type),Z=I(M.type);if(!H)return;this.setPointersPositions(M);const nt=this[Z+"ClickStartShape"],ot=this[Z+"ClickEndShape"],E={};let k=!1;this._changedPointerPositions.forEach(V=>{const z=l.getCapturedShape(V.id)||this.getIntersection(V);if(z){if(z.releaseCapture(V.id),E[z._id])return;E[z._id]=!0}const Y=V.id,j={evt:M,pointerId:Y};let J=!1;s.Konva["_"+Z+"InDblClickWindow"]?(J=!0,clearTimeout(this[Z+"DblTimeout"])):o.DD.justDragged||(s.Konva["_"+Z+"InDblClickWindow"]=!0,clearTimeout(this[Z+"DblTimeout"])),this[Z+"DblTimeout"]=setTimeout(function(){s.Konva["_"+Z+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),z&&z.isListening()?(k=!0,this[Z+"ClickEndShape"]=z,z._fireAndBubble(H.pointerup,{...j}),s.Konva["_"+Z+"ListenClick"]&&nt&&nt===z&&(z._fireAndBubble(H.pointerclick,{...j}),J&&ot&&ot===z&&z._fireAndBubble(H.pointerdblclick,{...j}))):(this[Z+"ClickEndShape"]=null,s.Konva["_"+Z+"ListenClick"]&&this._fire(H.pointerclick,{evt:M,target:this,currentTarget:this,pointerId:Y}),J&&this._fire(H.pointerdblclick,{evt:M,target:this,currentTarget:this,pointerId:Y}))}),k||this._fire(H.pointerup,{evt:M,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+Z+"ListenClick"]=!1,M.cancelable&&Z!=="touch"&&Z!=="pointer"&&M.preventDefault()}_contextmenu(M){this.setPointersPositions(M);const H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(G,{evt:M}):this._fire(G,{evt:M,target:this,currentTarget:this})}_wheel(M){this.setPointersPositions(M);const H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(b,{evt:M}):this._fire(b,{evt:M,target:this,currentTarget:this})}_pointercancel(M){this.setPointersPositions(M);const H=l.getCapturedShape(M.pointerId)||this.getIntersection(this.getPointerPosition());H&&H._fireAndBubble(v,l.createEvent(M)),l.releaseCapture(M.pointerId)}_lostpointercapture(M){l.releaseCapture(M.pointerId)}setPointersPositions(M){const H=this._getContentPosition();let Z=null,nt=null;M=M||window.event,M.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(M.touches,ot=>{this._pointerPositions.push({id:ot.identifier,x:(ot.clientX-H.left)/H.scaleX,y:(ot.clientY-H.top)/H.scaleY})}),Array.prototype.forEach.call(M.changedTouches||M.touches,ot=>{this._changedPointerPositions.push({id:ot.identifier,x:(ot.clientX-H.left)/H.scaleX,y:(ot.clientY-H.top)/H.scaleY})})):(Z=(M.clientX-H.left)/H.scaleX,nt=(M.clientY-H.top)/H.scaleY,this.pointerPos={x:Z,y:nt},this._pointerPositions=[{x:Z,y:nt,id:e.Util._getFirstPointerId(M)}],this._changedPointerPositions=[{x:Z,y:nt,id:e.Util._getFirstPointerId(M)}])}_setPointerPosition(M){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(M)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const M=this.content.getBoundingClientRect();return{top:M.top,left:M.left,scaleX:M.width/this.content.clientWidth||1,scaleY:M.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const M=this.container();if(!M)throw"Stage has no container. A container is required.";M.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),M.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(M){M.batchDraw()}),this}}t.Stage=it,it.prototype.nodeType=h,(0,a._registerNode)(it),i.Factory.addGetterSetter(it,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(q=>{q.batchDraw()})})}(Pr)),Pr}var si={},Rr={},jo;function Et(){return jo||(jo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=ut(),i=xt(),n=ft(),s=Rt(),r=gt(),o=ut(),a=zo(),l="hasShadow",h="shadowRGBA",d="patternImage",_="linearGradient",p="radialGradient";let u;function g(){return u||(u=i.Util.createCanvasElement().getContext("2d"),u)}t.shapes={};function y(w){const R=this.attrs.fillRule;R?w.fill(R):w.fill()}function S(w){w.stroke()}function x(w){const R=this.attrs.fillRule;R?w.fill(R):w.fill()}function f(w){w.stroke()}function c(){this._clearCache(l)}function m(){this._clearCache(h)}function v(){this._clearCache(d)}function T(){this._clearCache(_)}function O(){this._clearCache(p)}class C extends s.Node{constructor(R){super(R);let N;for(;N=i.Util.getRandomColor(),!(N&&!(N in t.shapes)););this.colorKey=N,t.shapes[N]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const N=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(N&&N.setTransform){const G=new i.Transform;G.translate(this.fillPatternX(),this.fillPatternY()),G.rotate(e.Konva.getAngle(this.fillPatternRotation())),G.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),G.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const D=G.getMatrix(),U=typeof DOMMatrix>"u"?{a:D[0],b:D[1],c:D[2],d:D[3],e:D[4],f:D[5]}:new DOMMatrix(D);N.setTransform(U)}return N}}_getLinearGradient(){return this._getCache(_,this.__getLinearGradient)}__getLinearGradient(){const R=this.fillLinearGradientColorStops();if(R){const N=g(),G=this.fillLinearGradientStartPoint(),D=this.fillLinearGradientEndPoint(),U=N.createLinearGradient(G.x,G.y,D.x,D.y);for(let L=0;L<R.length;L+=2)U.addColorStop(R[L],R[L+1]);return U}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){const R=this.fillRadialGradientColorStops();if(R){const N=g(),G=this.fillRadialGradientStartPoint(),D=this.fillRadialGradientEndPoint(),U=N.createRadialGradient(G.x,G.y,this.fillRadialGradientStartRadius(),D.x,D.y,this.fillRadialGradientEndRadius());for(let L=0;L<R.length;L+=2)U.addColorStop(R[L],R[L+1]);return U}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const R=i.Util.colorToRGBA(this.shadowColor());if(R)return"rgba("+R.r+","+R.g+","+R.b+","+R.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const R=this.hitStrokeWidth();return R==="auto"?this.hasStroke():this.strokeEnabled()&&!!R}intersects(R){const N=this.getStage();if(!N)return!1;const G=N.bufferHitCanvas;return G.getContext().clear(),this.drawHit(G,void 0,!0),G.context.getImageData(Math.round(R.x),Math.round(R.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(R){var N;if(!((N=this.attrs.perfectDrawEnabled)!==null&&N!==void 0?N:!0))return!1;const D=R||this.hasFill(),U=this.hasStroke(),L=this.getAbsoluteOpacity()!==1;if(D&&U&&L)return!0;const K=this.hasShadow(),b=this.shadowForStrokeEnabled();return!!(D&&U&&K&&b)}setStrokeHitEnabled(R){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),R?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const R=this.size();return{x:this._centroid?-R.width/2:0,y:this._centroid?-R.height/2:0,width:R.width,height:R.height}}getClientRect(R={}){let N=!1,G=this.getParent();for(;G;){if(G.isCached()){N=!0;break}G=G.getParent()}const D=R.skipTransform,U=R.relativeTo||N&&this.getStage()||void 0,L=this.getSelfRect(),b=!R.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,P=L.width+b,F=L.height+b,A=!R.skipShadow&&this.hasShadow(),I=A?this.shadowOffsetX():0,W=A?this.shadowOffsetY():0,B=P+Math.abs(I),X=F+Math.abs(W),it=A&&this.shadowBlur()||0,q=B+it*2,M=X+it*2,H={width:q,height:M,x:-(b/2+it)+Math.min(I,0)+L.x,y:-(b/2+it)+Math.min(W,0)+L.y};return D?H:this._transformedRect(H,U)}drawScene(R,N,G){const D=this.getLayer(),U=R||D.getCanvas(),L=U.getContext(),K=this._getCanvasCache(),b=this.getSceneFunc(),P=this.hasShadow();let F;const A=N===this;if(!this.isVisible()&&!A)return this;if(K){L.save();const I=this.getAbsoluteTransform(N).getMatrix();return L.transform(I[0],I[1],I[2],I[3],I[4],I[5]),this._drawCachedSceneCanvas(L),L.restore(),this}if(!b)return this;if(L.save(),this._useBufferCanvas()){F=this.getStage();const I=G||F.bufferCanvas,W=I.getContext();W.clear(),W.save(),W._applyLineJoin(this);const B=this.getAbsoluteTransform(N).getMatrix();W.transform(B[0],B[1],B[2],B[3],B[4],B[5]),b.call(this,W,this),W.restore();const X=I.pixelRatio;P&&L._applyShadow(this),L._applyOpacity(this),L._applyGlobalCompositeOperation(this),L.drawImage(I._canvas,I.x||0,I.y||0,I.width/X,I.height/X)}else{if(L._applyLineJoin(this),!A){const I=this.getAbsoluteTransform(N).getMatrix();L.transform(I[0],I[1],I[2],I[3],I[4],I[5]),L._applyOpacity(this),L._applyGlobalCompositeOperation(this)}P&&L._applyShadow(this),b.call(this,L,this)}return L.restore(),this}drawHit(R,N,G=!1){if(!this.shouldDrawHit(N,G))return this;const D=this.getLayer(),U=R||D.hitCanvas,L=U&&U.getContext(),K=this.hitFunc()||this.sceneFunc(),b=this._getCanvasCache(),P=b&&b.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),P){L.save();const A=this.getAbsoluteTransform(N).getMatrix();return L.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedHitCanvas(L),L.restore(),this}if(!K)return this;if(L.save(),L._applyLineJoin(this),!(this===N)){const A=this.getAbsoluteTransform(N).getMatrix();L.transform(A[0],A[1],A[2],A[3],A[4],A[5])}return K.call(this,L,this),L.restore(),this}drawHitFromCache(R=0){const N=this._getCanvasCache(),G=this._getCachedSceneCanvas(),D=N.hit,U=D.getContext(),L=D.getWidth(),K=D.getHeight();U.clear(),U.drawImage(G._canvas,0,0,L,K);try{const b=U.getImageData(0,0,L,K),P=b.data,F=P.length,A=i.Util._hexToRgb(this.colorKey);for(let I=0;I<F;I+=4)P[I+3]>R?(P[I]=A.r,P[I+1]=A.g,P[I+2]=A.b,P[I+3]=255):P[I+3]=0;U.putImageData(b,0,0)}catch(b){i.Util.error("Unable to draw hit graph from cached scene canvas. "+b.message)}return this}hasPointerCapture(R){return a.hasPointerCapture(R,this)}setPointerCapture(R){a.setPointerCapture(R,this)}releaseCapture(R){a.releaseCapture(R,this)}}t.Shape=C,C.prototype._fillFunc=y,C.prototype._strokeFunc=S,C.prototype._fillFuncHit=x,C.prototype._strokeFuncHit=f,C.prototype._centroid=!1,C.prototype.nodeType="Shape",(0,o._registerNode)(C),C.prototype.eventListeners={},C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",c),C.prototype.on.call(C.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",v),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",T),C.prototype.on.call(C.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",O),n.Factory.addGetterSetter(C,"stroke",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(C,"strokeWidth",2,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(C,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(C,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(C,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(C,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(C,"lineJoin"),n.Factory.addGetterSetter(C,"lineCap"),n.Factory.addGetterSetter(C,"sceneFunc"),n.Factory.addGetterSetter(C,"hitFunc"),n.Factory.addGetterSetter(C,"dash"),n.Factory.addGetterSetter(C,"dashOffset",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"shadowColor",void 0,(0,r.getStringValidator)()),n.Factory.addGetterSetter(C,"shadowBlur",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"shadowOpacity",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(C,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(C,"shadowOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"shadowOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternImage"),n.Factory.addGetterSetter(C,"fill",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(C,"fillPatternX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(C,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(C,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(C,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(C,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(C,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(C,"fillEnabled",!0),n.Factory.addGetterSetter(C,"strokeEnabled",!0),n.Factory.addGetterSetter(C,"shadowEnabled",!0),n.Factory.addGetterSetter(C,"dashEnabled",!0),n.Factory.addGetterSetter(C,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(C,"fillPriority","color"),n.Factory.addComponentsGetterSetter(C,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(C,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(C,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(C,"fillPatternScaleX",1,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(C,"fillPatternScaleY",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(C,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(C,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(C,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(C,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(C,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(C,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(C,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(C,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(C,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(C,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(C,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(C,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(C,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(C,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(C,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(C,"fillPatternRotation",0),n.Factory.addGetterSetter(C,"fillRule",void 0,(0,r.getStringValidator)()),n.Factory.backCompat(C,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Rr)),Rr}var Yo;function Xo(){if(Yo)return si;Yo=1,Object.defineProperty(si,"__esModule",{value:!0}),si.Layer=void 0;const t=xt(),e=Rn(),i=Rt(),n=ft(),s=Pn(),r=gt(),o=Et(),a=ut(),l="#",h="beforeDraw",d="draw",_=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=_.length;let u=class extends e.Container{constructor(y){super(y),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),y<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[y+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const S=this.getStage();return!S||!S.content?!1:(S.content.removeChild(this.getNativeCanvasElement()),this.index<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[this.index+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const S=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),S[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),y&&y.parentNode&&t.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:S}){return this.canvas.setSize(y,S),this.hitCanvas.setSize(y,S),this._setSmoothEnabled(),this}_validateAdd(y){const S=y.getType();S!=="Group"&&S!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let S=1,x=!1;for(;;){for(let f=0;f<p;f++){const c=_[f],m=this._getIntersection({x:y.x+c.x*S,y:y.y+c.y*S}),v=m.shape;if(v)return v;if(x=!!m.antialiased,!m.antialiased)break}if(x)S+=1;else return null}}_getIntersection(y){const S=this.hitCanvas.pixelRatio,x=this.hitCanvas.context.getImageData(Math.round(y.x*S),Math.round(y.y*S),1,1).data,f=x[3];if(f===255){const c=t.Util._rgbToHex(x[0],x[1],x[2]),m=o.shapes[l+c];return m?{shape:m}:{antialiased:!0}}else if(f>0)return{antialiased:!0};return{}}drawScene(y,S,x){const f=this.getLayer(),c=y||f&&f.getCanvas();return this._fire(h,{node:this}),this.clearBeforeDraw()&&c.getContext().clear(),e.Container.prototype.drawScene.call(this,c,S,x),this._fire(d,{node:this}),this}drawHit(y,S){const x=this.getLayer(),f=y||x&&x.hitCanvas;return x&&x.clearBeforeDraw()&&x.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,f,S),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return si.Layer=u,u.prototype.nodeType="Layer",(0,a._registerNode)(u),n.Factory.addGetterSetter(u,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(u,"clearBeforeDraw",!0),n.Factory.addGetterSetter(u,"hitGraphEnabled",!0,(0,r.getBooleanValidator)()),si}var oi={},$o;function Oh(){if($o)return oi;$o=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.FastLayer=void 0;const t=xt(),e=Xo(),i=ut();let n=class extends e.Layer{constructor(r){super(r),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return oi.FastLayer=n,n.prototype.nodeType="FastLayer",(0,i._registerNode)(n),oi}var ai={},Jo;function Tr(){if(Jo)return ai;Jo=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Group=void 0;const t=xt(),e=Rn(),i=ut();let n=class extends e.Container{_validateAdd(r){const o=r.getType();o!=="Group"&&o!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return ai.Group=n,n.prototype.nodeType="Group",(0,i._registerNode)(n),ai}var li={},Qo;function Er(){if(Qo)return li;Qo=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Animation=void 0;const t=ut(),e=xt(),i=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();let n=class Le{constructor(r,o){this.id=Le.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=r,this.setLayers(o)}setLayers(r){let o=[];return r&&(o=Array.isArray(r)?r:[r]),this.layers=o,this}getLayers(){return this.layers}addLayer(r){const o=this.layers,a=o.length;for(let l=0;l<a;l++)if(o[l]._id===r._id)return!1;return this.layers.push(r),!0}isRunning(){const o=Le.animations,a=o.length;for(let l=0;l<a;l++)if(o[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),Le._addAnimation(this),this}stop(){return Le._removeAnimation(this),this}_updateFrameObject(r){this.frame.timeDiff=r-this.frame.lastTime,this.frame.lastTime=r,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(r){this.animations.push(r),this._handleAnimation()}static _removeAnimation(r){const o=r.id,a=this.animations,l=a.length;for(let h=0;h<l;h++)if(a[h].id===o){this.animations.splice(h,1);break}}static _runFrames(){const r={},o=this.animations;for(let a=0;a<o.length;a++){const l=o[a],h=l.layers,d=l.func;l._updateFrameObject(i());const _=h.length;let p;if(d?p=d.call(l,l.frame)!==!1:p=!0,!!p)for(let u=0;u<_;u++){const g=h[u];g._id!==void 0&&(r[g._id]=g)}}for(const a in r)r.hasOwnProperty(a)&&r[a].batchDraw()}static _animationLoop(){const r=Le;r.animations.length?(r._runFrames(),e.Util.requestAnimFrame(r._animationLoop)):r.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return li.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,li}var Ar={},Zo;function Ih(){return Zo||(Zo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=xt(),i=Er(),n=Rt(),s=ut(),r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,l=3,h=["fill","stroke","shadowColor"];let d=0;class _{constructor(g,y,S,x,f,c,m){this.prop=g,this.propFunc=y,this.begin=x,this._pos=x,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=m,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=S,this._change=f-this.begin,this.pause()}fire(g){const y=this[g];y&&y()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===a?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(g){const y=this,S=g.node,x=S._id,f=g.easing||t.Easings.Linear,c=!!g.yoyo;let m,v;typeof g.duration>"u"?m=.3:g.duration===0?m=.001:m=g.duration,this.node=S,this._id=d++;const T=S.getLayer()||(S instanceof s.Konva.Stage?S.getLayers():null);T||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){y.tween.onEnterFrame()},T),this.tween=new _(v,function(O){y._tweenFunc(O)},f,0,1,m*1e3,c),this._addListeners(),p.attrs[x]||(p.attrs[x]={}),p.attrs[x][this._id]||(p.attrs[x][this._id]={}),p.tweens[x]||(p.tweens[x]={});for(v in g)r[v]===void 0&&this._addAttr(v,g[v]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,y){const S=this.node,x=S._id;let f,c,m,v,T;const O=p.tweens[x][g];O&&delete p.attrs[x][O][g];let C=S.getAttr(g);if(e.Util._isArray(y))if(f=[],c=Math.max(y.length,C.length),g==="points"&&y.length!==C.length&&(y.length>C.length?(v=C,C=e.Util._prepareArrayForTween(C,y,S.closed())):(m=y,y=e.Util._prepareArrayForTween(y,C,S.closed()))),g.indexOf("fill")===0)for(let w=0;w<c;w++)if(w%2===0)f.push(y[w]-C[w]);else{const R=e.Util.colorToRGBA(C[w]);T=e.Util.colorToRGBA(y[w]),C[w]=R,f.push({r:T.r-R.r,g:T.g-R.g,b:T.b-R.b,a:T.a-R.a})}else for(let w=0;w<c;w++)f.push(y[w]-C[w]);else h.indexOf(g)!==-1?(C=e.Util.colorToRGBA(C),T=e.Util.colorToRGBA(y),f={r:T.r-C.r,g:T.g-C.g,b:T.b-C.b,a:T.a-C.a}):f=y-C;p.attrs[x][this._id][g]={start:C,diff:f,end:y,trueEnd:m,trueStart:v},p.tweens[x][g]=this._id}_tweenFunc(g){const y=this.node,S=p.attrs[y._id][this._id];let x,f,c,m,v,T,O,C;for(x in S){if(f=S[x],c=f.start,m=f.diff,C=f.end,e.Util._isArray(c))if(v=[],O=Math.max(c.length,C.length),x.indexOf("fill")===0)for(T=0;T<O;T++)T%2===0?v.push((c[T]||0)+m[T]*g):v.push("rgba("+Math.round(c[T].r+m[T].r*g)+","+Math.round(c[T].g+m[T].g*g)+","+Math.round(c[T].b+m[T].b*g)+","+(c[T].a+m[T].a*g)+")");else for(T=0;T<O;T++)v.push((c[T]||0)+m[T]*g);else h.indexOf(x)!==-1?v="rgba("+Math.round(c.r+m.r*g)+","+Math.round(c.g+m.g*g)+","+Math.round(c.b+m.b*g)+","+(c.a+m.a*g)+")":v=c+m*g;y.setAttr(x,v)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueEnd&&g.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,y=p.attrs[g._id][this._id];y.points&&y.points.trueStart&&g.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,y=this._id,S=p.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const x in S)delete p.tweens[g][x];delete p.attrs[g][y],Object.keys(p.tweens[g]).length===0&&delete p.tweens[g],Object.keys(p.attrs[g]).length===0&&delete p.attrs[g]}}t.Tween=p,p.attrs={},p.tweens={},n.Node.prototype.to=function(u){const g=u.onFinish;u.node=this,u.onFinish=function(){this.destroy(),g&&g()},new p(u).play()},t.Easings={BackEaseIn(u,g,y,S){return y*(u/=S)*u*(2.70158*u-1.70158)+g},BackEaseOut(u,g,y,S){return y*((u=u/S-1)*u*(2.70158*u+1.70158)+1)+g},BackEaseInOut(u,g,y,S){let x=1.70158;return(u/=S/2)<1?y/2*(u*u*(((x*=1.525)+1)*u-x))+g:y/2*((u-=2)*u*(((x*=1.525)+1)*u+x)+2)+g},ElasticEaseIn(u,g,y,S,x,f){let c=0;return u===0?g:(u/=S)===1?g+y:(f||(f=S*.3),!x||x<Math.abs(y)?(x=y,c=f/4):c=f/(2*Math.PI)*Math.asin(y/x),-(x*Math.pow(2,10*(u-=1))*Math.sin((u*S-c)*(2*Math.PI)/f))+g)},ElasticEaseOut(u,g,y,S,x,f){let c=0;return u===0?g:(u/=S)===1?g+y:(f||(f=S*.3),!x||x<Math.abs(y)?(x=y,c=f/4):c=f/(2*Math.PI)*Math.asin(y/x),x*Math.pow(2,-10*u)*Math.sin((u*S-c)*(2*Math.PI)/f)+y+g)},ElasticEaseInOut(u,g,y,S,x,f){let c=0;return u===0?g:(u/=S/2)===2?g+y:(f||(f=S*.44999999999999996),!x||x<Math.abs(y)?(x=y,c=f/4):c=f/(2*Math.PI)*Math.asin(y/x),u<1?-.5*(x*Math.pow(2,10*(u-=1))*Math.sin((u*S-c)*(2*Math.PI)/f))+g:x*Math.pow(2,-10*(u-=1))*Math.sin((u*S-c)*(2*Math.PI)/f)*.5+y+g)},BounceEaseOut(u,g,y,S){return(u/=S)<.36363636363636365?y*(7.5625*u*u)+g:u<.7272727272727273?y*(7.5625*(u-=.5454545454545454)*u+.75)+g:u<.9090909090909091?y*(7.5625*(u-=.8181818181818182)*u+.9375)+g:y*(7.5625*(u-=.9545454545454546)*u+.984375)+g},BounceEaseIn(u,g,y,S){return y-t.Easings.BounceEaseOut(S-u,0,y,S)+g},BounceEaseInOut(u,g,y,S){return u<S/2?t.Easings.BounceEaseIn(u*2,0,y,S)*.5+g:t.Easings.BounceEaseOut(u*2-S,0,y,S)*.5+y*.5+g},EaseIn(u,g,y,S){return y*(u/=S)*u+g},EaseOut(u,g,y,S){return-y*(u/=S)*(u-2)+g},EaseInOut(u,g,y,S){return(u/=S/2)<1?y/2*u*u+g:-y/2*(--u*(u-2)-1)+g},StrongEaseIn(u,g,y,S){return y*(u/=S)*u*u*u*u+g},StrongEaseOut(u,g,y,S){return y*((u=u/S-1)*u*u*u*u+1)+g},StrongEaseInOut(u,g,y,S){return(u/=S/2)<1?y/2*u*u*u*u*u+g:y/2*((u-=2)*u*u*u*u+2)+g},Linear(u,g,y,S){return y*u/S+g}}}(Ar)),Ar}var ta;function Dh(){return ta||(ta=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=ut(),i=xt(),n=Rt(),s=Rn(),r=kh(),o=Xo(),a=Oh(),l=Tr(),h=wr(),d=Et(),_=Er(),p=Ih(),u=Lo(),g=Pn();t.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:n.Node,Container:s.Container,Stage:r.Stage,stages:r.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:l.Group,DD:h.DD,Shape:d.Shape,shapes:d.shapes,Animation:_.Animation,Tween:p.Tween,Easings:p.Easings,Context:u.Context,Canvas:g.Canvas}),t.default=t.Konva}(br)),br}var ci={},ea;function Lh(){if(ea)return ci;ea=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Arc=void 0;const t=ft(),e=Et(),i=ut(),n=gt(),s=ut();let r=class extends e.Shape{_sceneFunc(a){const l=i.Konva.getAngle(this.angle()),h=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,l,h),a.arc(0,0,this.innerRadius(),l,0,!h),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){const a=this.innerRadius(),l=this.outerRadius(),h=this.clockwise(),d=i.Konva.getAngle(h?360-this.angle():this.angle()),_=Math.cos(Math.min(d,Math.PI)),p=1,u=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),g=Math.sin(Math.min(d,Math.PI/2)),y=_*(_>0?a:l),S=p*l,x=u*(u>0?a:l),f=g*(g>0?l:a);return{x:y,y:h?-1*f:x,width:S-y,height:f-x}}};return ci.Arc=r,r.prototype._centroid=!0,r.prototype.className="Arc",r.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(r),t.Factory.addGetterSetter(r,"innerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"angle",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"clockwise",!1,(0,n.getBooleanValidator)()),ci}var hi={},di={},ia;function na(){if(ia)return di;ia=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Line=void 0;const t=ft(),e=ut(),i=Et(),n=gt();function s(a,l,h,d,_,p,u){const g=Math.sqrt(Math.pow(h-a,2)+Math.pow(d-l,2)),y=Math.sqrt(Math.pow(_-h,2)+Math.pow(p-d,2)),S=u*g/(g+y),x=u*y/(g+y),f=h-S*(_-a),c=d-S*(p-l),m=h+x*(_-a),v=d+x*(p-l);return[f,c,m,v]}function r(a,l){const h=a.length,d=[];for(let _=2;_<h-2;_+=2){const p=s(a[_-2],a[_-1],a[_],a[_+1],a[_+2],a[_+3],l);isNaN(p[0])||(d.push(p[0]),d.push(p[1]),d.push(a[_]),d.push(a[_+1]),d.push(p[2]),d.push(p[3]))}return d}let o=class extends i.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){const h=this.points(),d=h.length,_=this.tension(),p=this.closed(),u=this.bezier();if(!d)return;let g=0;if(l.beginPath(),l.moveTo(h[0],h[1]),_!==0&&d>4){const y=this.getTensionPoints(),S=y.length;for(g=p?0:4,p||l.quadraticCurveTo(y[0],y[1],y[2],y[3]);g<S-2;)l.bezierCurveTo(y[g++],y[g++],y[g++],y[g++],y[g++],y[g++]);p||l.quadraticCurveTo(y[S-2],y[S-1],h[d-2],h[d-1])}else if(u)for(g=2;g<d;)l.bezierCurveTo(h[g++],h[g++],h[g++],h[g++],h[g++],h[g++]);else for(g=2;g<d;g+=2)l.lineTo(h[g],h[g+1]);p?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():r(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),h=l.length,d=this.tension(),_=s(l[h-2],l[h-1],l[0],l[1],l[2],l[3],d),p=s(l[h-4],l[h-3],l[h-2],l[h-1],l[0],l[1],d),u=r(l,d);return[_[2],_[3]].concat(u).concat([p[0],p[1],l[h-2],l[h-1],p[2],p[3],_[0],_[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let h=l[0],d=l[0],_=l[1],p=l[1],u,g;for(let y=0;y<l.length/2;y++)u=l[y*2],g=l[y*2+1],h=Math.min(h,u),d=Math.max(d,u),_=Math.min(_,g),p=Math.max(p,g);return{x:h,y:_,width:d-h,height:p-_}}};return di.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(o),t.Factory.addGetterSetter(o,"closed",!1),t.Factory.addGetterSetter(o,"bezier",!1),t.Factory.addGetterSetter(o,"tension",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(o,"points",[],(0,n.getNumberArrayValidator)()),di}var ui={},Mr={},ra;function Gh(){return ra||(ra=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,a,l)=>{let h,d;const p=l/2;h=0;for(let u=0;u<20;u++)d=p*t.tValues[20][u]+p,h+=t.cValues[20][u]*n(o,a,d);return p*h};t.getCubicArcLength=e;const i=(o,a,l)=>{l===void 0&&(l=1);const h=o[0]-2*o[1]+o[2],d=a[0]-2*a[1]+a[2],_=2*o[1]-2*o[0],p=2*a[1]-2*a[0],u=4*(h*h+d*d),g=4*(h*_+d*p),y=_*_+p*p;if(u===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const S=g/(2*u),x=y/u,f=l+S,c=x-S*S,m=f*f+c>0?Math.sqrt(f*f+c):0,v=S*S+c>0?Math.sqrt(S*S+c):0,T=S+Math.sqrt(S*S+c)!==0?c*Math.log(Math.abs((f+m)/(S+v))):0;return Math.sqrt(u)/2*(f*m-S*v+T)};t.getQuadraticArcLength=i;function n(o,a,l){const h=s(1,l,o),d=s(1,l,a),_=h*h+d*d;return Math.sqrt(_)}const s=(o,a,l)=>{const h=l.length-1;let d,_;if(h===0)return 0;if(o===0){_=0;for(let p=0;p<=h;p++)_+=t.binomialCoefficients[h][p]*Math.pow(1-a,h-p)*Math.pow(a,p)*l[p];return _}else{d=new Array(h);for(let p=0;p<h;p++)d[p]=h*(l[p+1]-l[p]);return s(o-1,a,d)}},r=(o,a,l)=>{let h=1,d=o/a,_=(o-l(d))/a,p=0;for(;h>.001;){const u=l(d+_),g=Math.abs(o-u)/a;if(g<h)h=g,d+=_;else{const y=l(d-_),S=Math.abs(o-y)/a;S<h?(h=S,d-=_):_/=2}if(p++,p>500)break}return d};t.t2length=r}(Mr)),Mr}var sa;function Fr(){if(sa)return ui;sa=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Path=void 0;const t=ft(),e=ut(),i=Et(),n=Gh();let s=class Bt extends i.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Bt.parsePathData(this.data()),this.pathLength=Bt.getPathLength(this.dataArray)}_sceneFunc(o){const a=this.dataArray;o.beginPath();let l=!1;for(let h=0;h<a.length;h++){const d=a[h].command,_=a[h].points;switch(d){case"L":o.lineTo(_[0],_[1]);break;case"M":o.moveTo(_[0],_[1]);break;case"C":o.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]);break;case"Q":o.quadraticCurveTo(_[0],_[1],_[2],_[3]);break;case"A":const p=_[0],u=_[1],g=_[2],y=_[3],S=_[4],x=_[5],f=_[6],c=_[7],m=g>y?g:y,v=g>y?1:g/y,T=g>y?y/g:1;o.translate(p,u),o.rotate(f),o.scale(v,T),o.arc(0,0,m,S,S+x,1-c),o.scale(1/v,1/T),o.rotate(-f),o.translate(-p,-u);break;case"z":l=!0,o.closePath();break}}!l&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(u){if(u.command==="A"){const g=u.points[4],y=u.points[5],S=u.points[4]+y;let x=Math.PI/180;if(Math.abs(g-S)<x&&(x=Math.abs(g-S)),y<0)for(let f=g-x;f>S;f-=x){const c=Bt.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],f,0);o.push(c.x,c.y)}else for(let f=g+x;f<S;f+=x){const c=Bt.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],f,0);o.push(c.x,c.y)}}else if(u.command==="C")for(let g=0;g<=1;g+=.01){const y=Bt.getPointOnCubicBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);o.push(y.x,y.y)}else o=o.concat(u.points)});let a=o[0],l=o[0],h=o[1],d=o[1],_,p;for(let u=0;u<o.length/2;u++)_=o[u*2],p=o[u*2+1],isNaN(_)||(a=Math.min(a,_),l=Math.max(l,_)),isNaN(p)||(h=Math.min(h,p),d=Math.max(d,p));return{x:a,y:h,width:l-a,height:d-h}}getLength(){return this.pathLength}getPointAtLength(o){return Bt.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,a,l,h){return Math.sqrt((l-o)*(l-o)+(h-a)*(h-a))}static getPathLength(o){let a=0;for(let l=0;l<o.length;++l)a+=o[l].pathLength;return a}static getPointAtLengthOfDataArray(o,a){let l,h=0,d=a.length;if(!d)return null;for(;h<d&&o>a[h].pathLength;)o-=a[h].pathLength,++h;if(h===d)return l=a[h-1].points.slice(-2),{x:l[0],y:l[1]};if(o<.01)return a[h].command==="M"?(l=a[h].points.slice(0,2),{x:l[0],y:l[1]}):{x:a[h].start.x,y:a[h].start.y};const _=a[h],p=_.points;switch(_.command){case"L":return Bt.getPointOnLine(o,_.start.x,_.start.y,p[0],p[1]);case"C":return Bt.getPointOnCubicBezier((0,n.t2length)(o,Bt.getPathLength(a),m=>(0,n.getCubicArcLength)([_.start.x,p[0],p[2],p[4]],[_.start.y,p[1],p[3],p[5]],m)),_.start.x,_.start.y,p[0],p[1],p[2],p[3],p[4],p[5]);case"Q":return Bt.getPointOnQuadraticBezier((0,n.t2length)(o,Bt.getPathLength(a),m=>(0,n.getQuadraticArcLength)([_.start.x,p[0],p[2]],[_.start.y,p[1],p[3]],m)),_.start.x,_.start.y,p[0],p[1],p[2],p[3]);case"A":const u=p[0],g=p[1],y=p[2],S=p[3],x=p[5],f=p[6];let c=p[4];return c+=x*o/_.pathLength,Bt.getPointOnEllipticalArc(u,g,y,S,c,f)}return null}static getPointOnLine(o,a,l,h,d,_,p){_=_??a,p=p??l;const u=this.getLineLength(a,l,h,d);if(u<1e-10)return{x:a,y:l};if(h===a)return{x:_,y:p+(d>l?o:-o)};const g=(d-l)/(h-a),y=Math.sqrt(o*o/(1+g*g))*(h<a?-1:1),S=g*y;if(Math.abs(p-l-g*(_-a))<1e-10)return{x:_+y,y:p+S};const x=((_-a)*(h-a)+(p-l)*(d-l))/(u*u),f=a+x*(h-a),c=l+x*(d-l),m=this.getLineLength(_,p,f,c),v=Math.sqrt(o*o-m*m),T=Math.sqrt(v*v/(1+g*g))*(h<a?-1:1),O=g*T;return{x:f+T,y:c+O}}static getPointOnCubicBezier(o,a,l,h,d,_,p,u,g){function y(v){return v*v*v}function S(v){return 3*v*v*(1-v)}function x(v){return 3*v*(1-v)*(1-v)}function f(v){return(1-v)*(1-v)*(1-v)}const c=u*y(o)+_*S(o)+h*x(o)+a*f(o),m=g*y(o)+p*S(o)+d*x(o)+l*f(o);return{x:c,y:m}}static getPointOnQuadraticBezier(o,a,l,h,d,_,p){function u(f){return f*f}function g(f){return 2*f*(1-f)}function y(f){return(1-f)*(1-f)}const S=_*u(o)+h*g(o)+a*y(o),x=p*u(o)+d*g(o)+l*y(o);return{x:S,y:x}}static getPointOnEllipticalArc(o,a,l,h,d,_){const p=Math.cos(_),u=Math.sin(_),g={x:l*Math.cos(d),y:h*Math.sin(d)};return{x:o+(g.x*p-g.y*u),y:a+(g.x*u+g.y*p)}}static parsePathData(o){if(!o)return[];let a=o;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(let S=0;S<l.length;S++)a=a.replace(new RegExp(l[S],"g"),"|"+l[S]);const h=a.split("|"),d=[],_=[];let p=0,u=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let S=1;S<h.length;S++){let x=h[S],f=x.charAt(0);for(x=x.slice(1),_.length=0;y=g.exec(x);)_.push(y[0]);const c=[];for(let m=0,v=_.length;m<v;m++){if(_[m]==="00"){c.push(0,0);continue}const T=parseFloat(_[m]);isNaN(T)?c.push(0):c.push(T)}for(;c.length>0&&!isNaN(c[0]);){let m="",v=[];const T=p,O=u;let C,w,R,N,G,D,U,L,K,b;switch(f){case"l":p+=c.shift(),u+=c.shift(),m="L",v.push(p,u);break;case"L":p=c.shift(),u=c.shift(),v.push(p,u);break;case"m":const P=c.shift(),F=c.shift();if(p+=P,u+=F,m="M",d.length>2&&d[d.length-1].command==="z"){for(let A=d.length-2;A>=0;A--)if(d[A].command==="M"){p=d[A].points[0]+P,u=d[A].points[1]+F;break}}v.push(p,u),f="l";break;case"M":p=c.shift(),u=c.shift(),m="M",v.push(p,u),f="L";break;case"h":p+=c.shift(),m="L",v.push(p,u);break;case"H":p=c.shift(),m="L",v.push(p,u);break;case"v":u+=c.shift(),m="L",v.push(p,u);break;case"V":u=c.shift(),m="L",v.push(p,u);break;case"C":v.push(c.shift(),c.shift(),c.shift(),c.shift()),p=c.shift(),u=c.shift(),v.push(p,u);break;case"c":v.push(p+c.shift(),u+c.shift(),p+c.shift(),u+c.shift()),p+=c.shift(),u+=c.shift(),m="C",v.push(p,u);break;case"S":w=p,R=u,C=d[d.length-1],C.command==="C"&&(w=p+(p-C.points[2]),R=u+(u-C.points[3])),v.push(w,R,c.shift(),c.shift()),p=c.shift(),u=c.shift(),m="C",v.push(p,u);break;case"s":w=p,R=u,C=d[d.length-1],C.command==="C"&&(w=p+(p-C.points[2]),R=u+(u-C.points[3])),v.push(w,R,p+c.shift(),u+c.shift()),p+=c.shift(),u+=c.shift(),m="C",v.push(p,u);break;case"Q":v.push(c.shift(),c.shift()),p=c.shift(),u=c.shift(),v.push(p,u);break;case"q":v.push(p+c.shift(),u+c.shift()),p+=c.shift(),u+=c.shift(),m="Q",v.push(p,u);break;case"T":w=p,R=u,C=d[d.length-1],C.command==="Q"&&(w=p+(p-C.points[0]),R=u+(u-C.points[1])),p=c.shift(),u=c.shift(),m="Q",v.push(w,R,p,u);break;case"t":w=p,R=u,C=d[d.length-1],C.command==="Q"&&(w=p+(p-C.points[0]),R=u+(u-C.points[1])),p+=c.shift(),u+=c.shift(),m="Q",v.push(w,R,p,u);break;case"A":N=c.shift(),G=c.shift(),D=c.shift(),U=c.shift(),L=c.shift(),K=p,b=u,p=c.shift(),u=c.shift(),m="A",v=this.convertEndpointToCenterParameterization(K,b,p,u,U,L,N,G,D);break;case"a":N=c.shift(),G=c.shift(),D=c.shift(),U=c.shift(),L=c.shift(),K=p,b=u,p+=c.shift(),u+=c.shift(),m="A",v=this.convertEndpointToCenterParameterization(K,b,p,u,U,L,N,G,D);break}d.push({command:m||f,points:v,start:{x:T,y:O},pathLength:this.calcLength(T,O,m||f,v)})}(f==="z"||f==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(o,a,l,h){let d,_,p,u;const g=Bt;switch(l){case"L":return g.getLineLength(o,a,h[0],h[1]);case"C":return(0,n.getCubicArcLength)([o,h[0],h[2],h[4]],[a,h[1],h[3],h[5]],1);case"Q":return(0,n.getQuadraticArcLength)([o,h[0],h[2]],[a,h[1],h[3]],1);case"A":d=0;const y=h[4],S=h[5],x=h[4]+S;let f=Math.PI/180;if(Math.abs(y-x)<f&&(f=Math.abs(y-x)),_=g.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],y,0),S<0)for(u=y-f;u>x;u-=f)p=g.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],u,0),d+=g.getLineLength(_.x,_.y,p.x,p.y),_=p;else for(u=y+f;u<x;u+=f)p=g.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],u,0),d+=g.getLineLength(_.x,_.y,p.x,p.y),_=p;return p=g.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],x,0),d+=g.getLineLength(_.x,_.y,p.x,p.y),d}return 0}static convertEndpointToCenterParameterization(o,a,l,h,d,_,p,u,g){const y=g*(Math.PI/180),S=Math.cos(y)*(o-l)/2+Math.sin(y)*(a-h)/2,x=-1*Math.sin(y)*(o-l)/2+Math.cos(y)*(a-h)/2,f=S*S/(p*p)+x*x/(u*u);f>1&&(p*=Math.sqrt(f),u*=Math.sqrt(f));let c=Math.sqrt((p*p*(u*u)-p*p*(x*x)-u*u*(S*S))/(p*p*(x*x)+u*u*(S*S)));d===_&&(c*=-1),isNaN(c)&&(c=0);const m=c*p*x/u,v=c*-u*S/p,T=(o+l)/2+Math.cos(y)*m-Math.sin(y)*v,O=(a+h)/2+Math.sin(y)*m+Math.cos(y)*v,C=function(L){return Math.sqrt(L[0]*L[0]+L[1]*L[1])},w=function(L,K){return(L[0]*K[0]+L[1]*K[1])/(C(L)*C(K))},R=function(L,K){return(L[0]*K[1]<L[1]*K[0]?-1:1)*Math.acos(w(L,K))},N=R([1,0],[(S-m)/p,(x-v)/u]),G=[(S-m)/p,(x-v)/u],D=[(-1*S-m)/p,(-1*x-v)/u];let U=R(G,D);return w(G,D)<=-1&&(U=Math.PI),w(G,D)>=1&&(U=0),_===0&&U>0&&(U=U-2*Math.PI),_===1&&U<0&&(U=U+2*Math.PI),[T,O,p,u,N,U,y,_]}};return ui.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(s),t.Factory.addGetterSetter(s,"data"),ui}var oa;function Uh(){if(oa)return hi;oa=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Arrow=void 0;const t=ft(),e=na(),i=gt(),n=ut(),s=Fr();let r=class extends e.Line{_sceneFunc(a){super._sceneFunc(a);const l=Math.PI*2,h=this.points();let d=h;const _=this.tension()!==0&&h.length>4;_&&(d=this.getTensionPoints());const p=this.pointerLength(),u=h.length;let g,y;if(_){const f=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],h[u-2],h[u-1]],c=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",f),m=s.Path.getPointOnQuadraticBezier(Math.min(1,1-p/c),f[0],f[1],f[2],f[3],f[4],f[5]);g=h[u-2]-m.x,y=h[u-1]-m.y}else g=h[u-2]-h[u-4],y=h[u-1]-h[u-3];const S=(Math.atan2(y,g)+l)%l,x=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(h[u-2],h[u-1]),a.rotate(S),a.moveTo(0,0),a.lineTo(-p,x/2),a.lineTo(-p,-x/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(h[0],h[1]),_?(g=(d[0]+d[2])/2-h[0],y=(d[1]+d[3])/2-h[1]):(g=h[2]-h[0],y=h[3]-h[1]),a.rotate((Math.atan2(-y,-g)+l)%l),a.moveTo(0,0),a.lineTo(-p,x/2),a.lineTo(-p,-x/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const a=super.getSelfRect(),l=this.pointerWidth()/2;return{x:a.x,y:a.y-l,width:a.width,height:a.height+l*2}}};return hi.Arrow=r,r.prototype.className="Arrow",(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"pointerLength",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"pointerWidth",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"pointerAtBeginning",!1),t.Factory.addGetterSetter(r,"pointerAtEnding",!0),hi}var fi={},aa;function Bh(){if(aa)return fi;aa=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Circle=void 0;const t=ft(),e=Et(),i=gt(),n=ut();let s=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}};return fi.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,i.getNumberValidator)()),fi}var gi={},la;function Vh(){if(la)return gi;la=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Ellipse=void 0;const t=ft(),e=Et(),i=gt(),n=ut();let s=class extends e.Shape{_sceneFunc(o){const a=this.radiusX(),l=this.radiusY();o.beginPath(),o.save(),a!==l&&o.scale(1,l/a),o.arc(0,0,a,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return gi.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),t.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),t.Factory.addGetterSetter(s,"radiusX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"radiusY",0,(0,i.getNumberValidator)()),gi}var pi={},ca;function Hh(){if(ca)return pi;ca=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Image=void 0;const t=xt(),e=ft(),i=Et(),n=ut(),s=gt();let r=class Za extends i.Shape{constructor(a){super(a),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",this._loadListener)}_removeImageLoad(a){a&&a.removeEventListener&&a.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const a=!!this.cornerRadius(),l=this.hasShadow();return a&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const l=this.getWidth(),h=this.getHeight(),d=this.cornerRadius(),_=this.attrs.image;let p;if(_){const u=this.attrs.cropWidth,g=this.attrs.cropHeight;u&&g?p=[_,this.cropX(),this.cropY(),u,g,0,0,l,h]:p=[_,0,0,l,h]}(this.hasFill()||this.hasStroke()||d)&&(a.beginPath(),d?t.Util.drawRoundedRectPath(a,l,h,d):a.rect(0,0,l,h),a.closePath(),a.fillStrokeShape(this)),_&&(d&&a.clip(),a.drawImage.apply(a,p))}_hitFunc(a){const l=this.width(),h=this.height(),d=this.cornerRadius();a.beginPath(),d?t.Util.drawRoundedRectPath(a,l,h,d):a.rect(0,0,l,h),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,l;return(a=this.attrs.width)!==null&&a!==void 0?a:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var a,l;return(a=this.attrs.height)!==null&&a!==void 0?a:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(a,l,h=null){const d=t.Util.createImageElement();d.onload=function(){const _=new Za({image:d});l(_)},d.onerror=h,d.crossOrigin="Anonymous",d.src=a}};return pi.Image=r,r.prototype.className="Image",(0,n._registerNode)(r),e.Factory.addGetterSetter(r,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(r,"image"),e.Factory.addComponentsGetterSetter(r,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(r,"cropX",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(r,"cropY",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(r,"cropWidth",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(r,"cropHeight",0,(0,s.getNumberValidator)()),pi}var Re={},ha;function qh(){if(ha)return Re;ha=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.Tag=Re.Label=void 0;const t=ft(),e=Et(),i=Tr(),n=gt(),s=ut(),r=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",a="none",l="up",h="right",d="down",_="left",p=r.length;let u=class extends i.Group{constructor(S){super(S),this.on("add.konva",function(x){this._addListeners(x.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(S){let x=this,f;const c=function(){x._sync()};for(f=0;f<p;f++)S.on(r[f]+o,c)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let S=this.getText(),x=this.getTag(),f,c,m,v,T,O,C;if(S&&x){switch(f=S.width(),c=S.height(),m=x.pointerDirection(),v=x.pointerWidth(),C=x.pointerHeight(),T=0,O=0,m){case l:T=f/2,O=-1*C;break;case h:T=f+v,O=c/2;break;case d:T=f/2,O=c+C;break;case _:T=-1*v,O=c/2;break}x.setAttrs({x:-1*T,y:-1*O,width:f,height:c}),S.setAttrs({x:-1*T,y:-1*O})}}};Re.Label=u,u.prototype.className="Label",(0,s._registerNode)(u);class g extends e.Shape{_sceneFunc(S){const x=this.width(),f=this.height(),c=this.pointerDirection(),m=this.pointerWidth(),v=this.pointerHeight(),T=this.cornerRadius();let O=0,C=0,w=0,R=0;typeof T=="number"?O=C=w=R=Math.min(T,x/2,f/2):(O=Math.min(T[0]||0,x/2,f/2),C=Math.min(T[1]||0,x/2,f/2),R=Math.min(T[2]||0,x/2,f/2),w=Math.min(T[3]||0,x/2,f/2)),S.beginPath(),S.moveTo(O,0),c===l&&(S.lineTo((x-m)/2,0),S.lineTo(x/2,-1*v),S.lineTo((x+m)/2,0)),S.lineTo(x-C,0),S.arc(x-C,C,C,Math.PI*3/2,0,!1),c===h&&(S.lineTo(x,(f-v)/2),S.lineTo(x+m,f/2),S.lineTo(x,(f+v)/2)),S.lineTo(x,f-R),S.arc(x-R,f-R,R,0,Math.PI/2,!1),c===d&&(S.lineTo((x+m)/2,f),S.lineTo(x/2,f+v),S.lineTo((x-m)/2,f)),S.lineTo(w,f),S.arc(w,f-w,w,Math.PI/2,Math.PI,!1),c===_&&(S.lineTo(0,(f+v)/2),S.lineTo(-1*m,f/2),S.lineTo(0,(f-v)/2)),S.lineTo(0,O),S.arc(O,O,O,Math.PI,Math.PI*3/2,!1),S.closePath(),S.fillStrokeShape(this)}getSelfRect(){let S=0,x=0,f=this.pointerWidth(),c=this.pointerHeight(),m=this.pointerDirection(),v=this.width(),T=this.height();return m===l?(x-=c,T+=c):m===d?T+=c:m===_?(S-=f*1.5,v+=f):m===h&&(v+=f*1.5),{x:S,y:x,width:v,height:T}}}return Re.Tag=g,g.prototype.className="Tag",(0,s._registerNode)(g),t.Factory.addGetterSetter(g,"pointerDirection",a),t.Factory.addGetterSetter(g,"pointerWidth",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(g,"pointerHeight",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(g,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),Re}var _i={},da;function ua(){if(da)return _i;da=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Rect=void 0;const t=ft(),e=Et(),i=ut(),n=xt(),s=gt();let r=class extends e.Shape{_sceneFunc(a){const l=this.cornerRadius(),h=this.width(),d=this.height();a.beginPath(),l?n.Util.drawRoundedRectPath(a,h,d,l):a.rect(0,0,h,d),a.closePath(),a.fillStrokeShape(this)}};return _i.Rect=r,r.prototype.className="Rect",(0,i._registerNode)(r),t.Factory.addGetterSetter(r,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),_i}var mi={},fa;function Wh(){if(fa)return mi;fa=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.RegularPolygon=void 0;const t=ft(),e=Et(),i=gt(),n=ut();let s=class extends e.Shape{_sceneFunc(o){const a=this._getPoints();o.beginPath(),o.moveTo(a[0].x,a[0].y);for(let l=1;l<a.length;l++)o.lineTo(a[l].x,a[l].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,a=this.attrs.radius||0,l=[];for(let h=0;h<o;h++)l.push({x:a*Math.sin(h*2*Math.PI/o),y:-1*a*Math.cos(h*2*Math.PI/o)});return l}getSelfRect(){const o=this._getPoints();let a=o[0].x,l=o[0].y,h=o[0].x,d=o[0].y;return o.forEach(_=>{a=Math.min(a,_.x),l=Math.max(l,_.x),h=Math.min(h,_.y),d=Math.max(d,_.y)}),{x:a,y:h,width:l-a,height:d-h}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return mi.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"sides",0,(0,i.getNumberValidator)()),mi}var yi={},ga;function zh(){if(ga)return yi;ga=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Ring=void 0;const t=ft(),e=Et(),i=gt(),n=ut(),s=Math.PI*2;let r=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,s,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),s,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return yi.Ring=r,r.prototype.className="Ring",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,i.getNumberValidator)()),yi}var bi={},pa;function Kh(){if(pa)return bi;pa=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Sprite=void 0;const t=ft(),e=Et(),i=Er(),n=gt(),s=ut();let r=class extends e.Shape{constructor(a){super(a),this._updated=!0,this.anim=new i.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){const l=this.animation(),h=this.frameIndex(),d=h*4,_=this.animations()[l],p=this.frameOffsets(),u=_[d+0],g=_[d+1],y=_[d+2],S=_[d+3],x=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,y,S),a.closePath(),a.fillStrokeShape(this)),x)if(p){const f=p[l],c=h*2;a.drawImage(x,u,g,y,S,f[c+0],f[c+1],y,S)}else a.drawImage(x,u,g,y,S,0,0,y,S)}_hitFunc(a){const l=this.animation(),h=this.frameIndex(),d=h*4,_=this.animations()[l],p=this.frameOffsets(),u=_[d+2],g=_[d+3];if(a.beginPath(),p){const y=p[l],S=h*2;a.rect(y[S+0],y[S+1],u,g)}else a.rect(0,0,u,g);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const a=this.frameIndex(),l=this.animation(),h=this.animations(),d=h[l],_=d.length/4;a<_-1?this.frameIndex(a+1):this.frameIndex(0)}};return bi.Sprite=r,r.prototype.className="Sprite",(0,s._registerNode)(r),t.Factory.addGetterSetter(r,"animation"),t.Factory.addGetterSetter(r,"animations"),t.Factory.addGetterSetter(r,"frameOffsets"),t.Factory.addGetterSetter(r,"image"),t.Factory.addGetterSetter(r,"frameIndex",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"frameRate",17,(0,n.getNumberValidator)()),t.Factory.backCompat(r,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),bi}var vi={},_a;function jh(){if(_a)return vi;_a=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Star=void 0;const t=ft(),e=Et(),i=gt(),n=ut();let s=class extends e.Shape{_sceneFunc(o){const a=this.innerRadius(),l=this.outerRadius(),h=this.numPoints();o.beginPath(),o.moveTo(0,0-l);for(let d=1;d<h*2;d++){const _=d%2===0?l:a,p=_*Math.sin(d*Math.PI/h),u=-1*_*Math.cos(d*Math.PI/h);o.lineTo(p,u)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return vi.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"numPoints",5,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),vi}var De={},ma;function ya(){if(ma)return De;ma=1,Object.defineProperty(De,"__esModule",{value:!0}),De.Text=void 0,De.stringToArray=o;const t=xt(),e=ft(),i=Et(),n=ut(),s=gt(),r=ut();function o(W){return[...W].reduce((B,X,it,q)=>{if(/\p{Emoji}/u.test(X)){const M=q[it+1];M&&/\p{Emoji_Modifier}|\u200D/u.test(M)?(B.push(X+M),q[it+1]=""):B.push(X)}else/\p{Regional_Indicator}{2}/u.test(X+(q[it+1]||""))?B.push(X+q[it+1]):it>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(X)?B[B.length-1]+=X:X&&B.push(X);return B},[])}const a="auto",l="center",h="inherit",d="justify",_="Change.konva",p="2d",u="-",g="left",y="text",S="Text",x="top",f="bottom",c="middle",m="normal",v="px ",T=" ",O="right",C="rtl",w="word",R="char",N="none",G="",D=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],U=D.length;function L(W){return W.split(",").map(B=>{B=B.trim();const X=B.indexOf(" ")>=0,it=B.indexOf('"')>=0||B.indexOf("'")>=0;return X&&!it&&(B=`"${B}"`),B}).join(", ")}let K;function b(){return K||(K=t.Util.createCanvasElement().getContext(p),K)}function P(W){W.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F(W){W.setAttr("miterLimit",2),W.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function A(W){return W=W||{},!W.fillLinearGradientColorStops&&!W.fillRadialGradientColorStops&&!W.fillPatternImage&&(W.fill=W.fill||"black"),W}let I=class extends i.Shape{constructor(B){super(A(B)),this._partialTextX=0,this._partialTextY=0;for(let X=0;X<U;X++)this.on(D[X]+_,this._setTextData);this._setTextData()}_sceneFunc(B){const X=this.textArr,it=X.length;if(!this.text())return;let q=this.padding(),M=this.fontSize(),H=this.lineHeight()*M,Z=this.verticalAlign(),nt=this.direction(),ot=0,E=this.align(),k=this.getWidth(),V=this.letterSpacing(),z=this.fill(),Y=this.textDecoration(),j=Y.indexOf("underline")!==-1,J=Y.indexOf("line-through")!==-1,tt;nt=nt===h?B.direction:nt;let Q=H/2,$=c;if(n.Konva._fixTextRendering){const rt=this.measureSize("M");$="alphabetic",Q=(rt.fontBoundingBoxAscent-rt.fontBoundingBoxDescent)/2+H/2}for(nt===C&&B.setAttr("direction",nt),B.setAttr("font",this._getContextFont()),B.setAttr("textBaseline",$),B.setAttr("textAlign",g),Z===c?ot=(this.getHeight()-it*H-q*2)/2:Z===f&&(ot=this.getHeight()-it*H-q*2),B.translate(q,ot+q),tt=0;tt<it;tt++){let rt=0,et=0;const st=X[tt],at=st.text,lt=st.width,pt=st.lastInParagraph;if(B.save(),E===O?rt+=k-lt-q*2:E===l&&(rt+=(k-lt-q*2)/2),j){B.save(),B.beginPath();const dt=n.Konva._fixTextRendering?Math.round(M/4):Math.round(M/2),wt=rt,yt=Q+et+dt;B.moveTo(wt,yt);const St=E===d&&!pt?k-q*2:lt;B.lineTo(wt+Math.round(St),yt),B.lineWidth=M/15;const kt=this._getLinearGradient();B.strokeStyle=kt||z,B.stroke(),B.restore()}if(J){B.save(),B.beginPath();const dt=n.Konva._fixTextRendering?-Math.round(M/4):0;B.moveTo(rt,Q+et+dt);const wt=E===d&&!pt?k-q*2:lt;B.lineTo(rt+Math.round(wt),Q+et+dt),B.lineWidth=M/15;const yt=this._getLinearGradient();B.strokeStyle=yt||z,B.stroke(),B.restore()}if(nt!==C&&(V!==0||E===d)){const dt=at.split(" ").length-1,wt=o(at);for(let yt=0;yt<wt.length;yt++){const St=wt[yt];St===" "&&!pt&&E===d&&(rt+=(k-q*2-lt)/dt),this._partialTextX=rt,this._partialTextY=Q+et,this._partialText=St,B.fillStrokeShape(this),rt+=this.measureSize(St).width+V}}else V!==0&&B.setAttr("letterSpacing",`${V}px`),this._partialTextX=rt,this._partialTextY=Q+et,this._partialText=at,B.fillStrokeShape(this);B.restore(),it>1&&(Q+=H)}}_hitFunc(B){const X=this.getWidth(),it=this.getHeight();B.beginPath(),B.rect(0,0,X,it),B.closePath(),B.fillStrokeShape(this)}setText(B){const X=t.Util._isString(B)?B:B==null?"":B+"";return this._setAttr(y,X),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(B){var X,it,q,M,H,Z,nt,ot,E,k,V;let z=b(),Y=this.fontSize(),j;z.save(),z.font=this._getContextFont(),j=z.measureText(B),z.restore();const J=Y/100;return{actualBoundingBoxAscent:(X=j.actualBoundingBoxAscent)!==null&&X!==void 0?X:71.58203125*J,actualBoundingBoxDescent:(it=j.actualBoundingBoxDescent)!==null&&it!==void 0?it:0,actualBoundingBoxLeft:(q=j.actualBoundingBoxLeft)!==null&&q!==void 0?q:-7.421875*J,actualBoundingBoxRight:(M=j.actualBoundingBoxRight)!==null&&M!==void 0?M:75.732421875*J,alphabeticBaseline:(H=j.alphabeticBaseline)!==null&&H!==void 0?H:0,emHeightAscent:(Z=j.emHeightAscent)!==null&&Z!==void 0?Z:100*J,emHeightDescent:(nt=j.emHeightDescent)!==null&&nt!==void 0?nt:-20*J,fontBoundingBoxAscent:(ot=j.fontBoundingBoxAscent)!==null&&ot!==void 0?ot:91*J,fontBoundingBoxDescent:(E=j.fontBoundingBoxDescent)!==null&&E!==void 0?E:21*J,hangingBaseline:(k=j.hangingBaseline)!==null&&k!==void 0?k:72.80000305175781*J,ideographicBaseline:(V=j.ideographicBaseline)!==null&&V!==void 0?V:-21*J,width:j.width,height:Y}}_getContextFont(){return this.fontStyle()+T+this.fontVariant()+T+(this.fontSize()+v)+L(this.fontFamily())}_addTextLine(B){this.align()===d&&(B=B.trim());const it=this._getTextWidth(B);return this.textArr.push({text:B,width:it,lastInParagraph:!1})}_getTextWidth(B){const X=this.letterSpacing(),it=B.length;return b().measureText(B).width+X*it}_setTextData(){let B=this.text().split(`
`),X=+this.fontSize(),it=0,q=this.lineHeight()*X,M=this.attrs.width,H=this.attrs.height,Z=M!==a&&M!==void 0,nt=H!==a&&H!==void 0,ot=this.padding(),E=M-ot*2,k=H-ot*2,V=0,z=this.wrap(),Y=z!==N,j=z!==R&&Y,J=this.ellipsis();this.textArr=[],b().font=this._getContextFont();const tt=J?this._getTextWidth(G):0;for(let Q=0,$=B.length;Q<$;++Q){let rt=B[Q],et=this._getTextWidth(rt);if(Z&&et>E)for(;rt.length>0;){let st=0,at=o(rt).length,lt="",pt=0;for(;st<at;){const dt=st+at>>>1,wt=o(rt),yt=wt.slice(0,dt+1).join(""),St=this._getTextWidth(yt);(J&&nt&&V+q>k?St+tt:St)<=E?(st=dt+1,lt=yt,pt=St):at=dt}if(lt){if(j){const yt=o(rt),St=o(lt),kt=yt[St.length],be=kt===T||kt===u;let Te;if(be&&pt<=E)Te=St.length;else{const Gt=St.lastIndexOf(T),Kt=St.lastIndexOf(u);Te=Math.max(Gt,Kt)+1}Te>0&&(st=Te,lt=yt.slice(0,st).join(""),pt=this._getTextWidth(lt))}if(lt=lt.trimRight(),this._addTextLine(lt),it=Math.max(it,pt),V+=q,this._shouldHandleEllipsis(V)){this._tryToAddEllipsisToLastLine();break}if(rt=o(rt).slice(st).join("").trimLeft(),rt.length>0&&(et=this._getTextWidth(rt),et<=E)){this._addTextLine(rt),V+=q,it=Math.max(it,et);break}}else break}else this._addTextLine(rt),V+=q,it=Math.max(it,et),this._shouldHandleEllipsis(V)&&Q<$-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),nt&&V+q>k)break}this.textHeight=X,this.textWidth=it}_shouldHandleEllipsis(B){const X=+this.fontSize(),it=this.lineHeight()*X,q=this.attrs.height,M=q!==a&&q!==void 0,H=this.padding(),Z=q-H*2;return!(this.wrap()!==N)||M&&B+it>Z}_tryToAddEllipsisToLastLine(){const B=this.attrs.width,X=B!==a&&B!==void 0,it=this.padding(),q=B-it*2,M=this.ellipsis(),H=this.textArr[this.textArr.length-1];!H||!M||(X&&(this._getTextWidth(H.text+G)<q||(H.text=H.text.slice(0,H.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(H.text+G))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const B=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,X=this.hasShadow();return B&&X?!0:super._useBufferCanvas()}};return De.Text=I,I.prototype._fillFunc=P,I.prototype._strokeFunc=F,I.prototype.className=S,I.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,r._registerNode)(I),e.Factory.overWriteSetter(I,"width",(0,s.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(I,"height",(0,s.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(I,"direction",h),e.Factory.addGetterSetter(I,"fontFamily","Arial"),e.Factory.addGetterSetter(I,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(I,"fontStyle",m),e.Factory.addGetterSetter(I,"fontVariant",m),e.Factory.addGetterSetter(I,"padding",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(I,"align",g),e.Factory.addGetterSetter(I,"verticalAlign",x),e.Factory.addGetterSetter(I,"lineHeight",1,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(I,"wrap",w),e.Factory.addGetterSetter(I,"ellipsis",!1,(0,s.getBooleanValidator)()),e.Factory.addGetterSetter(I,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(I,"text","",(0,s.getStringValidator)()),e.Factory.addGetterSetter(I,"textDecoration",""),De}var Si={},ba;function Yh(){if(ba)return Si;ba=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.TextPath=void 0;const t=xt(),e=ft(),i=Et(),n=Fr(),s=ya(),r=gt(),o=ut(),a="",l="normal";function h(p){p.fillText(this.partialText,0,0)}function d(p){p.strokeText(this.partialText,0,0)}let _=class extends i.Shape{constructor(u){super(u),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(u){if(!this.attrs.data)return null;const g=this.pathLength;return u-1>g?null:n.Path.getPointAtLengthOfDataArray(u,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(u){u.setAttr("font",this._getContextFont()),u.setAttr("textBaseline",this.textBaseline()),u.setAttr("textAlign","left"),u.save();const g=this.textDecoration(),y=this.fill(),S=this.fontSize(),x=this.glyphInfo;g==="underline"&&u.beginPath();for(let f=0;f<x.length;f++){u.save();const c=x[f].p0;u.translate(c.x,c.y),u.rotate(x[f].rotation),this.partialText=x[f].text,u.fillStrokeShape(this),g==="underline"&&(f===0&&u.moveTo(0,S/2+1),u.lineTo(S,S/2+1)),u.restore()}g==="underline"&&(u.strokeStyle=y,u.lineWidth=S/20,u.stroke()),u.restore()}_hitFunc(u){u.beginPath();const g=this.glyphInfo;if(g.length>=1){const y=g[0].p0;u.moveTo(y.x,y.y)}for(let y=0;y<g.length;y++){const S=g[y].p1;u.lineTo(S.x,S.y)}u.setAttr("lineWidth",this.fontSize()),u.setAttr("strokeStyle",this.colorKey),u.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(u){return s.Text.prototype.setText.call(this,u)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(u){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const S=y.measureText(u);return y.restore(),{width:S.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:u,height:g}=this._getTextSize(this.attrs.text);if(this.textWidth=u,this.textHeight=g,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),S=this.align(),x=this.kerningFunc(),f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let c=0;S==="center"&&(c=Math.max(0,this.pathLength/2-f/2)),S==="right"&&(c=Math.max(0,this.pathLength-f));const m=(0,s.stringToArray)(this.text());let v=c;for(let T=0;T<m.length;T++){const O=this._getPointAtLength(v);if(!O)return;let C=this._getTextSize(m[T]).width+y;if(m[T]===" "&&S==="justify"){const U=this.text().split(" ").length-1;C+=(this.pathLength-f)/U}const w=this._getPointAtLength(v+C);if(!w)return;const R=n.Path.getLineLength(O.x,O.y,w.x,w.y);let N=0;if(x)try{N=x(m[T-1],m[T])*this.fontSize()}catch{N=0}O.x+=N,w.x+=N,this.textWidth+=N;const G=n.Path.getPointOnLine(N+R/2,O.x,O.y,w.x,w.y),D=Math.atan2(w.y-O.y,w.x-O.x);this.glyphInfo.push({transposeX:G.x,transposeY:G.y,text:m[T],rotation:D,p0:O,p1:w}),v+=C}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const u=[];this.glyphInfo.forEach(function(v){u.push(v.p0.x),u.push(v.p0.y),u.push(v.p1.x),u.push(v.p1.y)});let g=u[0]||0,y=u[0]||0,S=u[1]||0,x=u[1]||0,f,c;for(let v=0;v<u.length/2;v++)f=u[v*2],c=u[v*2+1],g=Math.min(g,f),y=Math.max(y,f),S=Math.min(S,c),x=Math.max(x,c);const m=this.fontSize();return{x:g-m/2,y:S-m/2,width:y-g+m,height:x-S+m}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Si.TextPath=_,_.prototype._fillFunc=h,_.prototype._strokeFunc=d,_.prototype._fillFuncHit=h,_.prototype._strokeFuncHit=d,_.prototype.className="TextPath",_.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(_),e.Factory.addGetterSetter(_,"data"),e.Factory.addGetterSetter(_,"fontFamily","Arial"),e.Factory.addGetterSetter(_,"fontSize",12,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(_,"fontStyle",l),e.Factory.addGetterSetter(_,"align","left"),e.Factory.addGetterSetter(_,"letterSpacing",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(_,"textBaseline","middle"),e.Factory.addGetterSetter(_,"fontVariant",l),e.Factory.addGetterSetter(_,"text",a),e.Factory.addGetterSetter(_,"textDecoration",""),e.Factory.addGetterSetter(_,"kerningFunc",void 0),Si}var Ci={},va;function Xh(){if(va)return Ci;va=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Transformer=void 0;const t=xt(),e=ft(),i=Rt(),n=Et(),s=ua(),r=Tr(),o=ut(),a=gt(),l=ut(),h="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(C=>C+`.${h}`).join(" "),_="nodesRect",p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],u={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in o.Konva._global;function y(C,w,R){if(C==="rotater")return R;w+=t.Util.degToRad(u[C]||0);const N=(t.Util.radToDeg(w)%360+360)%360;return t.Util._inRange(N,337.5,360)||t.Util._inRange(N,0,22.5)?"ns-resize":t.Util._inRange(N,22.5,67.5)?"nesw-resize":t.Util._inRange(N,67.5,112.5)?"ew-resize":t.Util._inRange(N,112.5,157.5)?"nwse-resize":t.Util._inRange(N,157.5,202.5)?"ns-resize":t.Util._inRange(N,202.5,247.5)?"nesw-resize":t.Util._inRange(N,247.5,292.5)?"ew-resize":t.Util._inRange(N,292.5,337.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+N),"pointer")}const S=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function x(C){return{x:C.x+C.width/2*Math.cos(C.rotation)+C.height/2*Math.sin(-C.rotation),y:C.y+C.height/2*Math.cos(C.rotation)+C.width/2*Math.sin(C.rotation)}}function f(C,w,R){const N=R.x+(C.x-R.x)*Math.cos(w)-(C.y-R.y)*Math.sin(w),G=R.y+(C.x-R.x)*Math.sin(w)+(C.y-R.y)*Math.cos(w);return{...C,rotation:C.rotation+w,x:N,y:G}}function c(C,w){const R=x(C);return f(C,w,R)}function m(C,w,R){let N=w;for(let G=0;G<C.length;G++){const D=o.Konva.getAngle(C[G]),U=Math.abs(D-w)%(Math.PI*2);Math.min(U,Math.PI*2-U)<R&&(N=D)}return N}let v=0,T=class extends r.Group{constructor(w){super(w),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(w){return this.setNode(w),this}setNode(w){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([w])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return h+this._id}setNodes(w=[]){this._nodes&&this._nodes.length&&this.detach();const R=w.filter(G=>G.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=w=R,w.length===1&&this.useSingleNodeRotation()?this.rotation(w[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(G=>{const D=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(G._attrsAffectingSize.length){const U=G._attrsAffectingSize.map(L=>L+"Change."+this._getEventNamespace()).join(" ");G.on(U,D)}G.on(p.map(U=>U+`.${this._getEventNamespace()}`).join(" "),D),G.on(`absoluteTransformChange.${this._getEventNamespace()}`,D),this._proxyDrag(G)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(w){let R;w.on(`dragstart.${this._getEventNamespace()}`,N=>{R=w.getAbsolutePosition(),!this.isDragging()&&w!==this.findOne(".back")&&this.startDrag(N,!1)}),w.on(`dragmove.${this._getEventNamespace()}`,N=>{if(!R)return;const G=w.getAbsolutePosition(),D=G.x-R.x,U=G.y-R.y;this.nodes().forEach(L=>{if(L===w||L.isDragging())return;const K=L.getAbsolutePosition();L.setAbsolutePosition({x:K.x+D,y:K.y+U}),L.startDrag(N)}),R=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(w=>{w.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(_),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(_,this.__getNodeRect)}__getNodeShape(w,R=this.rotation(),N){const G=w.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),D=w.getAbsoluteScale(N),U=w.getAbsolutePosition(N),L=G.x*D.x-w.offsetX()*D.x,K=G.y*D.y-w.offsetY()*D.y,b=(o.Konva.getAngle(w.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),P={x:U.x+L*Math.cos(b)+K*Math.sin(-b),y:U.y+K*Math.cos(b)+L*Math.sin(b),width:G.width*D.x,height:G.height*D.y,rotation:b};return f(P,-o.Konva.getAngle(R),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const R=[];this.nodes().map(b=>{const P=b.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),F=[{x:P.x,y:P.y},{x:P.x+P.width,y:P.y},{x:P.x+P.width,y:P.y+P.height},{x:P.x,y:P.y+P.height}],A=b.getAbsoluteTransform();F.forEach(function(I){const W=A.point(I);R.push(W)})});const N=new t.Transform;N.rotate(-o.Konva.getAngle(this.rotation()));let G=1/0,D=1/0,U=-1/0,L=-1/0;R.forEach(function(b){const P=N.point(b);G===void 0&&(G=U=P.x,D=L=P.y),G=Math.min(G,P.x),D=Math.min(D,P.y),U=Math.max(U,P.x),L=Math.max(L,P.y)}),N.invert();const K=N.point({x:G,y:D});return{x:K.x,y:K.y,width:U-G,height:L-D,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),S.forEach(w=>{this._createAnchor(w)}),this._createAnchor("rotater")}_createAnchor(w){const R=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:w+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),N=this;R.on("mousedown touchstart",function(G){N._handleMouseDown(G)}),R.on("dragstart",G=>{R.stopDrag(),G.cancelBubble=!0}),R.on("dragend",G=>{G.cancelBubble=!0}),R.on("mouseenter",()=>{const G=o.Konva.getAngle(this.rotation()),D=this.rotateAnchorCursor(),U=y(w,G,D);R.getStage().content&&(R.getStage().content.style.cursor=U),this._cursorChange=!0}),R.on("mouseout",()=>{R.getStage().content&&(R.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(R)}_createBack(){const w=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(R,N){const G=N.getParent(),D=G.padding();R.beginPath(),R.rect(-D,-D,N.width()+D*2,N.height()+D*2),R.moveTo(N.width()/2,-D),G.rotateEnabled()&&G.rotateLineVisible()&&R.lineTo(N.width()/2,-G.rotateAnchorOffset()*t.Util._sign(N.height())-D),R.fillStrokeShape(N)},hitFunc:(R,N)=>{if(!this.shouldOverdrawWholeArea())return;const G=this.padding();R.beginPath(),R.rect(-G,-G,N.width()+G*2,N.height()+G*2),R.fillStrokeShape(N)}});this.add(w),this._proxyDrag(w),w.on("dragstart",R=>{R.cancelBubble=!0}),w.on("dragmove",R=>{R.cancelBubble=!0}),w.on("dragend",R=>{R.cancelBubble=!0}),this.on("dragmove",R=>{this.update()})}_handleMouseDown(w){if(this._transforming)return;this._movingAnchorName=w.target.name().split(" ")[0];const R=this._getNodeRect(),N=R.width,G=R.height,D=Math.sqrt(Math.pow(N,2)+Math.pow(G,2));this.sin=Math.abs(G/D),this.cos=Math.abs(N/D),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const U=w.target.getAbsolutePosition(),L=w.target.getStage().getPointerPosition();this._anchorDragOffset={x:L.x-U.x,y:L.y-U.y},v++,this._fire("transformstart",{evt:w.evt,target:this.getNode()}),this._nodes.forEach(K=>{K._fire("transformstart",{evt:w.evt,target:K})})}_handleMouseMove(w){let R,N,G;const D=this.findOne("."+this._movingAnchorName),U=D.getStage();U.setPointersPositions(w);const L=U.getPointerPosition();let K={x:L.x-this._anchorDragOffset.x,y:L.y-this._anchorDragOffset.y};const b=D.getAbsolutePosition();this.anchorDragBoundFunc()&&(K=this.anchorDragBoundFunc()(b,K,w)),D.setAbsolutePosition(K);const P=D.getAbsolutePosition();if(b.x===P.x&&b.y===P.y)return;if(this._movingAnchorName==="rotater"){const q=this._getNodeRect();R=D.x()-q.width/2,N=-D.y()+q.height/2;let M=Math.atan2(-N,R)+Math.PI/2;q.height<0&&(M-=Math.PI);const Z=o.Konva.getAngle(this.rotation())+M,nt=o.Konva.getAngle(this.rotationSnapTolerance()),E=m(this.rotationSnaps(),Z,nt)-q.rotation,k=c(q,E);this._fitNodesInto(k,w);return}const F=this.shiftBehavior();let A;F==="inverted"?A=this.keepRatio()&&!w.shiftKey:F==="none"?A=this.keepRatio():A=this.keepRatio()||w.shiftKey;let I=this.centeredScaling()||w.altKey;if(this._movingAnchorName==="top-left"){if(A){const q=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};G=Math.sqrt(Math.pow(q.x-D.x(),2)+Math.pow(q.y-D.y(),2));const M=this.findOne(".top-left").x()>q.x?-1:1,H=this.findOne(".top-left").y()>q.y?-1:1;R=G*this.cos*M,N=G*this.sin*H,this.findOne(".top-left").x(q.x-R),this.findOne(".top-left").y(q.y-N)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(D.y());else if(this._movingAnchorName==="top-right"){if(A){const q=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};G=Math.sqrt(Math.pow(D.x()-q.x,2)+Math.pow(q.y-D.y(),2));const M=this.findOne(".top-right").x()<q.x?-1:1,H=this.findOne(".top-right").y()>q.y?-1:1;R=G*this.cos*M,N=G*this.sin*H,this.findOne(".top-right").x(q.x+R),this.findOne(".top-right").y(q.y-N)}var W=D.position();this.findOne(".top-left").y(W.y),this.findOne(".bottom-right").x(W.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(D.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(D.x());else if(this._movingAnchorName==="bottom-left"){if(A){const q=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};G=Math.sqrt(Math.pow(q.x-D.x(),2)+Math.pow(D.y()-q.y,2));const M=q.x<D.x()?-1:1,H=D.y()<q.y?-1:1;R=G*this.cos*M,N=G*this.sin*H,D.x(q.x-R),D.y(q.y+N)}W=D.position(),this.findOne(".top-left").x(W.x),this.findOne(".bottom-right").y(W.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(D.y());else if(this._movingAnchorName==="bottom-right"){if(A){const q=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};G=Math.sqrt(Math.pow(D.x()-q.x,2)+Math.pow(D.y()-q.y,2));const M=this.findOne(".bottom-right").x()<q.x?-1:1,H=this.findOne(".bottom-right").y()<q.y?-1:1;R=G*this.cos*M,N=G*this.sin*H,this.findOne(".bottom-right").x(q.x+R),this.findOne(".bottom-right").y(q.y+N)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(I=this.centeredScaling()||w.altKey,I){const q=this.findOne(".top-left"),M=this.findOne(".bottom-right"),H=q.x(),Z=q.y(),nt=this.getWidth()-M.x(),ot=this.getHeight()-M.y();M.move({x:-H,y:-Z}),q.move({x:nt,y:ot})}const B=this.findOne(".top-left").getAbsolutePosition();R=B.x,N=B.y;const X=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),it=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:R,y:N,width:X,height:it,rotation:o.Konva.getAngle(this.rotation())},w)}_handleMouseUp(w){this._removeEvents(w)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(w){var R;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const N=this.getNode();v--,this._fire("transformend",{evt:w,target:N}),(R=this.getLayer())===null||R===void 0||R.batchDraw(),N&&this._nodes.forEach(G=>{var D;G._fire("transformend",{evt:w,target:G}),(D=G.getLayer())===null||D===void 0||D.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(w,R){const N=this._getNodeRect(),G=1;if(t.Util._inRange(w.width,-this.padding()*2-G,G)){this.update();return}if(t.Util._inRange(w.height,-this.padding()*2-G,G)){this.update();return}const D=new t.Transform;if(D.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("left")>=0){const A=D.point({x:-this.padding()*2,y:0});w.x+=A.x,w.y+=A.y,w.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y}else if(this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("right")>=0){const A=D.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,w.width+=this.padding()*2}if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("top")>=0){const A=D.point({x:0,y:-this.padding()*2});w.x+=A.x,w.y+=A.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,w.height+=this.padding()*2}else if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const A=D.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=A.x,this._anchorDragOffset.y-=A.y,w.height+=this.padding()*2}if(this.boundBoxFunc()){const A=this.boundBoxFunc()(N,w);A?w=A:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const U=1e7,L=new t.Transform;L.translate(N.x,N.y),L.rotate(N.rotation),L.scale(N.width/U,N.height/U);const K=new t.Transform,b=w.width/U,P=w.height/U;this.flipEnabled()===!1?(K.translate(w.x,w.y),K.rotate(w.rotation),K.translate(w.width<0?w.width:0,w.height<0?w.height:0),K.scale(Math.abs(b),Math.abs(P))):(K.translate(w.x,w.y),K.rotate(w.rotation),K.scale(b,P));const F=K.multiply(L.invert());this._nodes.forEach(A=>{var I;const W=A.getParent().getAbsoluteTransform(),B=A.getTransform().copy();B.translate(A.offsetX(),A.offsetY());const X=new t.Transform;X.multiply(W.copy().invert()).multiply(F).multiply(W).multiply(B);const it=X.decompose();A.setAttrs(it),(I=A.getLayer())===null||I===void 0||I.batchDraw()}),this.rotation(t.Util._getRotation(w.rotation)),this._nodes.forEach(A=>{this._fire("transform",{evt:R,target:A}),A._fire("transform",{evt:R,target:A})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(w,R){this.findOne(w).setAttrs(R)}update(){var w;const R=this._getNodeRect();this.rotation(t.Util._getRotation(R.rotation));const N=R.width,G=R.height,D=this.enabledAnchors(),U=this.resizeEnabled(),L=this.padding(),K=this.anchorSize(),b=this.find("._anchor");b.forEach(F=>{F.setAttrs({width:K,height:K,offsetX:K/2,offsetY:K/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:K/2+L,offsetY:K/2+L,visible:U&&D.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:N/2,y:0,offsetY:K/2+L,visible:U&&D.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:N,y:0,offsetX:K/2-L,offsetY:K/2+L,visible:U&&D.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:G/2,offsetX:K/2+L,visible:U&&D.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:N,y:G/2,offsetX:K/2-L,visible:U&&D.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:G,offsetX:K/2+L,offsetY:K/2-L,visible:U&&D.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:N/2,y:G,offsetY:K/2-L,visible:U&&D.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:N,y:G,offsetX:K/2-L,offsetY:K/2-L,visible:U&&D.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:N/2,y:-this.rotateAnchorOffset()*t.Util._sign(G)-L,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:N,height:G,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const P=this.anchorStyleFunc();P&&b.forEach(F=>{P(F)}),(w=this.getLayer())===null||w===void 0||w.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const w=this.findOne("."+this._movingAnchorName);w&&w.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),r.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(w){return i.Node.prototype.clone.call(this,w)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ci.Transformer=T,T.isTransforming=()=>v>0;function O(C){return C instanceof Array||t.Util.warn("enabledAnchors value should be an array"),C instanceof Array&&C.forEach(function(w){S.indexOf(w)===-1&&t.Util.warn("Unknown anchor name: "+w+". Available names are: "+S.join(", "))}),C||[]}return T.prototype.className="Transformer",(0,l._registerNode)(T),e.Factory.addGetterSetter(T,"enabledAnchors",S,O),e.Factory.addGetterSetter(T,"flipEnabled",!0,(0,a.getBooleanValidator)()),e.Factory.addGetterSetter(T,"resizeEnabled",!0),e.Factory.addGetterSetter(T,"anchorSize",10,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(T,"rotateEnabled",!0),e.Factory.addGetterSetter(T,"rotateLineVisible",!0),e.Factory.addGetterSetter(T,"rotationSnaps",[]),e.Factory.addGetterSetter(T,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(T,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(T,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(T,"borderEnabled",!0),e.Factory.addGetterSetter(T,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(T,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(T,"anchorFill","white"),e.Factory.addGetterSetter(T,"anchorCornerRadius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(T,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(T,"borderStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(T,"borderDash"),e.Factory.addGetterSetter(T,"keepRatio",!0),e.Factory.addGetterSetter(T,"shiftBehavior","default"),e.Factory.addGetterSetter(T,"centeredScaling",!1),e.Factory.addGetterSetter(T,"ignoreStroke",!1),e.Factory.addGetterSetter(T,"padding",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(T,"nodes"),e.Factory.addGetterSetter(T,"node"),e.Factory.addGetterSetter(T,"boundBoxFunc"),e.Factory.addGetterSetter(T,"anchorDragBoundFunc"),e.Factory.addGetterSetter(T,"anchorStyleFunc"),e.Factory.addGetterSetter(T,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(T,"useSingleNodeRotation",!0),e.Factory.backCompat(T,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Ci}var wi={},Sa;function $h(){if(Sa)return wi;Sa=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Wedge=void 0;const t=ft(),e=Et(),i=ut(),n=gt(),s=ut();let r=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return wi.Wedge=r,r.prototype.className="Wedge",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(r),t.Factory.addGetterSetter(r,"radius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"angle",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"clockwise",!1),t.Factory.backCompat(r,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),wi}var xi={},Ca;function Jh(){if(Ca)return xi;Ca=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Blur=void 0;const t=ft(),e=Rt(),i=gt();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(l,h){const d=l.data,_=l.width,p=l.height;let u,g,y,S,x,f,c,m,v,T,O,C,w,R,N,G,D,U,L,K;const b=h+h+1,P=_-1,F=p-1,A=h+1,I=A*(A+1)/2,W=new n,B=s[h],X=r[h];let it=null,q=W,M=null,H=null;for(let Z=1;Z<b;Z++)q=q.next=new n,Z===A&&(it=q);q.next=W,y=g=0;for(let Z=0;Z<p;Z++){C=w=R=N=S=x=f=c=0,m=A*(G=d[g]),v=A*(D=d[g+1]),T=A*(U=d[g+2]),O=A*(L=d[g+3]),S+=I*G,x+=I*D,f+=I*U,c+=I*L,q=W;for(let nt=0;nt<A;nt++)q.r=G,q.g=D,q.b=U,q.a=L,q=q.next;for(let nt=1;nt<A;nt++)u=g+((P<nt?P:nt)<<2),S+=(q.r=G=d[u])*(K=A-nt),x+=(q.g=D=d[u+1])*K,f+=(q.b=U=d[u+2])*K,c+=(q.a=L=d[u+3])*K,C+=G,w+=D,R+=U,N+=L,q=q.next;M=W,H=it;for(let nt=0;nt<_;nt++)d[g+3]=L=c*B>>X,L!==0?(L=255/L,d[g]=(S*B>>X)*L,d[g+1]=(x*B>>X)*L,d[g+2]=(f*B>>X)*L):d[g]=d[g+1]=d[g+2]=0,S-=m,x-=v,f-=T,c-=O,m-=M.r,v-=M.g,T-=M.b,O-=M.a,u=y+((u=nt+h+1)<P?u:P)<<2,C+=M.r=d[u],w+=M.g=d[u+1],R+=M.b=d[u+2],N+=M.a=d[u+3],S+=C,x+=w,f+=R,c+=N,M=M.next,m+=G=H.r,v+=D=H.g,T+=U=H.b,O+=L=H.a,C-=G,w-=D,R-=U,N-=L,H=H.next,g+=4;y+=_}for(let Z=0;Z<_;Z++){w=R=N=C=x=f=c=S=0,g=Z<<2,m=A*(G=d[g]),v=A*(D=d[g+1]),T=A*(U=d[g+2]),O=A*(L=d[g+3]),S+=I*G,x+=I*D,f+=I*U,c+=I*L,q=W;for(let ot=0;ot<A;ot++)q.r=G,q.g=D,q.b=U,q.a=L,q=q.next;let nt=_;for(let ot=1;ot<=h;ot++)g=nt+Z<<2,S+=(q.r=G=d[g])*(K=A-ot),x+=(q.g=D=d[g+1])*K,f+=(q.b=U=d[g+2])*K,c+=(q.a=L=d[g+3])*K,C+=G,w+=D,R+=U,N+=L,q=q.next,ot<F&&(nt+=_);g=Z,M=W,H=it;for(let ot=0;ot<p;ot++)u=g<<2,d[u+3]=L=c*B>>X,L>0?(L=255/L,d[u]=(S*B>>X)*L,d[u+1]=(x*B>>X)*L,d[u+2]=(f*B>>X)*L):d[u]=d[u+1]=d[u+2]=0,S-=m,x-=v,f-=T,c-=O,m-=M.r,v-=M.g,T-=M.b,O-=M.a,u=Z+((u=ot+A)<F?u:F)*_<<2,S+=C+=M.r=d[u],x+=w+=M.g=d[u+1],f+=R+=M.b=d[u+2],c+=N+=M.a=d[u+3],M=M.next,m+=G=H.r,v+=D=H.g,T+=U=H.b,O+=L=H.a,C-=G,w-=D,R-=U,N-=L,H=H.next,g+=_}}const a=function(h){const d=Math.round(this.blurRadius());d>0&&o(h,d)};return xi.Blur=a,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),xi}var Pi={},wa;function Qh(){if(wa)return Pi;wa=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Brighten=void 0;const t=ft(),e=Rt(),i=gt(),n=function(s){const r=this.brightness()*255,o=s.data,a=o.length;for(let l=0;l<a;l+=4)o[l]+=r,o[l+1]+=r,o[l+2]+=r};return Pi.Brighten=n,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Pi}var Ri={},xa;function Zh(){if(xa)return Ri;xa=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Contrast=void 0;const t=ft(),e=Rt(),i=gt(),n=function(s){const r=Math.pow((this.contrast()+100)/100,2),o=s.data,a=o.length;let l=150,h=150,d=150;for(let _=0;_<a;_+=4)l=o[_],h=o[_+1],d=o[_+2],l/=255,l-=.5,l*=r,l+=.5,l*=255,h/=255,h-=.5,h*=r,h+=.5,h*=255,d/=255,d-=.5,d*=r,d+=.5,d*=255,l=l<0?0:l>255?255:l,h=h<0?0:h>255?255:h,d=d<0?0:d>255?255:d,o[_]=l,o[_+1]=h,o[_+2]=d};return Ri.Contrast=n,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ri}var Ti={},Pa;function td(){if(Pa)return Ti;Pa=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Emboss=void 0;const t=ft(),e=Rt(),i=xt(),n=gt(),s=function(r){const o=this.embossStrength()*10,a=this.embossWhiteLevel()*255,l=this.embossDirection(),h=this.embossBlend(),d=r.data,_=r.width,p=r.height,u=_*4;let g=0,y=0,S=p;switch(l){case"top-left":g=-1,y=-1;break;case"top":g=-1,y=0;break;case"top-right":g=-1,y=1;break;case"right":g=0,y=1;break;case"bottom-right":g=1,y=1;break;case"bottom":g=1,y=0;break;case"bottom-left":g=1,y=-1;break;case"left":g=0,y=-1;break;default:i.Util.error("Unknown emboss direction: "+l)}do{const x=(S-1)*u;let f=g;S+f<1&&(f=0),S+f>p&&(f=0);const c=(S-1+f)*_*4;let m=_;do{const v=x+(m-1)*4;let T=y;m+T<1&&(T=0),m+T>_&&(T=0);const O=c+(m-1+T)*4,C=d[v]-d[O],w=d[v+1]-d[O+1],R=d[v+2]-d[O+2];let N=C;const G=N>0?N:-N,D=w>0?w:-w,U=R>0?R:-R;if(D>G&&(N=w),U>G&&(N=R),N*=o,h){const L=d[v]+N,K=d[v+1]+N,b=d[v+2]+N;d[v]=L>255?255:L<0?0:L,d[v+1]=K>255?255:K<0?0:K,d[v+2]=b>255?255:b<0?0:b}else{let L=a-N;L<0?L=0:L>255&&(L=255),d[v]=d[v+1]=d[v+2]=L}}while(--m)}while(--S)};return Ti.Emboss=s,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),Ti}var Ei={},Ra;function ed(){if(Ra)return Ei;Ra=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.Enhance=void 0;const t=ft(),e=Rt(),i=gt();function n(r,o,a,l,h){const d=a-o,_=h-l;if(d===0)return l+_/2;if(_===0)return l;let p=(r-o)/d;return p=_*p+l,p}const s=function(r){const o=r.data,a=o.length;let l=o[0],h=l,d,_=o[1],p=_,u,g=o[2],y=g,S;const x=this.enhance();if(x===0)return;for(let C=0;C<a;C+=4)d=o[C+0],d<l?l=d:d>h&&(h=d),u=o[C+1],u<_?_=u:u>p&&(p=u),S=o[C+2],S<g?g=S:S>y&&(y=S);h===l&&(h=255,l=0),p===_&&(p=255,_=0),y===g&&(y=255,g=0);let f,c,m,v,T,O;if(x>0)f=h+x*(255-h),c=l-x*(l-0),m=p+x*(255-p),v=_-x*(_-0),T=y+x*(255-y),O=g-x*(g-0);else{const C=(h+l)*.5;f=h+x*(h-C),c=l+x*(l-C);const w=(p+_)*.5;m=p+x*(p-w),v=_+x*(_-w);const R=(y+g)*.5;T=y+x*(y-R),O=g+x*(g-R)}for(let C=0;C<a;C+=4)o[C+0]=n(o[C+0],l,h,c,f),o[C+1]=n(o[C+1],_,p,v,m),o[C+2]=n(o[C+2],g,y,O,T)};return Ei.Enhance=s,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ei}var Ai={},Ta;function id(){if(Ta)return Ai;Ta=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Grayscale=void 0;const t=function(e){const i=e.data,n=i.length;for(let s=0;s<n;s+=4){const r=.34*i[s]+.5*i[s+1]+.16*i[s+2];i[s]=r,i[s+1]=r,i[s+2]=r}};return Ai.Grayscale=t,Ai}var Mi={},Ea;function nd(){if(Ea)return Mi;Ea=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.HSL=void 0;const t=ft(),e=Rt(),i=gt();t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter);const n=function(s){const r=s.data,o=r.length,a=1,l=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,d=this.luminance()*127,_=a*l*Math.cos(h*Math.PI/180),p=a*l*Math.sin(h*Math.PI/180),u=.299*a+.701*_+.167*p,g=.587*a-.587*_+.33*p,y=.114*a-.114*_-.497*p,S=.299*a-.299*_-.328*p,x=.587*a+.413*_+.035*p,f=.114*a-.114*_+.293*p,c=.299*a-.3*_+1.25*p,m=.587*a-.586*_-1.05*p,v=.114*a+.886*_-.2*p;let T,O,C,w;for(let R=0;R<o;R+=4)T=r[R+0],O=r[R+1],C=r[R+2],w=r[R+3],r[R+0]=u*T+g*O+y*C+d,r[R+1]=S*T+x*O+f*C+d,r[R+2]=c*T+m*O+v*C+d,r[R+3]=w};return Mi.HSL=n,Mi}var Fi={},Aa;function rd(){if(Aa)return Fi;Aa=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.HSV=void 0;const t=ft(),e=Rt(),i=gt(),n=function(s){const r=s.data,o=r.length,a=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,d=a*l*Math.cos(h*Math.PI/180),_=a*l*Math.sin(h*Math.PI/180),p=.299*a+.701*d+.167*_,u=.587*a-.587*d+.33*_,g=.114*a-.114*d-.497*_,y=.299*a-.299*d-.328*_,S=.587*a+.413*d+.035*_,x=.114*a-.114*d+.293*_,f=.299*a-.3*d+1.25*_,c=.587*a-.586*d-1.05*_,m=.114*a+.886*d-.2*_;for(let v=0;v<o;v+=4){const T=r[v+0],O=r[v+1],C=r[v+2],w=r[v+3];r[v+0]=p*T+u*O+g*C,r[v+1]=y*T+S*O+x*C,r[v+2]=f*T+c*O+m*C,r[v+3]=w}};return Fi.HSV=n,t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Fi}var Ni={},Ma;function sd(){if(Ma)return Ni;Ma=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Invert=void 0;const t=function(e){const i=e.data,n=i.length;for(let s=0;s<n;s+=4)i[s]=255-i[s],i[s+1]=255-i[s+1],i[s+2]=255-i[s+2]};return Ni.Invert=t,Ni}var ki={},Fa;function od(){if(Fa)return ki;Fa=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Kaleidoscope=void 0;const t=ft(),e=Rt(),i=xt(),n=gt(),s=function(a,l,h){const d=a.data,_=l.data,p=a.width,u=a.height,g=h.polarCenterX||p/2,y=h.polarCenterY||u/2;let S=Math.sqrt(g*g+y*y),x=p-g,f=u-y;const c=Math.sqrt(x*x+f*f);S=c>S?c:S;const m=u,v=p,T=360/v*Math.PI/180;for(let O=0;O<v;O+=1){const C=Math.sin(O*T),w=Math.cos(O*T);for(let R=0;R<m;R+=1){x=Math.floor(g+S*R/m*w),f=Math.floor(y+S*R/m*C);let N=(f*p+x)*4;const G=d[N+0],D=d[N+1],U=d[N+2],L=d[N+3];N=(O+R*p)*4,_[N+0]=G,_[N+1]=D,_[N+2]=U,_[N+3]=L}}},r=function(a,l,h){const d=a.data,_=l.data,p=a.width,u=a.height,g=h.polarCenterX||p/2,y=h.polarCenterY||u/2;let S=Math.sqrt(g*g+y*y),x=p-g,f=u-y;const c=Math.sqrt(x*x+f*f);S=c>S?c:S;const m=u,v=p,T=0;let O,C;for(x=0;x<p;x+=1)for(f=0;f<u;f+=1){const w=x-g,R=f-y,N=Math.sqrt(w*w+R*R)*m/S;let G=(Math.atan2(R,w)*180/Math.PI+360+T)%360;G=G*v/360,O=Math.floor(G),C=Math.floor(N);let D=(C*p+O)*4;const U=d[D+0],L=d[D+1],K=d[D+2],b=d[D+3];D=(f*p+x)*4,_[D+0]=U,_[D+1]=L,_[D+2]=K,_[D+3]=b}},o=function(a){const l=a.width,h=a.height;let d,_,p,u,g,y,S,x,f,c,m=Math.round(this.kaleidoscopePower());const v=Math.round(this.kaleidoscopeAngle()),T=Math.floor(l*(v%360)/360);if(m<1)return;const O=i.Util.createCanvasElement();O.width=l,O.height=h;const C=O.getContext("2d").getImageData(0,0,l,h);i.Util.releaseCanvas(O),s(a,C,{polarCenterX:l/2,polarCenterY:h/2});let w=l/Math.pow(2,m);for(;w<=8;)w=w*2,m-=1;w=Math.ceil(w);let R=w,N=0,G=R,D=1;for(T+w>l&&(N=R,G=0,D=-1),_=0;_<h;_+=1)for(d=N;d!==G;d+=D)p=Math.round(d+T)%l,f=(l*_+p)*4,g=C.data[f+0],y=C.data[f+1],S=C.data[f+2],x=C.data[f+3],c=(l*_+d)*4,C.data[c+0]=g,C.data[c+1]=y,C.data[c+2]=S,C.data[c+3]=x;for(_=0;_<h;_+=1)for(R=Math.floor(w),u=0;u<m;u+=1){for(d=0;d<R+1;d+=1)f=(l*_+d)*4,g=C.data[f+0],y=C.data[f+1],S=C.data[f+2],x=C.data[f+3],c=(l*_+R*2-d-1)*4,C.data[c+0]=g,C.data[c+1]=y,C.data[c+2]=S,C.data[c+3]=x;R*=2}r(C,a,{})};return ki.Kaleidoscope=o,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),ki}var Oi={},Na;function ad(){if(Na)return Oi;Na=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Mask=void 0;const t=ft(),e=Rt(),i=gt();function n(p,u,g){let y=(g*p.width+u)*4;const S=[];return S.push(p.data[y++],p.data[y++],p.data[y++],p.data[y++]),S}function s(p,u){return Math.sqrt(Math.pow(p[0]-u[0],2)+Math.pow(p[1]-u[1],2)+Math.pow(p[2]-u[2],2))}function r(p){const u=[0,0,0];for(let g=0;g<p.length;g++)u[0]+=p[g][0],u[1]+=p[g][1],u[2]+=p[g][2];return u[0]/=p.length,u[1]/=p.length,u[2]/=p.length,u}function o(p,u){const g=n(p,0,0),y=n(p,p.width-1,0),S=n(p,0,p.height-1),x=n(p,p.width-1,p.height-1),f=u||10;if(s(g,y)<f&&s(y,x)<f&&s(x,S)<f&&s(S,g)<f){const c=r([y,g,x,S]),m=[];for(let v=0;v<p.width*p.height;v++){const T=s(c,[p.data[v*4],p.data[v*4+1],p.data[v*4+2]]);m[v]=T<f?0:255}return m}}function a(p,u){for(let g=0;g<p.width*p.height;g++)p.data[4*g+3]=u[g]}function l(p,u,g){const y=[1,1,1,1,0,1,1,1,1],S=Math.round(Math.sqrt(y.length)),x=Math.floor(S/2),f=[];for(let c=0;c<g;c++)for(let m=0;m<u;m++){const v=c*u+m;let T=0;for(let O=0;O<S;O++)for(let C=0;C<S;C++){const w=c+O-x,R=m+C-x;if(w>=0&&w<g&&R>=0&&R<u){const N=w*u+R,G=y[O*S+C];T+=p[N]*G}}f[v]=T===2040?255:0}return f}function h(p,u,g){const y=[1,1,1,1,1,1,1,1,1],S=Math.round(Math.sqrt(y.length)),x=Math.floor(S/2),f=[];for(let c=0;c<g;c++)for(let m=0;m<u;m++){const v=c*u+m;let T=0;for(let O=0;O<S;O++)for(let C=0;C<S;C++){const w=c+O-x,R=m+C-x;if(w>=0&&w<g&&R>=0&&R<u){const N=w*u+R,G=y[O*S+C];T+=p[N]*G}}f[v]=T>=1020?255:0}return f}function d(p,u,g){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],S=Math.round(Math.sqrt(y.length)),x=Math.floor(S/2),f=[];for(let c=0;c<g;c++)for(let m=0;m<u;m++){const v=c*u+m;let T=0;for(let O=0;O<S;O++)for(let C=0;C<S;C++){const w=c+O-x,R=m+C-x;if(w>=0&&w<g&&R>=0&&R<u){const N=w*u+R,G=y[O*S+C];T+=p[N]*G}}f[v]=T}return f}const _=function(p){const u=this.threshold();let g=o(p,u);return g&&(g=l(g,p.width,p.height),g=h(g,p.width,p.height),g=d(g,p.width,p.height),a(p,g)),p};return Oi.Mask=_,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Oi}var Ii={},ka;function ld(){if(ka)return Ii;ka=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Noise=void 0;const t=ft(),e=Rt(),i=gt(),n=function(s){const r=this.noise()*255,o=s.data,a=o.length,l=r/2;for(let h=0;h<a;h+=4)o[h+0]+=l-2*l*Math.random(),o[h+1]+=l-2*l*Math.random(),o[h+2]+=l-2*l*Math.random()};return Ii.Noise=n,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ii}var Di={},Oa;function cd(){if(Oa)return Di;Oa=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Pixelate=void 0;const t=ft(),e=xt(),i=Rt(),n=gt(),s=function(r){let o=Math.ceil(this.pixelSize()),a=r.width,l=r.height,h=Math.ceil(a/o),d=Math.ceil(l/o),_=r.data;if(o<=0){e.Util.error("pixelSize value can not be <= 0");return}for(let p=0;p<h;p+=1)for(let u=0;u<d;u+=1){let g=0,y=0,S=0,x=0;const f=p*o,c=f+o,m=u*o,v=m+o;let T=0;for(let O=f;O<c;O+=1)if(!(O>=a))for(let C=m;C<v;C+=1){if(C>=l)continue;const w=(a*C+O)*4;g+=_[w+0],y+=_[w+1],S+=_[w+2],x+=_[w+3],T+=1}g=g/T,y=y/T,S=S/T,x=x/T;for(let O=f;O<c;O+=1)if(!(O>=a))for(let C=m;C<v;C+=1){if(C>=l)continue;const w=(a*C+O)*4;_[w+0]=g,_[w+1]=y,_[w+2]=S,_[w+3]=x}}};return Di.Pixelate=s,t.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Di}var Li={},Ia;function hd(){if(Ia)return Li;Ia=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Posterize=void 0;const t=ft(),e=Rt(),i=gt(),n=function(s){const r=Math.round(this.levels()*254)+1,o=s.data,a=o.length,l=255/r;for(let h=0;h<a;h+=1)o[h]=Math.floor(o[h]/l)*l};return Li.Posterize=n,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Li}var Gi={},Da;function dd(){if(Da)return Gi;Da=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.RGB=void 0;const t=ft(),e=Rt(),i=gt(),n=function(s){const r=s.data,o=r.length,a=this.red(),l=this.green(),h=this.blue();for(let d=0;d<o;d+=4){const _=(.34*r[d]+.5*r[d+1]+.16*r[d+2])/255;r[d]=_*a,r[d+1]=_*l,r[d+2]=_*h,r[d+3]=r[d+3]}};return Gi.RGB=n,t.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),t.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),Gi}var Ui={},La;function ud(){if(La)return Ui;La=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.RGBA=void 0;const t=ft(),e=Rt(),i=gt(),n=function(s){const r=s.data,o=r.length,a=this.red(),l=this.green(),h=this.blue(),d=this.alpha();for(let _=0;_<o;_+=4){const p=1-d;r[_]=a*d+r[_]*p,r[_+1]=l*d+r[_+1]*p,r[_+2]=h*d+r[_+2]*p}};return Ui.RGBA=n,t.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),t.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),Ui}var Bi={},Ga;function fd(){if(Ga)return Bi;Ga=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Sepia=void 0;const t=function(e){const i=e.data,n=i.length;for(let s=0;s<n;s+=4){const r=i[s+0],o=i[s+1],a=i[s+2];i[s+0]=Math.min(255,r*.393+o*.769+a*.189),i[s+1]=Math.min(255,r*.349+o*.686+a*.168),i[s+2]=Math.min(255,r*.272+o*.534+a*.131)}};return Bi.Sepia=t,Bi}var Vi={},Ua;function gd(){if(Ua)return Vi;Ua=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Solarize=void 0;const t=function(e){const i=e.data,n=e.width,s=e.height,r=n*4;let o=s;do{const a=(o-1)*r;let l=n;do{const h=a+(l-1)*4;let d=i[h],_=i[h+1],p=i[h+2];d>127&&(d=255-d),_>127&&(_=255-_),p>127&&(p=255-p),i[h]=d,i[h+1]=_,i[h+2]=p}while(--l)}while(--o)};return Vi.Solarize=t,Vi}var Hi={},Ba;function pd(){if(Ba)return Hi;Ba=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Threshold=void 0;const t=ft(),e=Rt(),i=gt(),n=function(s){const r=this.threshold()*255,o=s.data,a=o.length;for(let l=0;l<a;l+=1)o[l]=o[l]<r?0:255};return Hi.Threshold=n,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Hi}var Va;function _d(){if(Va)return ii;Va=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Konva=void 0;const t=Dh(),e=Lh(),i=Uh(),n=Bh(),s=Vh(),r=Hh(),o=qh(),a=na(),l=Fr(),h=ua(),d=Wh(),_=zh(),p=Kh(),u=jh(),g=ya(),y=Yh(),S=Xh(),x=$h(),f=Jh(),c=Qh(),m=Zh(),v=td(),T=ed(),O=id(),C=nd(),w=rd(),R=sd(),N=od(),G=ad(),D=ld(),U=cd(),L=hd(),K=dd(),b=ud(),P=fd(),F=gd(),A=pd();return ii.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:r.Image,Label:o.Label,Tag:o.Tag,Line:a.Line,Path:l.Path,Rect:h.Rect,RegularPolygon:d.RegularPolygon,Ring:_.Ring,Sprite:p.Sprite,Star:u.Star,Text:g.Text,TextPath:y.TextPath,Transformer:S.Transformer,Wedge:x.Wedge,Filters:{Blur:f.Blur,Brighten:c.Brighten,Contrast:m.Contrast,Emboss:v.Emboss,Enhance:T.Enhance,Grayscale:O.Grayscale,HSL:C.HSL,HSV:w.HSV,Invert:R.Invert,Kaleidoscope:N.Kaleidoscope,Mask:G.Mask,Noise:D.Noise,Pixelate:U.Pixelate,Posterize:L.Posterize,RGB:K.RGB,RGBA:b.RGBA,Sepia:P.Sepia,Solarize:F.Solarize,Threshold:A.Threshold}}),ii}var md=xn.exports,Ha;function yd(){if(Ha)return xn.exports;Ha=1,Object.defineProperty(md,"__esModule",{value:!0});const t=_d();return xn.exports=t.Konva,xn.exports}var bd=yd();const Nt=Nh(bd),vd=()=>({stage:void 0,konvaContainer:void 0,notes:new Map,selection:{selectedIds:new Set,selectionRect:void 0},viewport:{scrollX:0,scrollY:55*20,zoom:1},grid:{quarterNoteWidth:120,noteHeight:20,subdivision:16,numMeasures:100,timeSignature:4,maxLength:64,backgroundColor1:"#ddd",backgroundColor2:"#bbb",noteColor:"#f23",selectedNoteColor:"#2ee"},interaction:{isDragging:!1,dragStartPos:void 0,draggedNoteInitialStates:new Map,quantDragActivated:!1,dragBeforeState:void 0,isResizing:!1,resizeTargetId:void 0,resizeIsEnd:!1,resizeInitialStates:new Map,quantResizeActivated:!1,resizeBeforeState:void 0,isMarqueeSelecting:!1,marqueeStart:void 0,marqueeCurrent:void 0,marqueeIsShift:!1,hiddenNoteIds:new Set,truncatedNotes:new Map},command:{stack:void 0},layers:{grid:void 0,notes:void 0,overlay:void 0},renderCache:{grid:{lastScrollX:-1,lastScrollY:-1,lastSubdivision:-1}},needsRedraw:!1,rafHandle:void 0,queuePlayhead:{position:0,element:void 0},livePlayhead:{position:0,element:void 0},notifyExternalChange:void 0}),Sd=(t="note_")=>`${t}${Date.now()}_${Math.random().toString(36).substr(2,9)}`;function qa(t,e){const{scrollX:i,scrollY:n}=e.viewport,{quarterNoteWidth:s,noteHeight:r}=e.grid,o=t.x+i,a=t.y+n,l=o/s;return{pitch:127-Math.floor(a/r),position:l}}function Tn(t,e,i){const{scrollX:n,scrollY:s}=i.viewport,{quarterNoteWidth:r,noteHeight:o}=i.grid,a=e*r,l=(127-t)*o;return{x:a-n,y:l-s}}function Wa(t,e){const i=e/4;return Math.floor(t*i)/i}function za(t){return t.grid.quarterNoteWidth*(4/t.grid.subdivision)}function Ka(t,e){const{scrollX:i,scrollY:n}=e.viewport,{quarterNoteWidth:s,noteHeight:r}=e.grid,o=e.stage;if(!o)return!1;const a=o.width(),l=o.height(),h=i/s,d=(i+a)/s,_=Math.floor(n/r),p=Math.ceil((n+l)/r),u=t.position+t.duration,g=127-t.pitch;return!(u<h||t.position>d||g<_||g>p)}function Cd(t,e){const{scrollX:i,scrollY:n}=t.viewport,{quarterNoteWidth:s,noteHeight:r}=t.grid,o=[];return t.notes.forEach((a,l)=>{const h=Tn(a.pitch,a.position,t),d=a.duration*s,_=h.x+d,p=h.y+r,u=e.x+e.width,g=e.y+e.height;!(_<e.x||h.x>u||p<e.y||h.y>g)&&o.push(l)}),o}function ja(t){t.interaction.hiddenNoteIds.clear(),t.interaction.truncatedNotes.clear(),t.selection.selectedIds.forEach(e=>{const i=t.notes.get(e);if(!i)return;const n=i.position+i.duration;t.notes.forEach((s,r)=>{if(t.selection.selectedIds.has(r)||s.pitch!==i.pitch)return;const o=s.position+s.duration;if(s.position<i.position&&i.position<o){const a=i.position-s.position;t.interaction.truncatedNotes.set(r,a)}else i.position<=s.position&&s.position<n&&t.interaction.hiddenNoteIds.add(r)})})}function wd(t,e,i){return t.interaction.truncatedNotes.get(e)??i}function Ya(t){t.interaction.hiddenNoteIds.forEach(e=>{t.notes.delete(e)}),t.interaction.truncatedNotes.forEach((e,i)=>{const n=t.notes.get(i);n&&(n.duration=e)})}function Xa(t){t.interaction.truncatedNotes.clear(),t.interaction.hiddenNoteIds.clear()}function xd(t){let i=null;for(const n of t.selection.selectedIds){const s=t.notes.get(n);if(!s)continue;let r=1/0,o=null;if(t.notes.forEach((a,l)=>{if(t.selection.selectedIds.has(l))return;const h=Math.abs(s.position-a.position);h<r&&h<.1&&(r=h,o=a.position)}),o!==null){i=o-s.position;break}}i!==null&&t.selection.selectedIds.forEach(n=>{const s=t.notes.get(n);s&&(s.position+=i)})}const Pd=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function $a(t){return Pd[t%12]+(Math.floor(t/12)-2)}class Rd{constructor(e,i,n){this.captureState=e,this.restoreState=i,this.onChangeCallback=n}stack=[];currentIndex=-1;onChangeCallback;executeCommand(e,i){const n=this.captureState();i();const s=this.captureState();n!==s&&this.pushCommand(e,n,s)}pushCommand(e,i,n){this.stack=this.stack.slice(0,this.currentIndex+1),this.stack.push({name:e,beforeState:i,afterState:n}),this.currentIndex++,this.onChangeCallback?.()}canUndo(){return this.currentIndex>=0}canRedo(){return this.currentIndex<this.stack.length-1}undo(){if(!this.canUndo())return;const e=this.stack[this.currentIndex];this.restoreState(e.beforeState),this.currentIndex--,this.onChangeCallback?.()}redo(){if(!this.canRedo())return;this.currentIndex++;const e=this.stack[this.currentIndex];this.restoreState(e.afterState),this.onChangeCallback?.()}clear(){this.stack=[],this.currentIndex=-1,this.onChangeCallback?.()}}function qi(t){return JSON.stringify({notes:Array.from(t.notes.entries()),selection:Array.from(t.selection.selectedIds)})}function Td(t,e){const i=JSON.parse(e);t.notes=new Map(i.notes),t.selection.selectedIds=new Set(i.selection),t.needsRedraw=!0}function Ed(t,e){if(t.size!==e.size)return!0;for(const i of t)if(!e.has(i))return!0;return!1}function Nr(t,e){const i=new Set(t.selection.selectedIds);e();const n=Ed(i,t.selection.selectedIds);return n&&t.notifyExternalChange?.(),n}function Ad(t,e,i){const n=new Nt.Layer({listening:!1,name:"grid-layer"});e.add(n),t.layers.grid=n;const s=new Nt.Layer({name:"notes-layer"});e.add(s),t.layers.notes=s;const r=new Nt.Layer({name:"overlay-layer"});e.add(r),t.layers.overlay=r,t.selection.selectionRect=new Nt.Rect({stroke:"#4A90E2",strokeWidth:1,dash:[3,3],fill:"rgba(74, 144, 226, 0.1)",listening:!1,visible:!1}),r.add(t.selection.selectionRect);const o=128*t.grid.noteHeight;t.queuePlayhead.element=new Nt.Line({points:[0,0,0,o],stroke:"#00ff00",strokeWidth:2,listening:!1}),r.add(t.queuePlayhead.element),t.livePlayhead.element=new Nt.Line({points:[0,0,0,o],stroke:"#ff8800",strokeWidth:2,listening:!1}),r.add(t.livePlayhead.element),t.command.stack=new Rd(()=>qi(t),a=>Td(t,a),()=>{t.needsRedraw=!0,i?.()})}function Md(t){const e=t.layers.grid;if(!e||!t.stage)return;const i=t.renderCache.grid;if(i.lastScrollX===t.viewport.scrollX&&i.lastScrollY===t.viewport.scrollY&&i.lastSubdivision===t.grid.subdivision)return;i.lastScrollX=t.viewport.scrollX,i.lastScrollY=t.viewport.scrollY,i.lastSubdivision=t.grid.subdivision,e.destroyChildren();const{scrollX:n,scrollY:s}=t.viewport,{quarterNoteWidth:r,noteHeight:o,numMeasures:a,timeSignature:l}=t.grid,h=t.stage,d=h.width(),_=h.height(),p=128*o,u=l*4,g=r*u,y=Math.floor(n/g),S=Math.ceil((n+d)/g);for(let O=y;O<=S&&O<a;O++){const C=O%2===0?t.grid.backgroundColor1:t.grid.backgroundColor2,w=O*g-n;e.add(new Nt.Rect({x:w,y:-s,width:g,height:p,fill:C,listening:!1}))}const x=a*u*(t.grid.subdivision/4),f=r*(4/t.grid.subdivision),c=Math.floor(n/f),m=Math.ceil((n+d)/f);for(let O=c;O<=m&&O<x;O++){const C=O*f-n,R=O*f%r===0?1.8:1;e.add(new Nt.Line({points:[C,-s,C,p-s],stroke:"#000",strokeWidth:R,listening:!1}))}const v=Math.floor(s/o),T=Math.ceil((s+_)/o);for(let O=v;O<=T&&O<128;O++){const C=O*o-s;e.add(new Nt.Line({points:[0-n,C,a*g-n,C],stroke:"#000",strokeWidth:1,listening:!1}))}e.batchDraw()}function Fd(t){const e=t.layers.notes;if(!e||!t.stage)return;e.destroyChildren();const{scrollX:i,scrollY:n}=t.viewport,{quarterNoteWidth:s,noteHeight:r}=t.grid,o=[],a=[];t.notes.forEach((l,h)=>{Ka(l,t)&&(t.selection.selectedIds.has(h)?a.push([h,l]):o.push([h,l]))}),o.forEach(([l,h])=>{const d=Tn(h.pitch,h.position,t),p=wd(t,l,h.duration)*s,u=t.interaction.hiddenNoteIds.has(l),g=new Nt.Rect({x:d.x,y:d.y,width:p,height:r,fill:t.grid.noteColor,stroke:"#000",strokeWidth:1,opacity:u?.3:1,listening:!0});g.setAttr("noteId",l),e.add(g);const y=$a(h.pitch),S=new Nt.Text({x:d.x+4,y:d.y+2,text:y,fontSize:14,fill:"#000",listening:!1});e.add(S)}),a.forEach(([l,h])=>{const d=Tn(h.pitch,h.position,t),_=h.duration*s,p=t.interaction.hiddenNoteIds.has(l),u=new Nt.Rect({x:d.x,y:d.y,width:_,height:r,fill:t.grid.selectedNoteColor,stroke:"#000",strokeWidth:1,opacity:p?.3:1,listening:!0});u.setAttr("noteId",l),e.add(u);const g=$a(h.pitch),y=new Nt.Text({x:d.x+4,y:d.y+2,text:g,fontSize:14,fill:"#000",listening:!1});e.add(y)}),e.batchDraw()}function Nd(t){const e=t.layers.notes;if(!e)return;const{quarterNoteWidth:i,noteHeight:n}=t.grid,s=5;e.find(".resize-handle").forEach(r=>r.destroy()),t.selection.selectedIds.forEach(r=>{const o=t.notes.get(r);if(!o||!Ka(o,t))return;const a=Tn(o.pitch,o.position,t),l=o.duration*i,h=new Nt.Circle({x:a.x,y:a.y+n/2,radius:s,fill:"#000",listening:!0,name:"resize-handle"});h.setAttr("handleNoteId",r),h.setAttr("handleIsEnd",!1),e.add(h);const d=new Nt.Circle({x:a.x+l,y:a.y+n/2,radius:s,fill:"#000",listening:!0,name:"resize-handle"});d.setAttr("handleNoteId",r),d.setAttr("handleIsEnd",!0),e.add(d)}),e.batchDraw()}function kd(t){if(!t.selection.selectionRect||!t.interaction.marqueeStart||!t.interaction.marqueeCurrent)return;const e=t.interaction.marqueeStart,i=t.interaction.marqueeCurrent,n=Math.min(e.x,i.x),s=Math.min(e.y,i.y),r=Math.abs(i.x-e.x),o=Math.abs(i.y-e.y);t.selection.selectionRect.setAttrs({x:n,y:s,width:r,height:o,visible:r>5||o>5}),t.layers.overlay?.batchDraw()}function Od(t){if(!t.queuePlayhead.element)return;const{scrollX:e}=t.viewport,i=t.queuePlayhead.position*t.grid.quarterNoteWidth-e;t.queuePlayhead.element.x(i),t.layers.overlay?.batchDraw()}function Id(t){if(!t.livePlayhead.element)return;const{scrollX:e}=t.viewport,i=t.livePlayhead.position*t.grid.quarterNoteWidth-e;t.livePlayhead.element.x(i),t.layers.overlay?.batchDraw()}function Dd(t,e){t.layers.notes;const i=t.layers.grid;e.on("dblclick",n=>{if(n.target===e||n.target.getLayer()===i){const s=e.getPointerPosition();if(!s)return;const{pitch:r,position:o}=qa(s,t),a=Wa(o,t.grid.subdivision),l=Math.round(r);t.command.stack?.executeCommand("Add Note",()=>{const h={id:Sd(),pitch:l,position:a,duration:4/t.grid.subdivision,velocity:.8};t.notes.set(h.id,h),t.needsRedraw=!0})}}),e.on("mousedown touchstart",n=>{const s=n.target,r=s.getAttr?.("handleNoteId");if(r){const a=s.getAttr("handleIsEnd");Bd(t,e,r,a);return}const o=s.getAttr?.("noteId");if(o){const a=n.evt.shiftKey||n.evt.ctrlKey,l=t.selection.selectedIds.has(o);Nr(t,()=>{a?l?t.selection.selectedIds.delete(o):t.selection.selectedIds.add(o):(!l||t.selection.selectedIds.size>1)&&(t.selection.selectedIds.clear(),t.selection.selectedIds.add(o))}),Ld(t,e),t.needsRedraw=!0;return}if(s===e||s.getLayer()===i){const a=e.getPointerPosition();if(!a)return;t.interaction.isMarqueeSelecting=!0,t.interaction.marqueeStart=a,t.interaction.marqueeCurrent=a,t.interaction.marqueeIsShift=n.evt.shiftKey||n.evt.ctrlKey,t.interaction.marqueeIsShift||Nr(t,()=>{t.selection.selectedIds.clear()}),t.needsRedraw=!0}}),e.on("mousemove touchmove",n=>{const s=e.getPointerPosition();if(s){if(t.interaction.isDragging){Gd(t,e);return}if(t.interaction.isResizing){Vd(t,e);return}if(t.interaction.isMarqueeSelecting){t.interaction.marqueeCurrent=s,kd(t);const r={x:Math.min(t.interaction.marqueeStart.x,s.x),y:Math.min(t.interaction.marqueeStart.y,s.y),width:Math.abs(s.x-t.interaction.marqueeStart.x),height:Math.abs(s.y-t.interaction.marqueeStart.y)},o=Cd(t,r);Nr(t,()=>{t.interaction.marqueeIsShift?o.forEach(a=>{t.selection.selectedIds.add(a)}):(t.selection.selectedIds.clear(),o.forEach(a=>{t.selection.selectedIds.add(a)}))}),t.needsRedraw=!0}}}),e.on("mouseup touchend",n=>{if(t.interaction.isDragging){Ud(t);return}if(t.interaction.isResizing){Hd(t);return}if(t.interaction.isMarqueeSelecting){const s=t.interaction.marqueeStart&&t.interaction.marqueeCurrent&&Math.abs(t.interaction.marqueeStart.x-t.interaction.marqueeCurrent.x)<5&&Math.abs(t.interaction.marqueeStart.y-t.interaction.marqueeCurrent.y)<5;if(t.interaction.isMarqueeSelecting=!1,t.selection.selectionRect&&(t.selection.selectionRect.visible(!1),t.layers.overlay?.batchDraw()),s&&n.target===e||n.target.getLayer()===i){const r=e.getPointerPosition();if(r){const{position:o}=qa(r,t),a=Wa(o,t.grid.subdivision);t.queuePlayhead.position=Math.max(0,Math.min(a,t.grid.maxLength)),t.needsRedraw=!0,t.notifyExternalChange?.()}}}})}function Ld(t,e){const i=e.getPointerPosition();i&&(t.interaction.isDragging=!0,t.interaction.dragStartPos=i,t.interaction.quantDragActivated=!1,t.interaction.dragBeforeState=qi(t),t.interaction.draggedNoteInitialStates.clear(),t.selection.selectedIds.forEach(n=>{const s=t.notes.get(n);s&&t.interaction.draggedNoteInitialStates.set(n,{position:s.position,pitch:s.pitch})}))}function Gd(t,e){const i=e.getPointerPosition();if(!i||!t.interaction.dragStartPos)return;const n=i.x-t.interaction.dragStartPos.x,s=i.y-t.interaction.dragStartPos.y,r=za(t);let o;Math.abs(n)<r*.9&&!t.interaction.quantDragActivated?o=n:(o=Math.round(n/r)*r,t.interaction.quantDragActivated=!0);const a=Math.round(s/t.grid.noteHeight);t.interaction.draggedNoteInitialStates.forEach((l,h)=>{const d=t.notes.get(h);d&&(d.position=l.position+o/t.grid.quarterNoteWidth,d.pitch=Math.max(0,Math.min(127,l.pitch-a)))}),xd(t),ja(t),t.needsRedraw=!0}function Ud(t){Ya(t);const e=qi(t);t.interaction.dragBeforeState&&t.interaction.dragBeforeState!==e&&t.command.stack?.pushCommand("Move Notes",t.interaction.dragBeforeState,e),t.interaction.isDragging=!1,Xa(t),t.needsRedraw=!0}function Bd(t,e,i,n){const s=e.getPointerPosition();s&&(t.interaction.isResizing=!0,t.interaction.resizeTargetId=i,t.interaction.resizeIsEnd=n,t.interaction.quantResizeActivated=!1,t.interaction.dragStartPos=s,t.interaction.resizeBeforeState=qi(t),t.interaction.resizeInitialStates.clear(),t.selection.selectedIds.forEach(r=>{const o=t.notes.get(r);o&&t.interaction.resizeInitialStates.set(r,{position:o.position,duration:o.duration})}))}function Vd(t,e){const i=e.getPointerPosition();if(!i||!t.interaction.dragStartPos)return;const n=i.x-t.interaction.dragStartPos.x,s=za(t);let r;Math.abs(n)<s*.9&&!t.interaction.quantResizeActivated?r=n:(r=Math.round(n/s)*s,t.interaction.quantResizeActivated=!0);const o=r/t.grid.quarterNoteWidth;t.interaction.resizeInitialStates.forEach((a,l)=>{const h=t.notes.get(l);h&&(t.interaction.resizeIsEnd?h.duration=Math.max(.25,a.duration+o):(h.position=a.position+o,h.duration=Math.max(.25,a.duration-o)))}),ja(t),t.needsRedraw=!0}function Hd(t){Ya(t);const e=qi(t);t.interaction.resizeBeforeState&&t.interaction.resizeBeforeState!==e&&t.command.stack?.pushCommand("Resize Notes",t.interaction.resizeBeforeState,e),t.interaction.isResizing=!1,Xa(t),t.needsRedraw=!0}const qd={class:"piano-roll-root"},Wd={key:0,class:"control-panel"},zd=["disabled"],Kd=["disabled"],jd=["disabled"],Yd=["disabled"],Xd={class:"info"},$d=((t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i})(Ps({__name:"PianoRollRoot",props:{width:{default:640,type:Number},height:{default:360,type:Number},initialNotes:{default:()=>[],type:Array},syncState:{type:Function},showControlPanel:{type:Boolean,default:!0},interactive:{type:Boolean,default:!0}},emits:["notes-update"],setup(t,{expose:e,emit:i}){const n=t,s=i,r=vd(),o=an(),a=an(!1),l=an(!1),h=an(r.grid.subdivision),d=ei(()=>r.notes.size),_=ei(()=>r.selection.selectedIds.size),p=ei(()=>n.interactive),u=ei(()=>n.showControlPanel);let g=!1,y=!1;_e(h,D=>{r.grid.subdivision=D,r.needsRedraw=!0,n.syncState?.(r)});const S=()=>{r.command.stack?.undo(),f()},x=()=>{r.command.stack?.redo(),f()},f=()=>{a.value=r.command.stack?.canUndo()??!1,l.value=r.command.stack?.canRedo()??!1},c=()=>{f(),T()},m=()=>{r.selection.selectedIds.size!==0&&(r.command.stack?.executeCommand("Delete Selected",()=>{r.selection.selectedIds.forEach(D=>r.notes.delete(D)),r.selection.selectedIds.clear(),r.needsRedraw=!0}),f())},v=()=>{r.needsRedraw&&(Md(r),Fd(r),Nd(r),Od(r),Id(r),r.needsRedraw=!1),r.rafHandle=requestAnimationFrame(v)},T=()=>{s("notes-update",Array.from(r.notes.entries())),n.syncState?.(r)};r.notifyExternalChange=()=>{T()},_e(()=>r.notes.size,T);const O=D=>{if(n.interactive){if((D.metaKey||D.ctrlKey)&&D.key==="z"&&!D.shiftKey&&(D.preventDefault(),S()),(D.metaKey||D.ctrlKey)&&D.key==="z"&&D.shiftKey&&(D.preventDefault(),x()),(D.key==="Backspace"||D.key==="Delete")&&(D.preventDefault(),m()),D.key.startsWith("Arrow")&&r.selection.selectedIds.size>0&&(D.preventDefault(),r.command.stack?.executeCommand("Move Selection",()=>{r.selection.selectedIds.forEach(U=>{const L=r.notes.get(U);if(L)switch(D.key){case"ArrowUp":L.pitch=Math.min(127,L.pitch+1);break;case"ArrowDown":L.pitch=Math.max(0,L.pitch-1);break;case"ArrowLeft":L.position=Math.max(0,L.position-.25);break;case"ArrowRight":L.position+=.25;break}}),r.needsRedraw=!0}),f()),(D.metaKey||D.ctrlKey)&&D.key==="c"&&r.selection.selectedIds.size>0){D.preventDefault();const U=Array.from(r.selection.selectedIds).map(K=>{const b=r.notes.get(K);return b?{...b}:null}).filter(K=>K!==null),L=Math.min(...U.map(K=>K.position));sessionStorage.setItem("copiedPianoRollNotes",JSON.stringify({notes:U.map(K=>({...K,position:K.position-L}))}))}if((D.metaKey||D.ctrlKey)&&D.key==="v"){D.preventDefault();const U=sessionStorage.getItem("copiedPianoRollNotes");if(!U)return;try{const{notes:L}=JSON.parse(U);r.command.stack?.executeCommand("Paste Notes",()=>{r.selection.selectedIds.clear(),L.forEach(K=>{const b={...K,id:`note_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,position:r.queuePlayhead.position+K.position};r.notes.set(b.id,b),r.selection.selectedIds.add(b.id)}),r.needsRedraw=!0}),f()}catch(L){console.error("Failed to paste notes",L)}}}},C=()=>{r.stage&&(g||(Dd(r,r.stage),g=!0),r.stage.listening(!0),y||(window.addEventListener("keydown",O),y=!0))},w=()=>{r.stage&&(r.stage.listening(!1),r.interaction.isDragging=!1,r.interaction.isResizing=!1,r.interaction.isMarqueeSelecting=!1,r.selection.selectionRect?.visible(!1),y&&(window.removeEventListener("keydown",O),y=!1),r.layers.overlay?.batchDraw())};return As(()=>{if(!o.value){console.error("Konva container ref not found");return}const D=new Nt.Stage({container:o.value,width:n.width,height:n.height});r.stage=D,r.konvaContainer=o.value,Ad(r,D,c),n.interactive?C():w(),n.initialNotes&&n.initialNotes.length>0&&(r.notes=new Map(n.initialNotes),r.needsRedraw=!0),r.rafHandle=requestAnimationFrame(v),r.needsRedraw=!0,c()}),ir(()=>{r.rafHandle&&cancelAnimationFrame(r.rafHandle),w(),r.stage?.destroy()}),_e(()=>n.interactive,D=>{r.stage&&(D?C():w())}),_e(()=>n.width,D=>{r.stage&&(r.stage.width(D),r.needsRedraw=!0)}),_e(()=>n.height,D=>{r.stage&&(r.stage.height(D),r.needsRedraw=!0)}),e({setNotes:D=>{const U=new Set;r.notes.clear(),D.forEach((L,K)=>{let b=L.id||`note_${Date.now()}_${K}`;for(;U.has(b);)b=`note_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;U.add(b);const P={...L,id:b,velocity:L.velocity??100};r.notes.set(b,P)}),r.needsRedraw=!0,T()},setLivePlayheadPosition:D=>{r.livePlayhead.position=Math.max(0,Math.min(D,r.grid.maxLength)),r.needsRedraw=!0},getPlayStartPosition:()=>r.queuePlayhead.position}),(D,U)=>(dr(),ro("div",qd,[u.value?(dr(),ro("div",Wd,[Ft("button",{onClick:S,disabled:!p.value||!a.value}," Undo",8,zd),Ft("button",{onClick:x,disabled:!p.value||!l.value}," Redo",8,Kd),U[3]||(U[3]=Ft("span",{class:"separator"},"|",-1)),Ft("label",null,[U[2]||(U[2]=ao(" Grid: ")),Ql(Ft("select",{"onUpdate:modelValue":U[0]||(U[0]=L=>h.value=L),disabled:!p.value},U[1]||(U[1]=[Ft("option",{value:4},"Quarter",-1),Ft("option",{value:8},"Eighth",-1),Ft("option",{value:16},"16th",-1),Ft("option",{value:32},"32nd",-1)]),8,jd),[[Th,h.value,void 0,{number:!0}]])]),U[4]||(U[4]=Ft("span",{class:"separator"},"|",-1)),Ft("button",{onClick:m,disabled:!p.value||_.value===0},"  Delete ",8,Yd),U[5]||(U[5]=Ft("span",{class:"separator"},"|",-1)),Ft("span",Xd,On(d.value)+" notes, "+On(_.value)+" selected",1)])):Kc("",!0),Ft("div",{ref_key:"konvaContainer",ref:o,class:$i(["piano-roll-container",{"is-disabled":!p.value}])},null,2)]))}}),[["styles",[".piano-roll-root[data-v-8b3ed461]{display:flex;flex-direction:column;align-items:center;gap:20px;padding:20px}.control-panel[data-v-8b3ed461]{background:#fff;border:1px solid #ccc;border-radius:8px;padding:10px 15px;display:flex;align-items:center;gap:10px;box-shadow:0 2px 10px #0000001a}.control-panel button[data-v-8b3ed461]{background:#f0f0f0;border:1px solid #ccc;border-radius:4px;padding:5px 15px;cursor:pointer;font-size:14px;transition:all .2s}.control-panel button[data-v-8b3ed461]:hover:not(:disabled){background:#e0e0e0}.control-panel button[data-v-8b3ed461]:disabled{opacity:.5;cursor:not-allowed}.separator[data-v-8b3ed461]{color:#ccc}.info[data-v-8b3ed461]{color:#666;font-size:14px}.piano-roll-container[data-v-8b3ed461]{background-color:#fff;border:1px solid black;cursor:default}.piano-roll-container.is-disabled[data-v-8b3ed461]{pointer-events:none;cursor:not-allowed}label[data-v-8b3ed461]{display:flex;align-items:center;gap:5px;font-size:14px}select[data-v-8b3ed461]{padding:3px 8px;border:1px solid #ccc;border-radius:4px;font-size:14px;cursor:pointer}"]],["__scopeId","data-v-8b3ed461"]]),Ja="piano-roll-component",kr=Ph($d);return customElements.get(Ja)||customElements.define(Ja,kr),Wi.PianoRollElement=kr,Wi.default=kr,Object.defineProperties(Wi,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),Wi}({});
